<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>架构整洁之道</title>
      <link href="/2022/01/16/%E6%9E%B6%E6%9E%84%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93/"/>
      <url>/2022/01/16/%E6%9E%B6%E6%9E%84%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>算法题集</title>
      <link href="/2022/01/04/%E7%AE%97%E6%B3%95%E9%A2%98%E9%9B%86/"/>
      <url>/2022/01/04/%E7%AE%97%E6%B3%95%E9%A2%98%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h1><h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] sortArray(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        quickSort(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> nums;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l &gt;= r)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> mid = l + ((r - l) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="comment">//怎么又带来了0</span></span><br><span class="line">        <span class="keyword">int</span> guardIndex = findMedian(nums, l, mid, r);</span><br><span class="line">        swap(nums, guardIndex, r);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// int left = 0, right = r-1;</span></span><br><span class="line">        <span class="comment">//怎么写成left = 0 了啊</span></span><br><span class="line">        <span class="keyword">int</span> left = l, right = r-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> pivot = nums[r];</span><br><span class="line">        <span class="comment">//必须是&lt;= 一定要进入while，才能保证出来的left正确</span></span><br><span class="line">        <span class="keyword">while</span>(left &lt;= right)&#123;</span><br><span class="line">            <span class="keyword">while</span>(left &lt;= right &amp;&amp; nums[left] &lt;= pivot) left++;</span><br><span class="line">            <span class="keyword">while</span>(left &lt;= right &amp;&amp; nums[right] &gt;= pivot) right--;</span><br><span class="line">            <span class="keyword">if</span>(left &gt; right)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(nums, left, right);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        swap(nums, left, r);</span><br><span class="line">        quickSort(nums, l, left - <span class="number">1</span>);</span><br><span class="line">        quickSort(nums, left+<span class="number">1</span>, r);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findMedian</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span></span>&#123;</span><br><span class="line">        <span class="keyword">long</span> v1 = nums[a], v2 = nums[b], v3 = nums[c];</span><br><span class="line">        <span class="comment">//这里会溢出</span></span><br><span class="line">        <span class="keyword">if</span>((v1 - v2) * (v1 - v3) &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> a;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>((v2 - v1) * (v2 - v3) &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> b;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp = nums[a];</span><br><span class="line">        nums[a] = nums[b];</span><br><span class="line">        nums[b] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure><h2 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] tmp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] sortArray(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        tmp = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</span><br><span class="line">        mergeSort(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> nums;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &gt;= r) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        mergeSort(nums, l, mid);</span><br><span class="line">        mergeSort(nums, mid + <span class="number">1</span>, r);</span><br><span class="line">        <span class="keyword">int</span> i = l, j = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] &lt;= nums[j]) &#123;</span><br><span class="line">                tmp[cnt++] = nums[i++];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                tmp[cnt++] = nums[j++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (i &lt;= mid) &#123;</span><br><span class="line">            tmp[cnt++] = nums[i++];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (j &lt;= r) &#123;</span><br><span class="line">            tmp[cnt++] = nums[j++];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; r - l + <span class="number">1</span>; ++k) &#123;</span><br><span class="line">            nums[k + l] = tmp[k];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//我将merge分为一个新的方法，但没有这个简洁</span></span><br></pre></td></tr></table></figure><h2 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] sortArray(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        heapSort(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> nums;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = r / <span class="number">2</span>; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">            down(nums, i, r);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = r; i&gt;=<span class="number">1</span>; i--)&#123;</span><br><span class="line">            swap(nums, <span class="number">0</span>, i);</span><br><span class="line">            down(nums, <span class="number">0</span>, i-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">down</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> cur = l;</span><br><span class="line">        <span class="keyword">while</span>(cur * <span class="number">2</span> + <span class="number">1</span> &lt;= r)&#123;</span><br><span class="line">            <span class="keyword">if</span>(cur * <span class="number">2</span> + <span class="number">2</span> &lt;= r)&#123;</span><br><span class="line">                <span class="keyword">int</span> nextOrNot = Math.max(nums[cur*<span class="number">2</span>+<span class="number">1</span>], nums[cur*<span class="number">2</span>+<span class="number">2</span>]);</span><br><span class="line">                <span class="keyword">if</span>(nextOrNot &gt; nums[cur])&#123;</span><br><span class="line">                    <span class="keyword">if</span>(nextOrNot == nums[cur*<span class="number">2</span> + <span class="number">1</span>])&#123;</span><br><span class="line">                        swap(nums, cur, cur*<span class="number">2</span>+<span class="number">1</span>);</span><br><span class="line">                        cur = cur * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span>&#123;</span><br><span class="line">                        swap(nums, cur, cur*<span class="number">2</span>+<span class="number">2</span>);</span><br><span class="line">                        cur = cur * <span class="number">2</span> + <span class="number">2</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[cur*<span class="number">2</span>+<span class="number">1</span>] &gt; nums[cur])&#123;</span><br><span class="line">                    swap(nums, cur, cur*<span class="number">2</span>+<span class="number">1</span>);</span><br><span class="line">                    cur = cur*<span class="number">2</span>+<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp = nums[i];</span><br><span class="line">        nums[i] = nums[j];</span><br><span class="line">        nums[j] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//下面是leetcode解答，为什么又比我的简洁呢？</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] sortArray(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        heapSort(nums);</span><br><span class="line">        <span class="keyword">return</span> nums;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = nums.length - <span class="number">1</span>;</span><br><span class="line">        buildMaxHeap(nums, len);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = len; i &gt;= <span class="number">1</span>; --i) &#123;</span><br><span class="line">            swap(nums, i, <span class="number">0</span>);</span><br><span class="line">            len -= <span class="number">1</span>;</span><br><span class="line">            maxHeapify(nums, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildMaxHeap</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = len / <span class="number">2</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            maxHeapify(nums, i, len);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">maxHeapify</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (; (i &lt;&lt; <span class="number">1</span>) + <span class="number">1</span> &lt;= len;) &#123;</span><br><span class="line">            <span class="keyword">int</span> lson = (i &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> rson = (i &lt;&lt; <span class="number">1</span>) + <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> large;</span><br><span class="line">            <span class="keyword">if</span> (lson &lt;= len &amp;&amp; nums[lson] &gt; nums[i]) &#123;</span><br><span class="line">                large = lson;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                large = i;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (rson &lt;= len &amp;&amp; nums[rson] &gt; nums[large]) &#123;</span><br><span class="line">                large = rson;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (large != i) &#123;</span><br><span class="line">                swap(nums, i, large);</span><br><span class="line">                i = large;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = nums[i];</span><br><span class="line">        nums[i] = nums[j];</span><br><span class="line">        nums[j] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LRU-含测试"><a href="#LRU-含测试" class="headerlink" title="LRU(含测试)"></a>LRU(含测试)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LRU</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">K</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LRU&lt;Object, Object&gt; objectObjectLRU = <span class="keyword">new</span> LRU&lt;&gt;(<span class="number">8</span>);</span><br><span class="line">        objectObjectLRU.put(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">        objectObjectLRU.put(<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">        objectObjectLRU.put(<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">        objectObjectLRU.put(<span class="number">4</span>,<span class="number">4</span>);</span><br><span class="line">        objectObjectLRU.put(<span class="number">5</span>,<span class="number">5</span>);</span><br><span class="line">        System.out.println(objectObjectLRU.get(<span class="number">3</span>));</span><br><span class="line">        objectObjectLRU.put(<span class="number">6</span>,<span class="number">6</span>);</span><br><span class="line">        objectObjectLRU.put(<span class="number">7</span>,<span class="number">7</span>);</span><br><span class="line">        objectObjectLRU.put(<span class="number">8</span>,<span class="number">8</span>);</span><br><span class="line">        objectObjectLRU.put(<span class="number">9</span>,<span class="number">9</span>);</span><br><span class="line">        System.out.println(objectObjectLRU.get(<span class="number">5</span>));</span><br><span class="line">        objectObjectLRU.put(<span class="number">10</span>,<span class="number">10</span>);</span><br><span class="line">        Iterator&lt;Object&gt; iterator = objectObjectLRU.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            System.out.print(iterator.next() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node head;</span><br><span class="line">    <span class="keyword">private</span> Node tail;</span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;K, Node&gt; map;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> maxSize;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">        Node prev;</span><br><span class="line">        Node next;</span><br><span class="line">        K key;</span><br><span class="line">        V value;</span><br><span class="line"></span><br><span class="line">        Node(K key, V value) &#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    LRU(<span class="keyword">int</span> maxSize)&#123;</span><br><span class="line">        <span class="keyword">this</span>.maxSize = maxSize;</span><br><span class="line">        <span class="keyword">this</span>.map = <span class="keyword">new</span> HashMap&lt;&gt;(maxSize * <span class="number">4</span> / <span class="number">3</span>);<span class="comment">//efficiency</span></span><br><span class="line"></span><br><span class="line">        head = <span class="keyword">new</span> Node(<span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">        tail = <span class="keyword">new</span> Node(<span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">        head.next = tail;</span><br><span class="line">        tail.prev = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!map.containsKey(key)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node node = map.get(key);</span><br><span class="line">        unlink(node);</span><br><span class="line">        appendHead(node);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> node.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">        Node node = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(key)) &#123;</span><br><span class="line">            node = map.get(key);</span><br><span class="line">            unlink(node);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        node = <span class="keyword">new</span> Node(key, value);</span><br><span class="line">        <span class="keyword">if</span>(map.size() == maxSize)&#123;</span><br><span class="line">            removeTail();</span><br><span class="line">        &#125;</span><br><span class="line">        appendHead(node);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">appendHead</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        map.put(node.key, node);</span><br><span class="line">        node.prev = head;</span><br><span class="line">        node.next = head.next;</span><br><span class="line">        head.next = node;</span><br><span class="line">        node.next.prev = node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">removeTail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Node node = tail.prev;</span><br><span class="line">        map.remove(node.key);</span><br><span class="line">        tail.prev = node.prev;</span><br><span class="line">        node.prev.next = tail;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">unlink</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        node.prev.next = node.next;</span><br><span class="line">        node.next.prev = node.prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;K&gt; <span class="title">iterator</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Iterator&lt;K&gt;() &#123;</span><br><span class="line">            <span class="keyword">private</span> Node cur = head.next;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> cur != tail;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> K <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Node node = cur;</span><br><span class="line">                cur = cur.next;</span><br><span class="line">                <span class="keyword">return</span> node.key;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="0-1岛屿"><a href="#0-1岛屿" class="headerlink" title="0/1岛屿"></a>0/1岛屿</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numIslands</span><span class="params">(<span class="keyword">char</span>[][] isle)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            1 - 陆地， 0 - 海洋</span></span><br><span class="line"><span class="comment">            [&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;0&quot;],</span></span><br><span class="line"><span class="comment">            [&quot;1&quot;,&quot;1&quot;,&quot;0&quot;,&quot;1&quot;,&quot;0&quot;],</span></span><br><span class="line"><span class="comment">            [&quot;1&quot;,&quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;],</span></span><br><span class="line"><span class="comment">            [&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;]</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">int</span> m = isle.length;</span><br><span class="line">        <span class="keyword">int</span> n = isle[<span class="number">0</span>].length;</span><br><span class="line">        UnionFind unionFind = <span class="keyword">new</span> UnionFind(m * n);</span><br><span class="line">        <span class="keyword">int</span> one = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (isle[i][j] == <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">                    one++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; isle[i][j] == <span class="string">&#x27;1&#x27;</span> &amp;&amp; isle[i - <span class="number">1</span>][j] == <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">                    unionFind.union((i - <span class="number">1</span>) * n + j, i * n + j);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (j &gt; <span class="number">0</span> &amp;&amp; isle[i][j] == <span class="string">&#x27;1&#x27;</span> &amp;&amp; isle[i][j - <span class="number">1</span>] == <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">                    unionFind.union(i * n + j, i * n + j - <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> one - m*n + unionFind.setCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">UnionFind</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] parent;</span><br><span class="line">        <span class="keyword">int</span>[] size;</span><br><span class="line">        <span class="keyword">int</span> setCount;</span><br><span class="line"></span><br><span class="line">        UnionFind(<span class="keyword">int</span> n) &#123;</span><br><span class="line">            parent = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">            size = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">                parent[i] = i;</span><br><span class="line">            &#125;</span><br><span class="line">            setCount = n;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> parent[x] == x ? x : (parent[x] = find(parent[x]));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> nX = find(x);</span><br><span class="line">            <span class="keyword">int</span> nY = find(y);</span><br><span class="line">            <span class="keyword">if</span> (nX == nY) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">if</span> (size[nX] &lt; size[nY]) &#123;</span><br><span class="line">                <span class="keyword">int</span> tmp = nX;</span><br><span class="line">                nX = nY;</span><br><span class="line">                nY = tmp;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            parent[nY] = parent[nX];</span><br><span class="line">            size[nY] += size[nX];</span><br><span class="line">            setCount--;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//isConnect()</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//m * n  0/1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//dfs</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span>[][] direc = <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;-<span class="number">1</span>, <span class="number">0</span>&#125;,&#123;<span class="number">1</span>, <span class="number">0</span>&#125;,&#123;<span class="number">0</span>, -<span class="number">1</span>&#125;,&#123;<span class="number">0</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> m,n;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numIslands</span><span class="params">(<span class="keyword">char</span>[][] isle)</span> </span>&#123;</span><br><span class="line">        m = isle.length;</span><br><span class="line">        n = isle[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;m; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;n; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(isle[i][j] == <span class="string">&#x27;1&#x27;</span>)&#123;</span><br><span class="line">                    dfs(isle, i, j);</span><br><span class="line">                    ans++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">char</span>[][] isle, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">4</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> nx = x + direc[i][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">int</span> ny = y + direc[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(nx &gt;= <span class="number">0</span> &amp;&amp; nx &lt; m &amp;&amp; ny &gt;= <span class="number">0</span> &amp;&amp; ny &lt; n &amp;&amp; isle[nx][ny] == <span class="string">&#x27;1&#x27;</span>)&#123;</span><br><span class="line">                isle[nx][ny] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                dfs(isle, nx, ny);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="IP-地址划分-这个代码真的很漂亮"><a href="#IP-地址划分-这个代码真的很漂亮" class="headerlink" title="IP 地址划分  (这个代码真的很漂亮)"></a>IP 地址划分  (这个代码真的很漂亮)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">restoreIpAddresses</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; addresses = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        StringBuilder tempAddress = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        doRestore(<span class="number">0</span>, tempAddress, addresses, s);</span><br><span class="line">        <span class="keyword">return</span> addresses;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doRestore</span><span class="params">(<span class="keyword">int</span> k, StringBuilder tempAddress, List&lt;String&gt; addresses, Strings)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (k == <span class="number">4</span> || s.length() == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (k == <span class="number">4</span> &amp;&amp; s.length() == <span class="number">0</span>) &#123;</span><br><span class="line">    addresses.add(tempAddress.toString());</span><br><span class="line">    &#125; </span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length() &amp;&amp; i &lt;= <span class="number">2</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i != <span class="number">0</span> &amp;&amp; s.charAt(<span class="number">0</span>) == <span class="string">&#x27;0&#x27;</span>) </span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    String part = s.substring(<span class="number">0</span>, i + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (Integer.valueOf(part) &lt;= <span class="number">255</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (tempAddress.length() != <span class="number">0</span>) &#123;</span><br><span class="line">    part = <span class="string">&quot;.&quot;</span> + part;</span><br><span class="line">    &#125; </span><br><span class="line">        tempAddress.append(part);</span><br><span class="line">    doRestore(k + <span class="number">1</span>, tempAddress, addresses, s.substring(i + <span class="number">1</span>));</span><br><span class="line">    tempAddress.delete(tempAddress.length() - part.length(),tempAddress.length());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//我的，思维不到位，代码增一倍</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    List&lt;String&gt; ans = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">restoreIpAddresses</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        dfs(s, <span class="number">0</span>, <span class="number">0</span>, sb);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(String s, <span class="keyword">int</span> cur, <span class="keyword">int</span> point, StringBuilder sb)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(point == <span class="number">4</span> || cur == s.length())&#123;</span><br><span class="line">            <span class="keyword">if</span>(point == <span class="number">4</span> &amp;&amp; cur == s.length())&#123;</span><br><span class="line">                sb.delete(sb.length() - <span class="number">1</span>, sb.length());</span><br><span class="line">                ans.add(<span class="keyword">new</span> String(sb));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> val = s.charAt(cur) - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        sb.append(s.charAt(cur++));</span><br><span class="line">        <span class="keyword">if</span>(val == <span class="number">0</span>)&#123;</span><br><span class="line">            sb.append(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">            dfs(s, cur, point+<span class="number">1</span>, sb);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">while</span>(val &lt;= <span class="number">255</span> &amp;&amp; cur &lt;= s.length())&#123;</span><br><span class="line">                sb.append(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">                dfs(s, cur, point+<span class="number">1</span>, sb);</span><br><span class="line">                <span class="comment">//backtracking</span></span><br><span class="line">                <span class="keyword">if</span>(cur == s.length())&#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                sb.delete(cur+point, sb.capacity());</span><br><span class="line">                val = val * <span class="number">10</span> + s.charAt(cur) - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                sb.append(s.charAt(cur++));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="字符串的排列-完美双指针"><a href="#字符串的排列-完美双指针" class="headerlink" title="字符串的排列(完美双指针)"></a>字符串的排列(完美双指针)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">给你两个字符串 s1 和 s2 ，写一个函数来判断 s2 是否包含 s1 的排列。</span><br><span class="line"></span><br><span class="line">换句话说，s1 的排列之一是 s2 的 子串 。</span><br><span class="line">    </span><br><span class="line">输入：s1 = <span class="string">&quot;ab&quot;</span> s2 = <span class="string">&quot;eidbaooo&quot;</span></span><br><span class="line">输出：<span class="keyword">true</span></span><br><span class="line">解释：s2 包含 s1 的排列之一 (<span class="string">&quot;ba&quot;</span>).</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">checkInclusion</span><span class="params">(String s1, String s2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s1.length() &gt; s2.length())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] ref = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">26</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;s1.length(); i++)&#123;</span><br><span class="line">            ref[s1.charAt(i) - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(r &lt; s2.length())&#123;</span><br><span class="line">            <span class="keyword">int</span> index = s2.charAt(r) - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            ref[index]--;            </span><br><span class="line">            <span class="keyword">while</span>(ref[index] &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                ref[s2.charAt(l) - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">                l++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(r - l + <span class="number">1</span> == s1.length())&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            r++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="美团笔试括号值"><a href="#美团笔试括号值" class="headerlink" title="美团笔试括号值"></a>美团笔试括号值</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输入一个有效的括号序列</span></span><br><span class="line"><span class="comment">// (x) -&gt; x值+1 (x为有效括号)</span></span><br><span class="line"><span class="comment">// xx  -&gt; x值 * x值</span></span><br><span class="line"><span class="comment">// 结果对 1000_000_007取模</span></span><br><span class="line"><span class="comment">// 如()()()(()) -&gt; 2 * 2 * 2 * 3 = 24;</span></span><br><span class="line"><span class="comment">//## 括号</span></span><br><span class="line"><span class="keyword">package</span> com.zz.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ColvTZzi</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-08-22-10:01</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        String str = scanner.nextLine();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">long</span> val = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> ans = <span class="number">1</span>;</span><br><span class="line">        System.out.println(enter(str));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">enter</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">long</span> val = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> ret = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(cur &lt; str.length())&#123;</span><br><span class="line">            <span class="keyword">if</span>(str.charAt(cur) == <span class="string">&#x27;(&#x27;</span> &amp;&amp; l &lt; <span class="number">1</span>)&#123;</span><br><span class="line">                l++;</span><br><span class="line">                val++;</span><br><span class="line">                cur++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(str.charAt(cur) == <span class="string">&#x27;(&#x27;</span> &amp;&amp; l &gt;= <span class="number">1</span>)&#123;</span><br><span class="line">                val = (val + enter(str) - <span class="number">1</span>) % <span class="number">1000000007</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                l--;</span><br><span class="line">                ret = ret * val % <span class="number">1000000007</span>;</span><br><span class="line">                val = <span class="number">1</span>;</span><br><span class="line">                cur++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(l == <span class="number">0</span> &amp;&amp; cur &lt; str.length() &amp;&amp; str.charAt(cur) == <span class="string">&#x27;)&#x27;</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> ret;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="三向切分快排找第k大"><a href="#三向切分快排找第k大" class="headerlink" title="三向切分快排找第k大"></a>三向切分快排找第k大</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findKthLargest</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        quick3Sort(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>, k - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> nums[k-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//降序</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quick3Sort</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = l, mid = r - <span class="number">1</span>, right = r;</span><br><span class="line">        <span class="keyword">int</span> midian = getMidian(nums, l, l + ((r - l) &gt;&gt; <span class="number">1</span>), r);</span><br><span class="line">        swap(nums, midian, r);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(left &lt;= mid)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] &gt; nums[right])&#123;</span><br><span class="line">                swap(nums, left++, mid);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(nums[mid] == nums[right])&#123;</span><br><span class="line">                mid--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                swap(nums, mid--, right--);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(k &gt; mid &amp;&amp; k &lt;= right)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(k &lt;= mid)&#123;</span><br><span class="line">            quick3Sort(nums, l, mid, k);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            quick3Sort(nums, right + <span class="number">1</span>, r, k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMidian</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x = nums[a], y = nums[b], z = nums[c];</span><br><span class="line">        <span class="keyword">if</span>((x - y) * (x - z) &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> a;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>((y - x) * (y - z) &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> b;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// return z; 你在return尼玛的z呢</span></span><br><span class="line">            <span class="comment">// 变量名啊，变量名啊。</span></span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp = nums[i];</span><br><span class="line">        nums[i] = nums[j];</span><br><span class="line">        nums[j] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//简化后</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findKthLargest</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        quick3Sort(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>, k - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> nums[k-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quick3Sort</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = l, mid = r - <span class="number">1</span>, right = r;</span><br><span class="line">        <span class="keyword">int</span> midian = getMidian(nums, l, l + ((r - l) &gt;&gt; <span class="number">1</span>), r);</span><br><span class="line">        swap(nums, midian, r);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(left &lt;= mid)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] &gt; nums[right])&#123;</span><br><span class="line">                swap(nums, left++, mid);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(nums[mid] == nums[right])&#123;</span><br><span class="line">                mid--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                swap(nums, mid--, right--);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(k &lt;= mid) quick3Sort(nums, l, mid, k);</span><br><span class="line">        <span class="keyword">if</span>(k &gt; right) quick3Sort(nums, right + <span class="number">1</span>, r, k);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMidian</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x = nums[a], y = nums[b], z = nums[c];</span><br><span class="line">        <span class="keyword">if</span>((x - y) * (x - z) &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> a;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>((y - x) * (y - z) &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> b;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp = nums[i];</span><br><span class="line">        nums[i] = nums[j];</span><br><span class="line">        nums[j] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="单调栈（接雨水）"><a href="#单调栈（接雨水）" class="headerlink" title="单调栈（接雨水）"></a>单调栈（接雨水）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>&#123;</span><br><span class="line">        LinkedList&lt;Integer&gt; decStack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> r = <span class="number">0</span>, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(r &lt; height.length)&#123;</span><br><span class="line">            <span class="keyword">while</span>(!decStack.isEmpty() &amp;&amp; height[r] &gt;= height[decStack.peek()])&#123;</span><br><span class="line">                <span class="keyword">int</span> poll = decStack.poll();</span><br><span class="line">                <span class="keyword">if</span>(decStack.isEmpty())&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//核心思想</span></span><br><span class="line">                ans += (Math.min(height[decStack.peek()], height[r]) - height[poll]) * (r - decStack.peek() - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            decStack.push(r);</span><br><span class="line">            r++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="拓扑排序（课程表）"><a href="#拓扑排序（课程表）" class="headerlink" title="拓扑排序（课程表）"></a>拓扑排序（课程表）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canFinish</span><span class="params">(<span class="keyword">int</span> numCourses, <span class="keyword">int</span>[][] prerequisites)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] degrees = <span class="keyword">new</span> <span class="keyword">int</span>[numCourses];</span><br><span class="line">        List&lt;Integer&gt;[] mapping = <span class="keyword">new</span> ArrayList[numCourses];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;prerequisites.length; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> bef = prerequisites[i][<span class="number">1</span>], aft = prerequisites[i][<span class="number">0</span>];</span><br><span class="line">            List&lt;Integer&gt; list = mapping[bef];</span><br><span class="line">            <span class="keyword">if</span>(list == <span class="keyword">null</span>)&#123;</span><br><span class="line">                list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">                mapping[bef] = list;</span><br><span class="line">            &#125;</span><br><span class="line">            list.add(aft);</span><br><span class="line">            degrees[aft]++;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Integer&gt; can = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;numCourses; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(degrees[i] == <span class="number">0</span>)&#123;</span><br><span class="line">                can.add(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> pass = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(!can.isEmpty())&#123;</span><br><span class="line">            pass++;</span><br><span class="line">            <span class="keyword">int</span> poll = can.remove(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span>(mapping[poll] != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(Integer i: mapping[poll])&#123;</span><br><span class="line">                    degrees[i]--;</span><br><span class="line">                    <span class="keyword">if</span>(degrees[i] == <span class="number">0</span>)&#123;</span><br><span class="line">                        can.add(i);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pass == numCourses;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="单调栈（滑动窗口最大值）"><a href="#单调栈（滑动窗口最大值）" class="headerlink" title="单调栈（滑动窗口最大值）"></a>单调栈（滑动窗口最大值）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] maxSlidingWindow(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k) &#123;</span><br><span class="line">        LinkedList&lt;Integer&gt; incStack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> r = <span class="number">0</span>, n = nums.length;</span><br><span class="line">        <span class="keyword">int</span>[] ans = <span class="keyword">new</span> <span class="keyword">int</span>[n - k + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">while</span>(r &lt; n)&#123;</span><br><span class="line">            <span class="keyword">while</span>(!incStack.isEmpty() &amp;&amp; nums[r] &gt; nums[incStack.peek()])&#123;</span><br><span class="line">                incStack.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            incStack.push(r);</span><br><span class="line">            <span class="keyword">if</span>(r - incStack.get(incStack.size() - <span class="number">1</span>) + <span class="number">1</span> &gt; k)&#123;</span><br><span class="line">                incStack.removeLast();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(r + <span class="number">1</span> &gt;= k)&#123;</span><br><span class="line">                ans[r + <span class="number">1</span> - k] = nums[incStack.get(incStack.size() - <span class="number">1</span>)];</span><br><span class="line">            &#125;</span><br><span class="line">            r++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>求滑动窗口最大值优秀思路;</p></li><li><figure class="image-box">                <img src="C:\Users\85700\AppData\Roaming\Typora\typora-user-images\image-20210826090146099.png" alt="image-20210826090146099" title="" class="">                <p>image-20210826090146099</p>            </figure></li><li><p>```java<br>class Solution {</p><pre><code>public int[] maxSlidingWindow(int[] nums, int k) &#123;    int n = nums.length;    int[] prefixMax = new int[n];    int[] suffixMax = new int[n];    for (int i = 0; i &lt; n; ++i) &#123;        if (i % k == 0) &#123;            prefixMax[i] = nums[i];        &#125;        else &#123;            prefixMax[i] = Math.max(prefixMax[i - 1], nums[i]);        &#125;    &#125;    for (int i = n - 1; i &gt;= 0; --i) &#123;        if (i == n - 1 || (i + 1) % k == 0) &#123;            suffixMax[i] = nums[i];        &#125; else &#123;            suffixMax[i] = Math.max(suffixMax[i + 1], nums[i]);        &#125;    &#125;    int[] ans = new int[n - k + 1];    for (int i = 0; i &lt;= n - k; ++i) &#123;        ans[i] = Math.max(suffixMax[i], prefixMax[i + k - 1]);    &#125;    return ans;&#125;</code></pre><p>}</p><p>作者：LeetCode-Solution<br>链接：<a href="https://leetcode-cn.com/problems/sliding-window-maximum/solution/hua-dong-chuang-kou-zui-da-zhi-by-leetco-ki6m/">https://leetcode-cn.com/problems/sliding-window-maximum/solution/hua-dong-chuang-kou-zui-da-zhi-by-leetco-ki6m/</a><br>来源：力扣（LeetCode）<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 区域和检索（数组可修改）【线段树】</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">class NumArray &#123;</span><br><span class="line">    int[] tree;</span><br><span class="line">    int n;</span><br><span class="line">    public NumArray(int[] nums) &#123;</span><br><span class="line">        this.n = nums.length;</span><br><span class="line">        tree = new int[2 * n];</span><br><span class="line">        for(int i = n; i&lt;tree.length; i++)&#123;</span><br><span class="line">            tree[i] = nums[i - n];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //build tree</span><br><span class="line">        for(int i = n - 1; i&gt;=1; i--)&#123;</span><br><span class="line">            tree[i] = tree[2 * i] + tree[2 * i + 1];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void update(int index, int val) &#123;</span><br><span class="line">        int inc = val - tree[index + n];</span><br><span class="line">        int pos = index + n;</span><br><span class="line">        while(pos &gt; 0)&#123;</span><br><span class="line">            tree[pos] += inc;</span><br><span class="line">            pos &gt;&gt;= 1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public int sumRange(int left, int right) &#123;</span><br><span class="line">        int l = left + n, r = right + n;</span><br><span class="line">        int ret = 0;</span><br><span class="line">        while(l &lt;= r)&#123;</span><br><span class="line">            if(l % 2 == 1)&#123;</span><br><span class="line">                ret += tree[l];</span><br><span class="line">            &#125;</span><br><span class="line">            if(r % 2 == 0)&#123;</span><br><span class="line">                ret += tree[r];</span><br><span class="line">            &#125;</span><br><span class="line">            l = (l + 1) &gt;&gt; 1;</span><br><span class="line">            r = (r - 1) &gt;&gt; 1;</span><br><span class="line">        &#125;</span><br><span class="line">        return ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Your NumArray object will be instantiated and called as such:</span><br><span class="line"> * NumArray obj = new NumArray(nums);</span><br><span class="line"> * obj.update(index,val);</span><br><span class="line"> * int param_2 = obj.sumRange(left,right);</span><br><span class="line"> */</span><br></pre></td></tr></table></figure></li></ul><h2 id="合并K个升序链表【分而治之】"><a href="#合并K个升序链表【分而治之】" class="headerlink" title="合并K个升序链表【分而治之】"></a><a href="https://leetcode-cn.com/problems/merge-k-sorted-lists/">合并K个升序链表</a>【分而治之】</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeKLists</span><span class="params">(ListNode[] lists)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(lists == <span class="keyword">null</span> || lists.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> merge(lists, <span class="number">0</span>, lists.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">merge</span><span class="params">(ListNode[] lists, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">            <span class="keyword">return</span> lists[l];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> mid = l + ((r - l) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> merge2Lists(merge(lists, l, mid), merge(lists, mid + <span class="number">1</span>, r));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">merge2Lists</span><span class="params">(ListNode l1, ListNode l2)</span></span>&#123;</span><br><span class="line">        ListNode dummyHead = <span class="keyword">new</span> ListNode(), cur = dummyHead;</span><br><span class="line">        <span class="keyword">while</span>(l1 != <span class="keyword">null</span> &amp;&amp; l2 != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(l1.val &lt; l2.val)&#123;</span><br><span class="line">                cur.next = l1;</span><br><span class="line">                l1 = l1.next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                cur.next = l2;</span><br><span class="line">                l2 = l2.next;</span><br><span class="line">            &#125;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        cur.next = l1 == <span class="keyword">null</span>? l2: l1;</span><br><span class="line">        <span class="keyword">return</span> dummyHead.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//优先队列</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeKLists</span><span class="params">(ListNode[] lists)</span> </span>&#123;</span><br><span class="line">        PriorityQueue&lt;ListNode&gt; q = <span class="keyword">new</span> PriorityQueue&lt;&gt;((o1, o2) -&gt; o1.val - o2.val);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;lists.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(lists[i] != <span class="keyword">null</span>)&#123;</span><br><span class="line">                q.add(lists[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode dummy = <span class="keyword">new</span> ListNode(), pre = dummy;</span><br><span class="line">        <span class="keyword">while</span>(!q.isEmpty())&#123;</span><br><span class="line">            ListNode poll = q.poll();</span><br><span class="line">            <span class="keyword">if</span>(poll.next != <span class="keyword">null</span>)&#123;</span><br><span class="line">                q.add(poll.next);</span><br><span class="line">            &#125;</span><br><span class="line">            pre.next = poll;</span><br><span class="line">            pre = poll;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="天际线问题-想了好久，很有成就感"><a href="#天际线问题-想了好久，很有成就感" class="headerlink" title="天际线问题(想了好久，很有成就感)"></a>天际线问题(想了好久，很有成就感)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> List&lt;List&lt;Integer&gt;&gt; getSkyline(<span class="keyword">int</span>[][] buildings) &#123;</span><br><span class="line">        <span class="comment">//先离散化</span></span><br><span class="line">        <span class="keyword">int</span> n = buildings.length;</span><br><span class="line">        <span class="keyword">int</span>[] mapping = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span> * n];</span><br><span class="line">        <span class="keyword">int</span> initial = -<span class="number">2</span>;</span><br><span class="line">        Map&lt;Integer, Integer&gt; hashMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            mapping[<span class="number">2</span> * i] = buildings[i][<span class="number">0</span>];</span><br><span class="line">            mapping[<span class="number">2</span> * i + <span class="number">1</span>] = buildings[i][<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        Arrays.sort(mapping);</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>;</span><br><span class="line">        Map&lt;Integer, Integer&gt; reverse = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span>(l &lt; <span class="number">2</span> * n)&#123;</span><br><span class="line">            hashMap.put(mapping[l], hashMap.getOrDefault(mapping[l], initial = initial + <span class="number">2</span>));</span><br><span class="line">            reverse.put(initial, mapping[l]);</span><br><span class="line">            l++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] maxArr = <span class="keyword">new</span> <span class="keyword">int</span>[initial + <span class="number">2</span>];</span><br><span class="line">        <span class="comment">// int rMax = buildings[0][1], cur = 0;</span></span><br><span class="line">        <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(cur &lt; n)&#123;</span><br><span class="line">            <span class="comment">// if(buildings[cur][0] &gt; rMax)&#123;</span></span><br><span class="line">            <span class="comment">// maxArr[hashMap.get(rMax) + 1] = -1;</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//小于还是小于等于</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = hashMap.get(buildings[cur][<span class="number">0</span>]); i&lt;hashMap.get(buildings[cur][<span class="number">1</span>]); i++)&#123;</span><br><span class="line">                maxArr[i] = Math.max(maxArr[i], buildings[cur][<span class="number">2</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            cur++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; ans = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="comment">//        list.add(reverse.get(0), maxArr[0]);</span></span><br><span class="line">        list.add(reverse.get(<span class="number">0</span>));</span><br><span class="line">        list.add(maxArr[<span class="number">0</span>]);</span><br><span class="line">        ans.add(<span class="keyword">new</span> ArrayList&lt;&gt;(list));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;initial + <span class="number">2</span>; i++)&#123;</span><br><span class="line">            list.clear();</span><br><span class="line">            <span class="keyword">if</span>(maxArr[i] &gt; maxArr[i-<span class="number">1</span>])&#123;</span><br><span class="line"><span class="comment">//                list.add(reverse.get(i), maxArr[i]);</span></span><br><span class="line">                list.add(reverse.get(i));</span><br><span class="line">                list.add(maxArr[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(maxArr[i] &lt; maxArr[i-<span class="number">1</span>])&#123;</span><br><span class="line"><span class="comment">//                list.add(reverse.get(i-1), maxArr[i]);</span></span><br><span class="line"><span class="comment">//                list.add(reverse.get(i-1));</span></span><br><span class="line">                list.add(reverse.get(i));</span><br><span class="line">                list.add(maxArr[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment">//            ans.add(list);</span></span><br><span class="line">            ans.add(<span class="keyword">new</span> ArrayList&lt;&gt;(list));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// public class SegmentTree&#123;</span></span><br><span class="line">    <span class="comment">// int[] tree;</span></span><br><span class="line">    <span class="comment">// int n;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">    <span class="comment">// public SegmentTree(int n)&#123;</span></span><br><span class="line">    <span class="comment">// tree[2 * n]</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//标解：</span></span><br><span class="line">准备阿里面试去了</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; getSkyline(<span class="keyword">int</span>[][] buildings) &#123;</span><br><span class="line">        PriorityQueue&lt;<span class="keyword">int</span>[]&gt; pq = <span class="keyword">new</span> PriorityQueue&lt;<span class="keyword">int</span>[]&gt;((a, b) -&gt; b[<span class="number">1</span>] - a[<span class="number">1</span>]);</span><br><span class="line">        List&lt;Integer&gt; boundaries = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>[] building : buildings) &#123;</span><br><span class="line">            boundaries.add(building[<span class="number">0</span>]);</span><br><span class="line">            boundaries.add(building[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        Collections.sort(boundaries);</span><br><span class="line"></span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; ret = <span class="keyword">new</span> ArrayList&lt;List&lt;Integer&gt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> n = buildings.length, idx = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> boundary : boundaries) &#123;</span><br><span class="line">            <span class="keyword">while</span> (idx &lt; n &amp;&amp; buildings[idx][<span class="number">0</span>] &lt;= boundary) &#123;</span><br><span class="line">                pq.offer(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;buildings[idx][<span class="number">1</span>], buildings[idx][<span class="number">2</span>]&#125;);</span><br><span class="line">                idx++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (!pq.isEmpty() &amp;&amp; pq.peek()[<span class="number">0</span>] &lt;= boundary) &#123;</span><br><span class="line">                pq.poll();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> maxn = pq.isEmpty() ? <span class="number">0</span> : pq.peek()[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (ret.size() == <span class="number">0</span> || maxn != ret.get(ret.size() - <span class="number">1</span>).get(<span class="number">1</span>)) &#123;</span><br><span class="line">                ret.add(Arrays.asList(boundary, maxn));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">作者：LeetCode-Solution</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/the-skyline-problem/solution/tian-ji-xian-wen-ti-by-leetcode-solution-ozse/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br><span class="line">    </span><br><span class="line"><span class="comment">//无脑上线段树，区间操作+单点查询+离散化，复杂度 O(nlogn)。</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SegmentTree</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    struct node &#123;</span><br><span class="line">        <span class="keyword">int</span> tag;</span><br><span class="line">        <span class="keyword">int</span> val;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    using node_ptr = node*;</span><br><span class="line">    node_ptr prefix, suffix;</span><br><span class="line"></span><br><span class="line">    <span class="function">inline <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    SegmentTree(size_t n) : prefix(<span class="keyword">new</span> node[<span class="number">2</span> * n]), suffix(prefix + n) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">inline size_t <span class="title">size</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> suffix - prefix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">inline <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> d, size_t s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> n = size();</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> i = p + lowbit(s);</span><br><span class="line">        <span class="keyword">int</span> j = p - lowbit(s);</span><br><span class="line">        <span class="keyword">for</span> (;i &lt;= n;i += lowbit(i))</span><br><span class="line">            prefix[i].val = max(prefix[i].val, d);</span><br><span class="line">        <span class="keyword">for</span> (i -= lowbit(i);j &gt; i;j -= lowbit(j))</span><br><span class="line">            suffix[j].val = max(suffix[j].val, d);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">inline <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> n = size();</span><br><span class="line">        <span class="keyword">int</span> i = l, j = r;</span><br><span class="line">        <span class="keyword">if</span> (l &gt; <span class="number">0</span>) <span class="keyword">for</span> (;i + lowbit(i) &lt;= r;i += lowbit(i)) &#123;</span><br><span class="line">            suffix[i].val = max(suffix[i].val, d);</span><br><span class="line">            suffix[i].tag = max(suffix[i].tag, d);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (;j &gt; i;j -= lowbit(j)) &#123;</span><br><span class="line">            prefix[j].val = max(prefix[j].val, d);</span><br><span class="line">            prefix[j].tag = max(prefix[j].tag, d);</span><br><span class="line">        &#125;</span><br><span class="line">        pushup(l, d, i - l);</span><br><span class="line">        pushup(r, d, r - i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">inline <span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> p)</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> n = size();</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = p + <span class="number">1</span>;i &lt;= n;i += lowbit(i))</span><br><span class="line">            ans = max(ans, prefix[i].tag);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = p;i &gt; <span class="number">0</span>;i -= lowbit(i))</span><br><span class="line">            ans = max(ans, suffix[i].tag);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; getSkyline(vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt;&amp; buildings) &#123;</span><br><span class="line">        vector&lt;<span class="keyword">int</span>&gt; order;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> auto&amp; e : buildings) &#123;</span><br><span class="line">            order.push_back(e[<span class="number">0</span>]);</span><br><span class="line">            order.push_back(e[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        auto first = order.begin();</span><br><span class="line">        auto last = order.end();</span><br><span class="line">        sort(first, last);</span><br><span class="line">        last = order.erase(unique(first, last), last);</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> n = order.size();</span><br><span class="line">        <span class="function">SegmentTree <span class="title">tree</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> auto&amp; e : buildings) &#123;</span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">int</span> l = lower_bound(first, last, e[<span class="number">0</span>]) - first;</span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">int</span> r = lower_bound(first, last, e[<span class="number">1</span>]) - first;</span><br><span class="line">            tree.update(l, r, e[<span class="number">2</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> prev = <span class="number">0</span>;</span><br><span class="line">        vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; ans;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; n;++i) &#123;</span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">int</span> cur = tree.query(i);</span><br><span class="line">            <span class="keyword">if</span> (cur != prev) ans.push_back(&#123;order[i], prev = cur&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="最小体力消耗路径-dfs-二分"><a href="#最小体力消耗路径-dfs-二分" class="headerlink" title="最小体力消耗路径(dfs+二分)"></a>最小体力消耗路径(dfs+二分)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minimumEffortPath</span><span class="params">(<span class="keyword">int</span>[][] heights)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = heights.length;</span><br><span class="line">        <span class="keyword">int</span> n = heights[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="number">1000000</span>, mid = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span>[][] direc = <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;-<span class="number">1</span>, <span class="number">0</span>&#125;,&#123;<span class="number">1</span>, <span class="number">0</span>&#125;,&#123;<span class="number">0</span>, -<span class="number">1</span>&#125;,&#123;<span class="number">0</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line">        Queue&lt;<span class="keyword">int</span>[]&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span>[] poll = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> nx = <span class="number">0</span>, ny = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">            queue.clear();</span><br><span class="line">            <span class="keyword">boolean</span>[][] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[m][n];<span class="comment">//可以采取一维数组，是不是更好？</span></span><br><span class="line">            visited[<span class="number">0</span>][<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">            mid = l + ((r - l) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">            queue.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">0</span>, <span class="number">0</span>&#125;);</span><br><span class="line">            <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">                poll = queue.poll();</span><br><span class="line">                x = poll[<span class="number">0</span>];</span><br><span class="line">                y = poll[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">4</span>; i++)&#123;</span><br><span class="line">                    nx = x + direc[i][<span class="number">0</span>];</span><br><span class="line">                    ny = y + direc[i][<span class="number">1</span>];</span><br><span class="line">                    <span class="comment">//== false 可以改为 !visited[nx][ny]</span></span><br><span class="line">                    <span class="keyword">if</span>(nx &gt;= <span class="number">0</span> &amp;&amp; nx &lt; m &amp;&amp; ny &gt;= <span class="number">0</span> &amp;&amp; ny &lt; n &amp;&amp; Math.abs(heights[nx][ny] - heights[x][y]) &lt;= mid &amp;&amp; visited[nx][ny] == <span class="keyword">false</span>)&#123;</span><br><span class="line">                        queue.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;nx, ny&#125;);</span><br><span class="line">                        visited[nx][ny] = <span class="keyword">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//boolean类型就不用==判断了</span></span><br><span class="line">            <span class="keyword">if</span>(visited[m-<span class="number">1</span>][n-<span class="number">1</span>] == <span class="keyword">true</span>)&#123;</span><br><span class="line">                r = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                l = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二叉搜索树的后序遍历序列（递归分治-单调栈，清晰图解）"><a href="#二叉搜索树的后序遍历序列（递归分治-单调栈，清晰图解）" class="headerlink" title="二叉搜索树的后序遍历序列（递归分治 / 单调栈，清晰图解）"></a>二叉搜索树的后序遍历序列（递归分治 / 单调栈，清晰图解）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verifyPostorder</span><span class="params">(<span class="keyword">int</span>[] postorder)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//大小 左&lt;中&lt;右 后续遍历 中 后于 右 后于 左  倒过来建树，从根开始</span></span><br><span class="line">        <span class="keyword">return</span> verifySubTree(postorder, <span class="number">0</span>, postorder.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verifySubTree</span><span class="params">(<span class="keyword">int</span>[] postorder, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l &gt; r)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> v = postorder[r];</span><br><span class="line">        <span class="keyword">int</span> bound = r - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(bound &gt;= l &amp;&amp; postorder[bound] &gt;= v)&#123;</span><br><span class="line">            bound--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = l; i&lt;= bound; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(postorder[i] &gt; v)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> verifySubTree(postorder, l, bound) &amp;&amp; verifySubTree(postorder, bound + <span class="number">1</span>, r - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//题解1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verifyPostorder</span><span class="params">(<span class="keyword">int</span>[] postorder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> recur(postorder, <span class="number">0</span>, postorder.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">recur</span><span class="params">(<span class="keyword">int</span>[] postorder, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i &gt;= j) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">int</span> p = i;</span><br><span class="line">        <span class="keyword">while</span>(postorder[p] &lt; postorder[j]) p++;</span><br><span class="line">        <span class="keyword">int</span> m = p;</span><br><span class="line">        <span class="keyword">while</span>(postorder[p] &gt; postorder[j]) p++;</span><br><span class="line">        <span class="keyword">return</span> p == j &amp;&amp; recur(postorder, i, m - <span class="number">1</span>) &amp;&amp; recur(postorder, m, j - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">作者：jyd</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/er-cha-sou-suo-shu-de-hou-xu-bian-li-xu-lie-lcof/solution/mian-shi-ti-33-er-cha-sou-suo-shu-de-hou-xu-bian-6/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br><span class="line">    </span><br><span class="line"><span class="comment">//题解2</span></span><br><span class="line"><span class="comment">//后序遍历倒序： [ 根节点 | 右子树 | 左子树 ] 。类似 先序遍历的镜像 ，即先序遍历为 “根、左、右” 的顺序，而后序遍历的倒序为 “根、右、左” 顺序。</span></span><br><span class="line"><span class="comment">//时间复杂度 O(N) ： 遍历 postorder 所有节点，各节点均入栈 / 出栈一次，使用 O(N) 时间。</span></span><br><span class="line"><span class="comment">//空间复杂度 O(N) ： 最差情况下，单调栈 stack 存储所有节点，使用 O(N) 额外空间。</span></span><br><span class="line"></span><br><span class="line">作者：jyd</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/er-cha-sou-suo-shu-de-hou-xu-bian-li-xu-lie-lcof/solution/mian-shi-ti-33-er-cha-sou-suo-shu-de-hou-xu-bian-6/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verifyPostorder</span><span class="params">(<span class="keyword">int</span>[] postorder)</span> </span>&#123;</span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> root = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = postorder.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span>(postorder[i] &gt; root) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; stack.peek() &gt; postorder[i])</span><br><span class="line">            root = stack.pop();</span><br><span class="line">            stack.add(postorder[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">作者：jyd</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/er-cha-sou-suo-shu-de-hou-xu-bian-li-xu-lie-lcof/solution/mian-shi-ti-33-er-cha-sou-suo-shu-de-hou-xu-bian-6/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure><h2 id="二叉树的后序遍历"><a href="#二叉树的后序遍历" class="headerlink" title="二叉树的后序遍历"></a>二叉树的后序遍历</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    LinkedList&lt;Integer&gt; ans = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">postorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;</span><br><span class="line">        LinkedList&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        stack.addLast(root);</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty())&#123;</span><br><span class="line">            TreeNode poll = stack.removeLast();</span><br><span class="line">            ans.addFirst(poll.val);</span><br><span class="line">            <span class="keyword">if</span>(poll.left != <span class="keyword">null</span>)&#123;</span><br><span class="line">                stack.addLast(poll.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(poll.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">                stack.addLast(poll.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二叉树的中序遍历"><a href="#二叉树的中序遍历" class="headerlink" title="二叉树的中序遍历"></a>二叉树的中序遍历</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">inorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; ans = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;</span><br><span class="line">        LinkedList&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span>(root != <span class="keyword">null</span>)&#123;</span><br><span class="line">            stack.addLast(root);</span><br><span class="line">            root = root.left;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty())&#123;</span><br><span class="line">            TreeNode poll = stack.removeLast();</span><br><span class="line">            ans.add(poll.val);</span><br><span class="line">            TreeNode rSon = poll.right;</span><br><span class="line">            <span class="keyword">while</span>(rSon != <span class="keyword">null</span>)&#123;</span><br><span class="line">                stack.addLast(rSon);</span><br><span class="line">                rSon = rSon.left;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//看看题解</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">inorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        Deque&lt;TreeNode&gt; stk = <span class="keyword">new</span> LinkedList&lt;TreeNode&gt;();</span><br><span class="line">        <span class="keyword">while</span> (root != <span class="keyword">null</span> || !stk.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">while</span> (root != <span class="keyword">null</span>) &#123;</span><br><span class="line">                stk.push(root);</span><br><span class="line">                root = root.left;</span><br><span class="line">            &#125;</span><br><span class="line">            root = stk.pop();</span><br><span class="line">            res.add(root.val);</span><br><span class="line">            root = root.right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">作者：LeetCode-Solution</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/binary-tree-inorder-traversal/solution/er-cha-shu-de-zhong-xu-bian-li-by-leetcode-solutio/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br><span class="line">    </span><br><span class="line"><span class="comment">//Morris中序遍历 时间复杂度（2n） 空间复杂度（1）</span></span><br></pre></td></tr></table></figure><h2 id="从根节点到叶子节点的路径之和"><a href="#从根节点到叶子节点的路径之和" class="headerlink" title="从根节点到叶子节点的路径之和"></a>从根节点到叶子节点的路径之和</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sumNumbers</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        dfs(root);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(TreeNode root)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        num = num * <span class="number">10</span> + root.val;</span><br><span class="line">        <span class="keyword">if</span>(root.left == <span class="keyword">null</span> &amp;&amp; root.right == <span class="keyword">null</span>)&#123;</span><br><span class="line">            ans += num;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        dfs(root.left);</span><br><span class="line">        dfs(root.right);</span><br><span class="line">        num = num / <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="分割等和子集"><a href="#分割等和子集" class="headerlink" title="分割等和子集"></a>分割等和子集</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Np完全问题 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canPartition</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//递归的算法复杂度可以思考一下下</span></span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            sum += nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(sum % <span class="number">2</span> == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">boolean</span>[] subSetSum = <span class="keyword">new</span> <span class="keyword">boolean</span>[sum / <span class="number">2</span>];</span><br><span class="line">        subSetSum[<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = sum/<span class="number">2</span> - <span class="number">1</span>; j&gt;=<span class="number">0</span>; j--)&#123;</span><br><span class="line">                <span class="keyword">if</span>(subSetSum[j] == <span class="keyword">true</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(j + nums[i] == sum / <span class="number">2</span>)&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(j + nums[i] &lt; sum / <span class="number">2</span>)&#123;</span><br><span class="line">                        subSetSum[j + nums[i]] = <span class="keyword">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="搜索旋转数组-可行空间二分"><a href="#搜索旋转数组-可行空间二分" class="headerlink" title="搜索旋转数组(可行空间二分)"></a>搜索旋转数组(可行空间二分)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>, r = nums.length - <span class="number">1</span>, mid = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">            mid = l + ((r - l) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] == target)&#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(nums[l] &lt;= nums[mid])&#123;</span><br><span class="line">                <span class="keyword">if</span>(target &gt;= nums[l] &amp;&amp; target &lt; nums[mid])&#123;</span><br><span class="line">                    r = mid - <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    l = mid + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(target &gt; nums[mid] &amp;&amp; target &lt;= nums[r])&#123;</span><br><span class="line">                    l = mid + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    r = mid - <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="搜索旋转排序数组II"><a href="#搜索旋转排序数组II" class="headerlink" title="搜索旋转排序数组II"></a>搜索旋转排序数组II</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数字可重复</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> extra(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>, target);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">extra</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">            mid = l + ((r - l) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(nums[mid] == target)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(nums[l] &lt; nums[mid])&#123;</span><br><span class="line">                <span class="keyword">if</span>(target &gt;= nums[l] &amp;&amp; target &lt; nums[mid])&#123;</span><br><span class="line">                    r = mid - <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    l = mid + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(nums[mid] &lt; nums[r])&#123;</span><br><span class="line">                <span class="keyword">if</span>(target &gt; nums[mid] &amp;&amp; target &lt;= nums[r])&#123;</span><br><span class="line">                    l = mid + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    r = mid - <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> extra(nums, l, mid - <span class="number">1</span>, target) || extra(nums, mid + <span class="number">1</span>, r, target);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//标答</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">bool <span class="title">search</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt; &amp;nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>] == target;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>, r = n - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] == target) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (nums[l] == nums[mid] &amp;&amp; nums[mid] == nums[r]) &#123;</span><br><span class="line">                ++l;</span><br><span class="line">                --r;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[l] &lt;= nums[mid]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[l] &lt;= target &amp;&amp; target &lt; nums[mid]) &#123;</span><br><span class="line">                    r = mid - <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    l = mid + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[mid] &lt; target &amp;&amp; target &lt;= nums[n - <span class="number">1</span>]) &#123;</span><br><span class="line">                    l = mid + <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    r = mid - <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="矩阵中的最长递增路径"><a href="#矩阵中的最长递增路径" class="headerlink" title="矩阵中的最长递增路径"></a>矩阵中的最长递增路径</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> nx = <span class="number">0</span>, ny = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span>[][] direc = <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;-<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line">    <span class="keyword">int</span>[][] visited;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestIncreasingPath</span><span class="params">(<span class="keyword">int</span>[][] matrix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = matrix.length;</span><br><span class="line">        <span class="keyword">int</span> n = matrix[<span class="number">0</span>].length;</span><br><span class="line">        visited = <span class="keyword">new</span> <span class="keyword">int</span>[m][n];</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;m; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;n; j++)&#123;</span><br><span class="line">                dfs(matrix, m, n, i, j);</span><br><span class="line">                ans = Math.max(ans, visited[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span>[][] matrix, <span class="keyword">int</span> m, <span class="keyword">int</span> n, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(visited[x][y] != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> visited[x][y];</span><br><span class="line">        &#125;</span><br><span class="line">        visited[x][y] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">4</span>; i++)&#123;</span><br><span class="line">            nx = x + direc[i][<span class="number">0</span>];</span><br><span class="line">            ny = y + direc[i][<span class="number">1</span>];</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(nx &gt;= <span class="number">0</span> &amp;&amp; nx &lt; m &amp;&amp; ny &gt;= <span class="number">0</span> &amp;&amp; ny &lt; n &amp;&amp; matrix[x][y] &lt; matrix[nx][ny])&#123;</span><br><span class="line">                visited[x][y] = Math.max(visited[x][y], <span class="number">1</span> + dfs(matrix, m, n, nx, ny));</span><br><span class="line">            &#125;            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> visited[x][y];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="无重复字符的最长子串-滑动窗口"><a href="#无重复字符的最长子串-滑动窗口" class="headerlink" title="无重复字符的最长子串(滑动窗口)"></a>无重复字符的最长子串(滑动窗口)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] letter = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">128</span>];</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(r &lt; s.length())&#123;</span><br><span class="line">            <span class="keyword">int</span> c = s.charAt(r);</span><br><span class="line">            <span class="keyword">while</span>(letter[c] &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                letter[(s.charAt(l))]--;</span><br><span class="line">                l++;</span><br><span class="line">            &#125;</span><br><span class="line">            letter[c]++;</span><br><span class="line">            <span class="keyword">if</span>(r - l + <span class="number">1</span> &gt; ans)&#123;</span><br><span class="line">                ans = r - l + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            r++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="括号生成"><a href="#括号生成" class="headerlink" title="括号生成"></a>括号生成</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    List&lt;String&gt; ans = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">generateParenthesis</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        dfs(n, <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">new</span> StringBuilder());</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> l, <span class="keyword">int</span> r, StringBuilder sb)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(r == n)&#123;</span><br><span class="line">            ans.add(sb.toString());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(l &lt; n)&#123;</span><br><span class="line">            sb.append(<span class="string">&#x27;(&#x27;</span>);</span><br><span class="line">            dfs(n, l+<span class="number">1</span>, r, sb);</span><br><span class="line">            sb.deleteCharAt(sb.length() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(l &gt; r)&#123;</span><br><span class="line">            sb.append(<span class="string">&#x27;)&#x27;</span>);</span><br><span class="line">            dfs(n, l, r+<span class="number">1</span>, sb);</span><br><span class="line">            sb.deleteCharAt(sb.length() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="最长递增子序列"><a href="#最长递增子序列" class="headerlink" title="最长递增子序列"></a>最长递增子序列</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">## K个一组反转链表</span><br><span class="line"></span><br><span class="line">```java</span><br></pre></td></tr></table></figure><h2 id="直方图最大矩形面积"><a href="#直方图最大矩形面积" class="headerlink" title="直方图最大矩形面积"></a>直方图最大矩形面积</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">largestRectangleArea</span><span class="params">(<span class="keyword">int</span>[] heights)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l = heights.length;</span><br><span class="line">        <span class="keyword">int</span>[] lBound = <span class="keyword">new</span> <span class="keyword">int</span>[l];</span><br><span class="line">        <span class="keyword">int</span>[] rBound = <span class="keyword">new</span> <span class="keyword">int</span>[l];</span><br><span class="line">        LinkedList&lt;Integer&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; i++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; heights[stack.peek()] &gt;= heights[i]) &#123;</span><br><span class="line">                stack.pop();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (stack.isEmpty()) &#123;</span><br><span class="line">                lBound[i] = -<span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                lBound[i] = stack.peek();</span><br><span class="line">            &#125;</span><br><span class="line">            stack.push(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        stack.clear();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = l - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; heights[stack.peek()] &gt;= heights[i]) &#123;</span><br><span class="line">                stack.pop();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (stack.isEmpty()) &#123;</span><br><span class="line">                rBound[i] = l;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                rBound[i] = stack.peek();</span><br><span class="line">            &#125;</span><br><span class="line">            stack.push(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; i++) &#123;</span><br><span class="line">            max = Math.max(max, (rBound[i] - lBound[i] - <span class="number">1</span>) * heights[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//标答</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">largestRectangleArea</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; heights)</span> </span>&#123;</span><br><span class="line">        stack&lt;<span class="keyword">int</span>&gt; sta;</span><br><span class="line">        sta.push(-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> maxArea = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; heights.size(); ++i) &#123;</span><br><span class="line">            <span class="keyword">while</span> (sta.top() != -<span class="number">1</span> &amp;&amp; heights[sta.top()] &gt;= heights[i]) &#123;</span><br><span class="line">                <span class="keyword">int</span> height = heights[sta.top()];</span><br><span class="line">                sta.pop();</span><br><span class="line">                <span class="keyword">int</span> width = i - sta.top() - <span class="number">1</span>;</span><br><span class="line">                maxArea = max(maxArea, height * width);</span><br><span class="line">            &#125;</span><br><span class="line">            sta.push(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (sta.top() != -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> height = heights[sta.top()];</span><br><span class="line">            sta.pop();</span><br><span class="line">            <span class="keyword">int</span> width = heights.size() - sta.top() - <span class="number">1</span>;</span><br><span class="line">            maxArea = max(maxArea, height * width);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxArea;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">作者：master_xue</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/0ynMMM/solution/jian-zhi-offer-2-mian-shi-ti-39-shu-zhon-qzaw/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure><h2 id="k个一组反转链表-自己优化思路，重在设计"><a href="#k个一组反转链表-自己优化思路，重在设计" class="headerlink" title="k个一组反转链表(自己优化思路，重在设计)"></a>k个一组反转链表(自己优化思路，重在设计)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseKGroup</span><span class="params">(ListNode head, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(k == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode pre = <span class="keyword">null</span>, cur = head, dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>, head);</span><br><span class="line">        ListNode end = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span>(cur != <span class="keyword">null</span>)&#123;</span><br><span class="line">            ListNode curHead = cur;</span><br><span class="line">            end = cur;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;k; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(cur == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                cur = cur.next;</span><br><span class="line">            &#125;            </span><br><span class="line">            <span class="keyword">if</span>(cur == <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ListNode curNext = cur.next;</span><br><span class="line">            ListNode next = curHead.next;</span><br><span class="line">            <span class="keyword">while</span>(next != cur)&#123;</span><br><span class="line">                ListNode tmp = next.next;</span><br><span class="line">                next.next = curHead;</span><br><span class="line">                curHead = next;</span><br><span class="line">                next = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">            cur.next = curHead;</span><br><span class="line">            <span class="keyword">if</span>(dummy.next == head)&#123;</span><br><span class="line">                dummy.next = cur;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(pre == <span class="keyword">null</span>)&#123;</span><br><span class="line">                pre = end;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                pre.next = cur;</span><br><span class="line">                pre = end;</span><br><span class="line">            &#125;</span><br><span class="line">            cur = curNext;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(pre != end)&#123;</span><br><span class="line">            pre.next = end;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            pre.next = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="数组中两个数的最大异或值"><a href="#数组中两个数的最大异或值" class="headerlink" title="数组中两个数的最大异或值"></a>数组中两个数的最大异或值</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findMaximumXOR</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//理想最大值</span></span><br><span class="line">        <span class="comment">//限制思维的主要地方就是， O(n)只能代表渐进上线c*n;</span></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> mask = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">30</span>; i &gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">            mask = mask + (<span class="number">1</span> &lt;&lt; i);</span><br><span class="line"></span><br><span class="line">            HashSet&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; nums.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((nums[j] &amp; (<span class="number">1</span> &lt;&lt; i)) == <span class="number">1</span> &lt;&lt; i) &#123;</span><br><span class="line">                    set.add(nums[j] &amp; mask);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> bestMax = ans + (<span class="number">1</span> &lt;&lt; i);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; nums.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (set.contains((bestMax ^ nums[j]) &amp; mask)) &#123;</span><br><span class="line">                    ans = bestMax;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//标答</span></span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 先确定高位，再确定低位（有点贪心算法的意思），才能保证这道题的最大性质</span></span><br><span class="line">    <span class="comment">// 一位接着一位去确定这个数位的大小</span></span><br><span class="line">    <span class="comment">// 利用性质： a ^ b = c ，则 a ^ c = b，且 b ^ c = a</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findMaximumXOR</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> mask = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">30</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">// 注意点1：注意保留前缀的方法，mask 是这样得来的</span></span><br><span class="line">            <span class="comment">// 用异或也是可以的 mask = mask ^ (1 &lt;&lt; i);</span></span><br><span class="line">            mask = mask | (<span class="number">1</span> &lt;&lt; i);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// System.out.println(Integer.toBinaryString(mask));</span></span><br><span class="line">            Set&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> num : nums) &#123;</span><br><span class="line">                <span class="comment">// 注意点2：这里使用 &amp; ，保留前缀的意思（从高位到低位）</span></span><br><span class="line">                set.add(num &amp; mask);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 这里先假定第 n 位为 1 ，前 n-1 位 res 为之前迭代求得</span></span><br><span class="line">            <span class="keyword">int</span> temp = res | (<span class="number">1</span> &lt;&lt; i);</span><br><span class="line">            <span class="keyword">for</span> (Integer prefix : set) &#123;</span><br><span class="line">                <span class="keyword">if</span> (set.contains(prefix ^ temp)) &#123;</span><br><span class="line">                    res = temp;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">作者：liweiwei1419</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/maximum-xor-of-two-numbers-in-an-array/solution/li-yong-yi-huo-yun-suan-de-xing-zhi-tan-xin-suan-f/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure><h2 id="最长连续序列"><a href="#最长连续序列" class="headerlink" title="最长连续序列"></a>最长连续序列</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestConsecutive</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        Set&lt;Integer&gt; hashSet = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: nums)&#123;</span><br><span class="line">            hashSet.add(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        HashMap&lt;Integer, Integer&gt; consecutive = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(consecutive.containsKey(nums[i]))&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> num = <span class="number">1</span>;</span><br><span class="line">            hashSet.remove(nums[i]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> next = nums[i]+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(hashSet.contains(next))&#123;</span><br><span class="line">                num++;</span><br><span class="line">                hashSet.remove(next);</span><br><span class="line">                next++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(consecutive.containsKey(next))&#123;</span><br><span class="line">                num += consecutive.get(next);</span><br><span class="line">            &#125;</span><br><span class="line">            consecutive.put(nums[i], num);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(num &gt; ans)&#123;</span><br><span class="line">                ans = num;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//优化</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestConsecutive</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        Set&lt;Integer&gt; hashSet = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: nums)&#123;</span><br><span class="line">            hashSet.add(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//要写成 for(int i: hashSet) 而不是for(int i: nums) 因为 1，2，3，4，1，1 会从1开始多次重复计算</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: hashSet)&#123;</span><br><span class="line">            <span class="keyword">if</span>(hashSet.contains(i-<span class="number">1</span>))&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> k = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(hashSet.contains(++i))&#123;</span><br><span class="line">                k++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(k &gt; ans)&#123;</span><br><span class="line">                ans = k;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="多余的边-“利用”并查集"><a href="#多余的边-“利用”并查集" class="headerlink" title="多余的边(“利用”并查集)"></a>多余的边(“利用”并查集)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] parent;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] findRedundantConnection(<span class="keyword">int</span>[][] edges) &#123;</span><br><span class="line">        <span class="keyword">int</span> n = edges.length;</span><br><span class="line">        parent = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            parent[i] = i;</span><br><span class="line">        &#125;        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> v1 = edges[i][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">int</span> v2 = edges[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(find(v1) == find(v2))&#123;</span><br><span class="line">                <span class="keyword">return</span> edges[i];</span><br><span class="line">            &#125;</span><br><span class="line">            union(v1, v2);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> parent[x] == x? x: (parent[x] = find(parent[x]));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">        parent[find(y)] = find(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="相似字符串组"><a href="#相似字符串组" class="headerlink" title="相似字符串组"></a>相似字符串组</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSimilarGroups</span><span class="params">(String[] strs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        LinkedList&lt;String&gt; bfs = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;strs.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(strs[i] == <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ans++;</span><br><span class="line">            bfs.add(strs[i]);</span><br><span class="line">            strs[i] = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">while</span>(!bfs.isEmpty())&#123;</span><br><span class="line">                String poll = bfs.poll();</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;strs.length; j++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(strs[j] != <span class="keyword">null</span> &amp;&amp; judge(poll, strs[j]))&#123;</span><br><span class="line">                        bfs.add(strs[j]);</span><br><span class="line">                        strs[j] = <span class="keyword">null</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">judge</span><span class="params">(String s1, String s2)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;s1.length(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s1.charAt(i) != s2.charAt(i))&#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(count &gt; <span class="number">2</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二叉树的序列化和反序列化"><a href="#二叉树的序列化和反序列化" class="headerlink" title="二叉树的序列化和反序列化"></a>二叉树的序列化和反序列化</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Codec</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Encodes a tree to a single string.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">serialize</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//层序遍历</span></span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        LinkedList&lt;TreeNode&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        queue.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">            TreeNode poll = queue.poll();</span><br><span class="line">            <span class="keyword">if</span>(poll.val != Integer.MIN_VALUE)&#123;</span><br><span class="line">                sb.append(poll.val);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                sb.append(<span class="string">&#x27;#&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            sb.append(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span>(poll.val == Integer.MIN_VALUE)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(poll.left == <span class="keyword">null</span>)&#123;</span><br><span class="line">                queue.add(<span class="keyword">new</span> TreeNode(Integer.MIN_VALUE));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                queue.add(poll.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(poll.right == <span class="keyword">null</span>)&#123;</span><br><span class="line">                queue.add(<span class="keyword">new</span> TreeNode(Integer.MIN_VALUE));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                queue.add(poll.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.substring(<span class="number">0</span>, sb.length() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Decodes your encoded data to tree.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">deserialize</span><span class="params">(String data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(data == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        TreeNode trueRoot = <span class="keyword">null</span>;</span><br><span class="line">        String[] treeVal = data.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="number">1</span>;</span><br><span class="line">        TreeNode root, lSon, rSon;</span><br><span class="line">        root = <span class="keyword">new</span> TreeNode(Integer.parseInt(treeVal[l]));</span><br><span class="line">        LinkedList&lt;TreeNode&gt; rootList = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        rootList.add(root);</span><br><span class="line">        trueRoot = root;</span><br><span class="line">        <span class="keyword">while</span> (r &lt; treeVal.length) &#123;</span><br><span class="line">            <span class="keyword">while</span> (treeVal[l].equals(<span class="string">&quot;#&quot;</span>)) &#123;</span><br><span class="line">                l++;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            root = rootList.poll();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (treeVal[r].equals(<span class="string">&quot;#&quot;</span>)) &#123;</span><br><span class="line">                lSon = <span class="keyword">null</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                lSon = <span class="keyword">new</span> TreeNode(Integer.parseInt(treeVal[r]));</span><br><span class="line">                rootList.add(lSon);</span><br><span class="line">            &#125;</span><br><span class="line">            r++;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (treeVal[r].equals(<span class="string">&quot;#&quot;</span>)) &#123;</span><br><span class="line">                rSon = <span class="keyword">null</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                rSon = <span class="keyword">new</span> TreeNode(Integer.parseInt(treeVal[r]));</span><br><span class="line">                rootList.add(rSon);</span><br><span class="line">            &#125;</span><br><span class="line">            r++;</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">            root.left = lSon;</span><br><span class="line">            root.right = rSon;</span><br><span class="line"></span><br><span class="line">            l++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> trueRoot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Your Codec object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment">// Codec codec = new Codec();</span></span><br><span class="line"><span class="comment">// codec.deserialize(codec.serialize(root));</span></span><br></pre></td></tr></table></figure><h2 id="每颗子树内缺失的最小基因数"><a href="#每颗子树内缺失的最小基因数" class="headerlink" title="每颗子树内缺失的最小基因数"></a>每颗子树内缺失的最小基因数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] ans;</span><br><span class="line">    <span class="keyword">int</span>[] nums;</span><br><span class="line">    <span class="keyword">int</span> next;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] smallestMissingValueSubtree(<span class="keyword">int</span>[] parents, <span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        <span class="keyword">this</span>.nums = nums;</span><br><span class="line">        ans = <span class="keyword">new</span> <span class="keyword">int</span>[parents.length];</span><br><span class="line">        next = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//建树</span></span><br><span class="line">        HashMap&lt;Integer, ArrayList&lt;Integer&gt;&gt; p2s = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">//start -&gt; nums[start] == 1</span></span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;parents.length; i++)&#123;</span><br><span class="line">            ArrayList&lt;Integer&gt; son = p2s.getOrDefault(parents[i], <span class="keyword">new</span> ArrayList&lt;&gt;());</span><br><span class="line">            son.add(i);</span><br><span class="line">            p2s.put(parents[i], son);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(nums[i] == <span class="number">1</span>)&#123;</span><br><span class="line">                start = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//保留还没&quot;收益&quot;的值</span></span><br><span class="line">        PriorityQueue&lt;Integer&gt; gene = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//存&#x27;1&#x27;路径</span></span><br><span class="line">        HashSet&lt;Integer&gt; oneSet = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        oneSet.add(start);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//沿路径自底向上dfs</span></span><br><span class="line">        <span class="keyword">int</span> prev = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(start != -<span class="number">1</span>)&#123;</span><br><span class="line">            postOrderTraversal(p2s, start, gene, prev);</span><br><span class="line">            oneSet.add(start);</span><br><span class="line">            prev = start;</span><br><span class="line">            start = parents[start];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;parents.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!oneSet.contains(i))&#123;</span><br><span class="line">                ans[i] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//最后一个参数用来剪枝</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postOrderTraversal</span><span class="params">(HashMap&lt;Integer, ArrayList&lt;Integer&gt;&gt; p2s, <span class="keyword">int</span> cur, PriorityQueue&lt;Integer&gt; gene, <span class="keyword">int</span> visited)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(Integer i: p2s.getOrDefault(cur, <span class="keyword">new</span> ArrayList&lt;&gt;()))&#123;</span><br><span class="line">            <span class="keyword">if</span>(i != visited)&#123;</span><br><span class="line">                postOrderTraversal(p2s, i, gene, -<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        gene.add(nums[cur]);</span><br><span class="line">        <span class="keyword">while</span>(!gene.isEmpty() &amp;&amp; gene.peek() == next)&#123;</span><br><span class="line">            next++;</span><br><span class="line">            gene.poll();</span><br><span class="line">        &#125;</span><br><span class="line">        ans[cur] = next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="两个回文子序列长度的最大乘积"><a href="#两个回文子序列长度的最大乘积" class="headerlink" title="两个回文子序列长度的最大乘积"></a>两个回文子序列长度的最大乘积</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProduct</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        string s1, s2;</span><br><span class="line">        dfs(s, s1, s2, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(string &amp;s, string s1, string s2, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(check(s1) &amp;&amp; check(s2)) ans = max(ans, <span class="keyword">int</span>(s1.size() * s2.size()));</span><br><span class="line">        <span class="keyword">if</span>(index == s.size()) <span class="keyword">return</span>;</span><br><span class="line">        dfs(s, s1 + s[index], s2, index + <span class="number">1</span>);<span class="comment">//子序列s1使用该字符</span></span><br><span class="line">        dfs(s, s1, s2 + s[index], index + <span class="number">1</span>);<span class="comment">//子序列s2使用该字符</span></span><br><span class="line">        dfs(s, s1, s2, index + <span class="number">1</span>);<span class="comment">//子序列都不使用该字符</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function">bool <span class="title">check</span><span class="params">(string &amp;s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>, r = s.size() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s[l++] != s[r--]) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">作者：ytmartian</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/maximum-product-of-the-length-of-two-palindromic-subsequences/solution/dfsliang-ge-zi-xu-lie-by-ytmartian-svyn/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProduct</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">1</span> &lt;&lt; s.length();</span><br><span class="line">        <span class="comment">//存储所有的回文子串的状态和长度</span></span><br><span class="line">        List&lt;<span class="keyword">int</span>[]&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; max; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (check(s, i)) list.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;i, getNum1(i)&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> n = list.size();</span><br><span class="line">        <span class="keyword">int</span> res = Integer.MIN_VALUE;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="comment">//校验两个回文串有没有重复</span></span><br><span class="line">                <span class="keyword">if</span> ((list.get(i)[<span class="number">0</span>] ^ list.get(j)[<span class="number">0</span>]) == list.get(i)[<span class="number">0</span>] + list.get(j)[<span class="number">0</span>]) res = Math.max(list.get(i)[<span class="number">1</span>] * list.get(j)[<span class="number">1</span>], res);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n 选择的情况</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 当前情况下回文串的长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getNum1</span><span class="params">(Integer n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (n != <span class="number">0</span>) &#123;</span><br><span class="line">            count++;</span><br><span class="line">            n = n &amp; (n - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n 选择的情况</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 当前情况是否是回文子串</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(String s, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        StringBuilder ss = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (n != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((n &amp; <span class="number">1</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">                ss.append(s.charAt(index));</span><br><span class="line">            &#125;</span><br><span class="line">            n = n &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> len = ss.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i * <span class="number">2</span> &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ss.charAt(i) != ss.charAt(len - <span class="number">1</span> - i)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">作者：tangy97</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/maximum-product-of-the-length-of-two-palindromic-subsequences/solution/javazhuang-tai-ya-suo-mo-ni-by-tangy97-90fd/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure><h2 id="十字路口的交通"><a href="#十字路口的交通" class="headerlink" title="十字路口的交通"></a>十字路口的交通</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    String spaceE, spaceS, spaceW, spaceN;</span><br><span class="line">    <span class="keyword">int</span> eL, sL, wL, nL;</span><br><span class="line">    <span class="keyword">int</span>[][][][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">21</span>][<span class="number">21</span>][<span class="number">21</span>][<span class="number">21</span>];</span><br><span class="line">    <span class="comment">//dp 不记忆化必rt</span></span><br><span class="line">    <span class="comment">//中间还有4个交叉点我靠</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//dfs不记忆化 脑残</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trafficCommand</span><span class="params">(String[] directions)</span> </span>&#123;</span><br><span class="line">        spaceE = directions[<span class="number">0</span>];</span><br><span class="line">        spaceS = directions[<span class="number">1</span>];</span><br><span class="line">        spaceW = directions[<span class="number">2</span>];</span><br><span class="line">        spaceN = directions[<span class="number">3</span>];</span><br><span class="line">        eL = spaceE.length();</span><br><span class="line">        sL = spaceS.length();</span><br><span class="line">        wL = spaceW.length();</span><br><span class="line">        nL = spaceN.length();</span><br><span class="line">        dfs(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> e, <span class="keyword">int</span> s, <span class="keyword">int</span> w, <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(dp[e][s][w][n] != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> dp[e][s][w][n];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(e == eL &amp;&amp; s == sL &amp;&amp; w == wL &amp;&amp; n == nL)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span>[] taxi = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">4</span>];</span><br><span class="line">        <span class="keyword">if</span>(e &lt; eL)&#123;</span><br><span class="line">            taxi[<span class="number">0</span>] = spaceE.charAt(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s &lt; sL)&#123;</span><br><span class="line">            taxi[<span class="number">1</span>] = spaceS.charAt(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(w &lt; wL)&#123;</span><br><span class="line">            taxi[<span class="number">2</span>] = spaceW.charAt(w);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(n &lt; nL)&#123;</span><br><span class="line">            taxi[<span class="number">3</span>] = spaceN.charAt(n);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        LinkedList&lt;<span class="keyword">char</span>[]&gt; possi = select(taxi);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span>[] pass: possi)&#123;</span><br><span class="line">            <span class="keyword">int</span> nextE = pass[<span class="number">0</span>] == <span class="number">0</span>? e: e+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> nextS = pass[<span class="number">1</span>] == <span class="number">0</span>? s: s+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> nextW = pass[<span class="number">2</span>] == <span class="number">0</span>? w: w+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> nextN = pass[<span class="number">3</span>] == <span class="number">0</span>? n: n+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(dp[e][s][w][n] == <span class="number">0</span>)&#123;</span><br><span class="line">                dp[e][s][w][n] = dfs(nextE, nextS, nextW, nextN) + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            dp[e][s][w][n] = Math.min(dp[e][s][w][n], dfs(nextE, nextS, nextW, nextN) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[e][s][w][n];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> LinkedList&lt;<span class="keyword">char</span>[]&gt; select(<span class="keyword">char</span>[] taxi)&#123;</span><br><span class="line">        LinkedList&lt;<span class="keyword">char</span>[]&gt; ret = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">boolean</span> pE, pS, pW, pN;</span><br><span class="line">        <span class="comment">// int num = 0;</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;<span class="number">16</span>; i++)&#123;</span><br><span class="line">            <span class="comment">// num = 0;</span></span><br><span class="line"></span><br><span class="line">            pE = (i &amp; <span class="number">1</span>) == <span class="number">1</span>;</span><br><span class="line">            pS = (i &amp; <span class="number">2</span>) == <span class="number">2</span>;</span><br><span class="line">            pW = (i &amp; <span class="number">4</span>) == <span class="number">4</span>;</span><br><span class="line">            pN = (i &amp; <span class="number">8</span>) == <span class="number">8</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">char</span>[] in = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">4</span>];</span><br><span class="line">            in[<span class="number">0</span>] = pE &amp;&amp; taxi[<span class="number">0</span>] != <span class="number">0</span>? taxi[<span class="number">0</span>]: <span class="number">0</span>;</span><br><span class="line">            in[<span class="number">1</span>] = pS &amp;&amp; taxi[<span class="number">1</span>] != <span class="number">0</span>? taxi[<span class="number">1</span>]: <span class="number">0</span>;</span><br><span class="line">            in[<span class="number">2</span>] = pW &amp;&amp; taxi[<span class="number">2</span>] != <span class="number">0</span>? taxi[<span class="number">2</span>]: <span class="number">0</span>;</span><br><span class="line">            in[<span class="number">3</span>] = pN &amp;&amp; taxi[<span class="number">3</span>] != <span class="number">0</span>? taxi[<span class="number">3</span>]: <span class="number">0</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// for(int k = 0; k&lt;4; k++)&#123;</span></span><br><span class="line">                <span class="comment">// num = in[k] == 0? num: num+1;</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(check(in))&#123;</span><br><span class="line">                <span class="comment">// if(num &gt; max)&#123;</span></span><br><span class="line">                    <span class="comment">// max = num;</span></span><br><span class="line">                <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">                ret.add(in);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// LinkedList&lt;char[]&gt; pruning = new LinkedList&lt;&gt;();</span></span><br><span class="line">        <span class="comment">// for(char[] p: ret)&#123;</span></span><br><span class="line">            <span class="comment">// num = 0;</span></span><br><span class="line">            <span class="comment">// for(int i = 0; i&lt;4; i++)&#123;</span></span><br><span class="line">                <span class="comment">// num = p[i] == 0? num: num+1;</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">            <span class="comment">// if(num == max)&#123;</span></span><br><span class="line">                <span class="comment">// pruning.add(p);</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// return pruning;</span></span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(<span class="keyword">char</span>[] taxi)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] occupy = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>][<span class="number">2</span>];</span><br><span class="line">        <span class="comment">// E S W N</span></span><br><span class="line">        <span class="keyword">int</span>[] out = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span>[] inter = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span> c = <span class="string">&#x27;Q&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span>(taxi[<span class="number">0</span>] != <span class="number">0</span>)&#123;</span><br><span class="line">            c = taxi[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;N&#x27;</span>) &#123;out[<span class="number">3</span>]++;&#125;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;W&#x27;</span>) &#123;occupy[<span class="number">0</span>][<span class="number">0</span>]++; occupy[<span class="number">0</span>][<span class="number">1</span>]++; out[<span class="number">2</span>]++;&#125;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;S&#x27;</span>) &#123;occupy[<span class="number">1</span>][<span class="number">1</span>]++; out[<span class="number">1</span>]++; inter[<span class="number">0</span>]++; inter[<span class="number">1</span>]++;&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(taxi[<span class="number">1</span>] != <span class="number">0</span>)&#123;</span><br><span class="line">            c = taxi[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;N&#x27;</span>) &#123;occupy[<span class="number">0</span>][<span class="number">1</span>]++; occupy[<span class="number">1</span>][<span class="number">1</span>]++; out[<span class="number">3</span>]++;&#125;;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;W&#x27;</span>) &#123;occupy[<span class="number">1</span>][<span class="number">0</span>]++; out[<span class="number">2</span>]++; inter[<span class="number">1</span>]++; inter[<span class="number">2</span>]++;&#125;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;E&#x27;</span>) &#123;out[<span class="number">0</span>]++;&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(taxi[<span class="number">2</span>] != <span class="number">0</span>)&#123;</span><br><span class="line">            c = taxi[<span class="number">2</span>];</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;N&#x27;</span>) &#123;occupy[<span class="number">0</span>][<span class="number">0</span>]++; out[<span class="number">3</span>]++; inter[<span class="number">2</span>]++; inter[<span class="number">3</span>]++;&#125;;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;S&#x27;</span>) &#123;out[<span class="number">1</span>]++;&#125;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;E&#x27;</span>) &#123;occupy[<span class="number">1</span>][<span class="number">0</span>]++; occupy[<span class="number">1</span>][<span class="number">1</span>]++; out[<span class="number">0</span>]++;&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(taxi[<span class="number">3</span>] != <span class="number">0</span>)&#123;</span><br><span class="line">            c = taxi[<span class="number">3</span>];</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;S&#x27;</span>) &#123;occupy[<span class="number">0</span>][<span class="number">0</span>]++; occupy[<span class="number">1</span>][<span class="number">0</span>]++; out[<span class="number">1</span>]++;&#125;;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;W&#x27;</span>) &#123;out[<span class="number">2</span>]++;&#125;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;E&#x27;</span>) &#123;occupy[<span class="number">0</span>][<span class="number">1</span>]++; out[<span class="number">0</span>]++; inter[<span class="number">3</span>]++; inter[<span class="number">0</span>]++;&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">2</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;<span class="number">2</span>; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(occupy[i][j] &gt; <span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">4</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(out[i] &gt; <span class="number">1</span> || inter[i] &gt; <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">4</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(out[i] &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//每次选尽可能多的车出，可能最后会有毒瘤车车，一个车车拖全队</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    String spaceE, spaceS, spaceW, spaceN;</span><br><span class="line">    <span class="keyword">int</span> eL, sL, wL, nL;</span><br><span class="line">    <span class="keyword">int</span>[][][][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">21</span>][<span class="number">21</span>][<span class="number">21</span>][<span class="number">21</span>];</span><br><span class="line">    <span class="comment">//dp 不记忆化必rt</span></span><br><span class="line">    <span class="comment">//中间还有4个交叉点我靠</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//dfs不记忆化 脑残</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trafficCommand</span><span class="params">(String[] directions)</span> </span>&#123;</span><br><span class="line">        spaceE = directions[<span class="number">0</span>];</span><br><span class="line">        spaceS = directions[<span class="number">1</span>];</span><br><span class="line">        spaceW = directions[<span class="number">2</span>];</span><br><span class="line">        spaceN = directions[<span class="number">3</span>];</span><br><span class="line">        eL = spaceE.length();</span><br><span class="line">        sL = spaceS.length();</span><br><span class="line">        wL = spaceW.length();</span><br><span class="line">        nL = spaceN.length();</span><br><span class="line">        dfs(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> e, <span class="keyword">int</span> s, <span class="keyword">int</span> w, <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(dp[e][s][w][n] != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> dp[e][s][w][n];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(e == eL &amp;&amp; s == sL &amp;&amp; w == wL &amp;&amp; n == nL)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span>[] taxi = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">4</span>];</span><br><span class="line">        <span class="keyword">if</span>(e &lt; eL)&#123;</span><br><span class="line">            taxi[<span class="number">0</span>] = spaceE.charAt(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s &lt; sL)&#123;</span><br><span class="line">            taxi[<span class="number">1</span>] = spaceS.charAt(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(w &lt; wL)&#123;</span><br><span class="line">            taxi[<span class="number">2</span>] = spaceW.charAt(w);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(n &lt; nL)&#123;</span><br><span class="line">            taxi[<span class="number">3</span>] = spaceN.charAt(n);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        LinkedList&lt;<span class="keyword">char</span>[]&gt; possi = select(taxi);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span>[] pass: possi)&#123;</span><br><span class="line">            <span class="keyword">int</span> nextE = pass[<span class="number">0</span>] == <span class="number">0</span>? e: e+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> nextS = pass[<span class="number">1</span>] == <span class="number">0</span>? s: s+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> nextW = pass[<span class="number">2</span>] == <span class="number">0</span>? w: w+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> nextN = pass[<span class="number">3</span>] == <span class="number">0</span>? n: n+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(dp[e][s][w][n] == <span class="number">0</span>)&#123;</span><br><span class="line">                dp[e][s][w][n] = dfs(nextE, nextS, nextW, nextN) + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            dp[e][s][w][n] = Math.min(dp[e][s][w][n], dfs(nextE, nextS, nextW, nextN) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[e][s][w][n];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> LinkedList&lt;<span class="keyword">char</span>[]&gt; select(<span class="keyword">char</span>[] taxi)&#123;</span><br><span class="line">        LinkedList&lt;<span class="keyword">char</span>[]&gt; ret = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">boolean</span> pE, pS, pW, pN;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;<span class="number">16</span>; i++)&#123;</span><br><span class="line">            num = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            pE = (i &amp; <span class="number">1</span>) == <span class="number">1</span>;</span><br><span class="line">            pS = (i &amp; <span class="number">2</span>) == <span class="number">2</span>;</span><br><span class="line">            pW = (i &amp; <span class="number">4</span>) == <span class="number">4</span>;</span><br><span class="line">            pN = (i &amp; <span class="number">8</span>) == <span class="number">8</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">char</span>[] in = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">4</span>];</span><br><span class="line">            in[<span class="number">0</span>] = pE &amp;&amp; taxi[<span class="number">0</span>] != <span class="number">0</span>? taxi[<span class="number">0</span>]: <span class="number">0</span>;</span><br><span class="line">            in[<span class="number">1</span>] = pS &amp;&amp; taxi[<span class="number">1</span>] != <span class="number">0</span>? taxi[<span class="number">1</span>]: <span class="number">0</span>;</span><br><span class="line">            in[<span class="number">2</span>] = pW &amp;&amp; taxi[<span class="number">2</span>] != <span class="number">0</span>? taxi[<span class="number">2</span>]: <span class="number">0</span>;</span><br><span class="line">            in[<span class="number">3</span>] = pN &amp;&amp; taxi[<span class="number">3</span>] != <span class="number">0</span>? taxi[<span class="number">3</span>]: <span class="number">0</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k&lt;<span class="number">4</span>; k++)&#123;</span><br><span class="line">                num = in[k] == <span class="number">0</span>? num: num+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(check(in))&#123;</span><br><span class="line">                <span class="keyword">if</span>(num &gt; max)&#123;</span><br><span class="line">                    max = num;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                ret.add(in);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        LinkedList&lt;<span class="keyword">char</span>[]&gt; pruning = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span>[] p: ret)&#123;</span><br><span class="line">            num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">4</span>; i++)&#123;</span><br><span class="line">                num = p[i] == <span class="number">0</span>? num: num+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(num == max)&#123;</span><br><span class="line">                pruning.add(p);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> pruning;</span><br><span class="line">        <span class="comment">// return ret;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(<span class="keyword">char</span>[] taxi)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] occupy = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>][<span class="number">2</span>];</span><br><span class="line">        <span class="comment">// E S W N</span></span><br><span class="line">        <span class="keyword">int</span>[] out = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span>[] inter = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span> c = <span class="string">&#x27;Q&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span>(taxi[<span class="number">0</span>] != <span class="number">0</span>)&#123;</span><br><span class="line">            c = taxi[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;N&#x27;</span>) &#123;out[<span class="number">3</span>]++;&#125;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;W&#x27;</span>) &#123;occupy[<span class="number">0</span>][<span class="number">0</span>]++; occupy[<span class="number">0</span>][<span class="number">1</span>]++; out[<span class="number">2</span>]++;&#125;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;S&#x27;</span>) &#123;occupy[<span class="number">1</span>][<span class="number">1</span>]++; out[<span class="number">1</span>]++; inter[<span class="number">0</span>]++; inter[<span class="number">1</span>]++;&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(taxi[<span class="number">1</span>] != <span class="number">0</span>)&#123;</span><br><span class="line">            c = taxi[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;N&#x27;</span>) &#123;occupy[<span class="number">0</span>][<span class="number">1</span>]++; occupy[<span class="number">1</span>][<span class="number">1</span>]++; out[<span class="number">3</span>]++;&#125;;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;W&#x27;</span>) &#123;occupy[<span class="number">1</span>][<span class="number">0</span>]++; out[<span class="number">2</span>]++; inter[<span class="number">1</span>]++; inter[<span class="number">2</span>]++;&#125;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;E&#x27;</span>) &#123;out[<span class="number">0</span>]++;&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(taxi[<span class="number">2</span>] != <span class="number">0</span>)&#123;</span><br><span class="line">            c = taxi[<span class="number">2</span>];</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;N&#x27;</span>) &#123;occupy[<span class="number">0</span>][<span class="number">0</span>]++; out[<span class="number">3</span>]++; inter[<span class="number">2</span>]++; inter[<span class="number">3</span>]++;&#125;;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;S&#x27;</span>) &#123;out[<span class="number">1</span>]++;&#125;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;E&#x27;</span>) &#123;occupy[<span class="number">1</span>][<span class="number">0</span>]++; occupy[<span class="number">1</span>][<span class="number">1</span>]++; out[<span class="number">0</span>]++;&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(taxi[<span class="number">3</span>] != <span class="number">0</span>)&#123;</span><br><span class="line">            c = taxi[<span class="number">3</span>];</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;S&#x27;</span>) &#123;occupy[<span class="number">0</span>][<span class="number">0</span>]++; occupy[<span class="number">1</span>][<span class="number">0</span>]++; out[<span class="number">1</span>]++;&#125;;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;W&#x27;</span>) &#123;out[<span class="number">2</span>]++;&#125;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27;E&#x27;</span>) &#123;occupy[<span class="number">0</span>][<span class="number">1</span>]++; out[<span class="number">0</span>]++; inter[<span class="number">3</span>]++; inter[<span class="number">0</span>]++;&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">2</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;<span class="number">2</span>; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(occupy[i][j] &gt; <span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">4</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(out[i] &gt; <span class="number">1</span> || inter[i] &gt; <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">4</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(out[i] &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="玩具套圈"><a href="#玩具套圈" class="headerlink" title="玩具套圈"></a>玩具套圈</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x;</span><br><span class="line">        <span class="keyword">int</span> y;</span><br><span class="line">        </span><br><span class="line">        Node(<span class="keyword">int</span> x, <span class="keyword">int</span> y)&#123;</span><br><span class="line">            <span class="keyword">this</span>.x = x;</span><br><span class="line">            <span class="keyword">this</span>.y = y;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Integer.hashCode(x) + Integer.hashCode(y);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">if</span>(!(o <span class="keyword">instanceof</span> Node)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            Node node = (Node) o;</span><br><span class="line">            <span class="keyword">return</span> node.x == x &amp;&amp; node.y == y;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">circleGame</span><span class="params">(<span class="keyword">int</span>[][] toys, <span class="keyword">int</span>[][] circles, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//写这种题目宗旨就是 多想 想如何抽象 想数据结构 想复杂度 想一般性</span></span><br><span class="line">        <span class="comment">//哈希 半径判断 </span></span><br><span class="line">        HashMap&lt;Node, <span class="keyword">int</span>[]&gt; living = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;toys.length; i++)&#123;</span><br><span class="line">            living.put(<span class="keyword">new</span> Node(toys[i][<span class="number">0</span>], toys[i][<span class="number">1</span>]), toys[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] toy = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span>[] circle: circles)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = circle[<span class="number">0</span>] - r + <span class="number">1</span>; i &lt; circle[<span class="number">0</span>] + r; i++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = circle[<span class="number">1</span>] - r + <span class="number">1</span>; j &lt; circle[<span class="number">1</span>] + r; j++)&#123;</span><br><span class="line">                    Node point = <span class="keyword">new</span> Node(i, j);</span><br><span class="line">                    <span class="keyword">if</span>(living.containsKey(point))&#123;</span><br><span class="line">                        toy = living.get(point);</span><br><span class="line">                        <span class="keyword">if</span>(check(circle, toy, r))&#123;</span><br><span class="line">                            living.remove(point);</span><br><span class="line">                            ans++;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span>[] circle, <span class="keyword">int</span>[] toy, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> dX = circle[<span class="number">0</span>] - toy[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> dY = circle[<span class="number">1</span>] - toy[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">return</span> r &gt;= toy[<span class="number">2</span>] &amp;&amp; (dX * dX + dY * dY) &lt;= (r - toy[<span class="number">2</span>]) * (r - toy[<span class="number">2</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="乘积最大子数组"><a href="#乘积最大子数组" class="headerlink" title="乘积最大子数组"></a>乘积最大子数组</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProduct</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> positive = nums[<span class="number">0</span>] &gt; <span class="number">0</span>? nums[<span class="number">0</span>]: <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> negative = nums[<span class="number">0</span>] &lt; <span class="number">0</span>? nums[<span class="number">0</span>]: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(; i&lt;nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = positive;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] == <span class="number">0</span>)&#123;</span><br><span class="line">                positive = negative = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(nums[i] &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                positive = Math.max(positive * nums[i], nums[i]);</span><br><span class="line">                negative = negative * nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                positive = negative * nums[i];</span><br><span class="line">                negative = Math.min(tmp * nums[i], nums[i]);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(positive &gt; max)&#123;</span><br><span class="line">                max = positive;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="数字1的个数"><a href="#数字1的个数" class="headerlink" title="数字1的个数"></a>数字1的个数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countDigitOne</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] table = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">9</span>];</span><br><span class="line">        table[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> tmp = <span class="number">1</span>, sum = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(; i&lt;<span class="number">9</span>; i++)&#123;</span><br><span class="line">            tmp = tmp * <span class="number">10</span>;</span><br><span class="line">            table[i] = tmp + sum * <span class="number">9</span>;</span><br><span class="line">            sum += table[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 0 -&gt; 1-9</span></span><br><span class="line">        <span class="comment">// 1 -&gt; 1-99</span></span><br><span class="line">        <span class="comment">// 2 -&gt; 1-999</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i&lt;<span class="number">9</span>; i++)&#123;</span><br><span class="line">            table[i] = table[i-<span class="number">1</span>] + table[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        String s = String.valueOf(n);</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> bound = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i&lt;s.length() - <span class="number">1</span>; i++)&#123;</span><br><span class="line">            bound = bound * <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i&lt;s.length() - <span class="number">1</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(i) &gt; <span class="string">&#x27;1&#x27;</span>)&#123;</span><br><span class="line">                ans += bound;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(i) == <span class="string">&#x27;1&#x27;</span>)&#123;</span><br><span class="line">                ans += n - bound + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ans += table[s.length() - i - <span class="number">2</span>] * (s.charAt(i) - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">            n -= bound * (s.charAt(i) - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">            bound = bound / <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(s.charAt(i) != <span class="string">&#x27;0&#x27;</span>)&#123;</span><br><span class="line">            ans++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//优化后</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countDigitOne</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> cur = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(cur / <span class="number">10</span> &lt;= n)&#123;</span><br><span class="line">            ans += n / cur * (cur / <span class="number">10</span>) + Math.min(Math.max(n % cur - cur / <span class="number">10</span> + <span class="number">1</span>, <span class="number">0</span>), cur / <span class="number">10</span>);</span><br><span class="line">            cur = cur * <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="数组中的逆序对（Run-Time-gt-LineTree-gt-代码优化，思路简化）"><a href="#数组中的逆序对（Run-Time-gt-LineTree-gt-代码优化，思路简化）" class="headerlink" title="数组中的逆序对（Run Time -&gt; LineTree -&gt; 代码优化，思路简化）"></a>数组中的逆序对（Run Time -&gt; LineTree -&gt; 代码优化，思路简化）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">reversePairs</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>, cur;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;nums.length; i++)&#123;</span><br><span class="line">            cur = i;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i-<span class="number">1</span>; j&gt;=<span class="number">0</span>; j--)&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[j] &gt; nums[cur])&#123;</span><br><span class="line">                    swap(nums, cur, j);</span><br><span class="line">                    ans++;</span><br><span class="line">                    cur = j;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp = nums[i];</span><br><span class="line">        nums[i] = nums[j];</span><br><span class="line">        nums[j] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//线段树记录 nlogn</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">reversePairs</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//因为有相等 求正序 再减</span></span><br><span class="line">        <span class="comment">//线段树维护？</span></span><br><span class="line">        PriorityQueue&lt;<span class="keyword">int</span>[]&gt; priorityQueue = <span class="keyword">new</span> PriorityQueue&lt;&gt;(<span class="keyword">new</span> Comparator&lt;<span class="keyword">int</span>[]&gt;()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">int</span>[] o1, <span class="keyword">int</span>[] o2)</span></span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(o2[<span class="number">0</span>] &lt; o1[<span class="number">0</span>])&#123;</span><br><span class="line">                    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(o2[<span class="number">0</span>] == o1[<span class="number">0</span>])&#123;</span><br><span class="line">                    <span class="keyword">if</span>(o1[<span class="number">1</span>] &lt; o2[<span class="number">1</span>])&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;nums.length; i++)&#123;</span><br><span class="line">            priorityQueue.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;nums[i], i&#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> ans = <span class="number">0</span>;</span><br><span class="line">        LineTree lineTree = <span class="keyword">new</span> LineTree(nums.length);</span><br><span class="line">        <span class="keyword">while</span>(!priorityQueue.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">int</span>[] poll = priorityQueue.poll();</span><br><span class="line"></span><br><span class="line">            ans += lineTree.query(poll[<span class="number">1</span>] + <span class="number">1</span>, nums.length);</span><br><span class="line">            lineTree.add(poll[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)((<span class="keyword">long</span>)(nums.length) * (nums.length - <span class="number">1</span>) / <span class="number">2</span> - ans);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">LineTree</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        <span class="keyword">int</span>[] tree;</span><br><span class="line"></span><br><span class="line">        LineTree(<span class="keyword">int</span> n)&#123;</span><br><span class="line">            <span class="keyword">this</span>.n = n;</span><br><span class="line">            buildTree();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildTree</span><span class="params">()</span></span>&#123;</span><br><span class="line">            tree = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>*n + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> pos)</span></span>&#123;</span><br><span class="line">            <span class="keyword">int</span> inc = <span class="number">1</span>, bottom = n + pos;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>(bottom &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                tree[bottom]++;</span><br><span class="line">                bottom /= <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span>&#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>; </span><br><span class="line">            left += n;</span><br><span class="line">            right += n;</span><br><span class="line">            <span class="keyword">while</span>(left &lt;= right)&#123;</span><br><span class="line">                <span class="keyword">if</span>(left % <span class="number">2</span> == <span class="number">1</span>)&#123;</span><br><span class="line">                    sum += tree[left];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(right % <span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                    sum += tree[right];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// left = (left + 1) &lt;&lt; 1; 都是除以2吖！！！</span></span><br><span class="line">                left = (left + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                right = (right - <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//标答</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">reversePairs</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">int</span>[] tmp = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        System.arraycopy(nums, <span class="number">0</span>, tmp, <span class="number">0</span>, n);</span><br><span class="line">        <span class="comment">// 离散化</span></span><br><span class="line">        Arrays.sort(tmp);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            nums[i] = Arrays.binarySearch(tmp, nums[i]) + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 树状数组统计逆序对</span></span><br><span class="line">        BIT bit = <span class="keyword">new</span> BIT(n);</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            ans += bit.query(nums[i] - <span class="number">1</span>);</span><br><span class="line">            bit.update(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BIT</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] tree;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BIT</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.n = n;</span><br><span class="line">        <span class="keyword">this</span>.tree = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x &amp; (-x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (x != <span class="number">0</span>) &#123;</span><br><span class="line">            ret += tree[x];</span><br><span class="line">            x -= lowbit(x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (x &lt;= n) &#123;</span><br><span class="line">            ++tree[x];</span><br><span class="line">            x += lowbit(x);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">作者：LeetCode-Solution</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/shu-zu-zhong-de-ni-xu-dui-lcof/solution/shu-zu-zhong-de-ni-xu-dui-by-leetcode-solution/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure><h2 id="含有所有字符的最短字符串-可以存索引位置，先去重"><a href="#含有所有字符的最短字符串-可以存索引位置，先去重" class="headerlink" title="含有所有字符的最短字符串(可以存索引位置，先去重)"></a>含有所有字符的最短字符串(可以存索引位置，先去重)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">minWindow</span><span class="params">(String s, String t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dic = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">52</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span> c;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;t.length(); i++)&#123;</span><br><span class="line">            c = t.charAt(i);</span><br><span class="line">            <span class="keyword">if</span>(c &gt;= <span class="string">&#x27;a&#x27;</span>)&#123;</span><br><span class="line">                dic[c - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                dic[c - <span class="string">&#x27;A&#x27;</span> + <span class="number">26</span>]++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="number">0</span>, num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = Integer.MAX_VALUE, lBound = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(r &lt; s.length())&#123;</span><br><span class="line">            c = s.charAt(r);</span><br><span class="line">            <span class="keyword">if</span>(c &gt;= <span class="string">&#x27;a&#x27;</span>)&#123;</span><br><span class="line">                dic[c - <span class="string">&#x27;a&#x27;</span>]--;</span><br><span class="line">                <span class="keyword">if</span>(dic[c - <span class="string">&#x27;a&#x27;</span>] &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">                    num++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                dic[c - <span class="string">&#x27;A&#x27;</span> + <span class="number">26</span>]--;</span><br><span class="line">                <span class="keyword">if</span>(dic[c - <span class="string">&#x27;A&#x27;</span> + <span class="number">26</span>] &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">                    num++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">                <span class="keyword">char</span> lc = s.charAt(l);</span><br><span class="line">                <span class="keyword">if</span>(lc &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; dic[lc - <span class="string">&#x27;a&#x27;</span>] &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                    dic[lc - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(lc &lt;= <span class="string">&#x27;Z&#x27;</span> &amp;&amp; dic[lc - <span class="string">&#x27;A&#x27;</span> + <span class="number">26</span>] &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                    dic[lc - <span class="string">&#x27;A&#x27;</span> + <span class="number">26</span>]++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                l++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            r++;</span><br><span class="line">            <span class="keyword">if</span>(num == t.length() &amp;&amp; r - l &lt; ans)&#123;</span><br><span class="line">                ans = r - l;</span><br><span class="line">                lBound = l;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == Integer.MAX_VALUE? <span class="string">&quot;&quot;</span>: s.substring(lBound, lBound + ans);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="不同子序列"><a href="#不同子序列" class="headerlink" title="不同子序列"></a>不同子序列</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numDistinct</span><span class="params">(String s, String t)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//dp</span></span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[t.length() + <span class="number">1</span>];</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;s.length(); i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = t.length() - <span class="number">1</span>; j&gt;=<span class="number">0</span>; j--)&#123;</span><br><span class="line">                <span class="keyword">if</span>(s.charAt(i) == t.charAt(j))&#123;</span><br><span class="line">                    dp[j+<span class="number">1</span>] += dp[j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[t.length()];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//记忆化搜索（每次加1计数依旧会超时，因为内部选择时间复杂度为O（s.length() - curS）  每个点访问一次又是O(sL * tL)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[][] mem;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numDistinct</span><span class="params">(String s, String t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sL = s.length(), tL = t.length();</span><br><span class="line">        mem = <span class="keyword">new</span> <span class="keyword">int</span>[sL][tL];</span><br><span class="line">        <span class="keyword">return</span> dfs(s, t, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(String s, String t, <span class="keyword">int</span> curS, <span class="keyword">int</span> curT)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(curS == s.length() &amp;&amp; curT != t.length())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(curT == t.length())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;   </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(mem[curS][curT] != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> mem[curS][curT];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = curS; i&lt;s.length(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(i) == t.charAt(curT))&#123;</span><br><span class="line">                mem[curS][curT] += dfs(s, t, i+<span class="number">1</span>, curT+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> mem[curS][curT];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//思路转变的记忆化搜索</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[][] mem;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numDistinct</span><span class="params">(String s, String t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sL = s.length(), tL = t.length();</span><br><span class="line">        mem = <span class="keyword">new</span> <span class="keyword">int</span>[sL][tL];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;sL; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;tL; j++)&#123;</span><br><span class="line">                mem[i][j] = -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dfs(s, t, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(String s, String t, <span class="keyword">int</span> curS, <span class="keyword">int</span> curT)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(curT == t.length())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(curS == s.length())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(mem[curS][curT] != -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> mem[curS][curT];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(s.charAt(curS) == t.charAt(curT))&#123;</span><br><span class="line">            mem[curS][curT] = dfs(s, t, curS + <span class="number">1</span>, curT + <span class="number">1</span>) + dfs(s, t, curS + <span class="number">1</span>, curT);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            mem[curS][curT] = dfs(s, t, curS + <span class="number">1</span>, curT);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> mem[curS][curT];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ms 别人写的 没看</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numDistinct</span><span class="params">(String s, String t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s.length() &lt; t.length()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">char</span>[] sc = s.toCharArray(), tc = t.toCharArray();</span><br><span class="line">        Integer[][] nums = <span class="keyword">new</span> Integer[sc.length][tc.length];</span><br><span class="line">        nums[<span class="number">0</span>][<span class="number">0</span>] = sc[<span class="number">0</span>] == tc[<span class="number">0</span>] ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> numDistinct(sc, sc.length - <span class="number">1</span>, tc, tc.length - <span class="number">1</span>, nums);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 计算 sc[0, i] 的子序列中 tc[0, j] 出现的次数。</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">numDistinct</span><span class="params">(<span class="keyword">char</span>[] sc, <span class="keyword">int</span> i, <span class="keyword">char</span>[] tc, <span class="keyword">int</span> j, Integer[][] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; j) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (nums[i][j] != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> nums[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> nums[i][j] = numDistinct(sc, i - <span class="number">1</span>, tc, <span class="number">0</span>, nums) + (sc[i] == tc[<span class="number">0</span>] ? <span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> num = numDistinct(sc, i - <span class="number">1</span>, tc, j, nums);</span><br><span class="line">        <span class="keyword">return</span> nums[i][j] = sc[i] == tc[j] ? num + numDistinct(sc, i - <span class="number">1</span>, tc, j - <span class="number">1</span>, nums) : num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="最少回文分隔"><a href="#最少回文分隔" class="headerlink" title="最少回文分隔"></a>最少回文分隔</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minCut</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[s.length() + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(; i&lt;s.length() - <span class="number">1</span>; i++)&#123;</span><br><span class="line">            dp[i] = Integer.MAX_VALUE;</span><br><span class="line">        &#125;</span><br><span class="line">        dp[s.length()] = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">char</span>[] cArr = s.toCharArray();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(i = cArr.length - <span class="number">2</span>; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j&lt;cArr.length; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(check(cArr, i, j))&#123;</span><br><span class="line">                    dp[i] = Math.min(dp[i], <span class="number">1</span> + dp[j+<span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(<span class="keyword">char</span>[] cArr, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j)&#123;</span><br><span class="line">            <span class="keyword">if</span>(cArr[i] != cArr[j])&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//优化</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minCut</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[s.length() + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> i;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i&lt;s.length() - <span class="number">1</span>; i++)&#123;</span><br><span class="line">            dp[i] = Integer.MAX_VALUE;</span><br><span class="line">        &#125;</span><br><span class="line">        dp[s.length()] = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">char</span>[] cArr = s.toCharArray();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//回文子串预处理</span></span><br><span class="line">        <span class="keyword">boolean</span>[][] check = <span class="keyword">new</span> <span class="keyword">boolean</span>[cArr.length][cArr.length];</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i&lt;cArr.length; i++)&#123;</span><br><span class="line">            check[i][i] = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i&lt;cArr.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(cArr[i] == cArr[i-<span class="number">1</span>])&#123;</span><br><span class="line">                check[i-<span class="number">1</span>][i] = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> l;</span><br><span class="line">        <span class="keyword">for</span>(l = <span class="number">3</span>; l &lt;= s.length(); l++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(i = <span class="number">0</span>; i&lt;=s.length() - l; i++)&#123;</span><br><span class="line">                check[i][i+l-<span class="number">1</span>] = check[i+<span class="number">1</span>][i+l-<span class="number">2</span>] &amp;&amp; s.charAt(i) == s.charAt(i+l-<span class="number">1</span>)? <span class="keyword">true</span>: <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(i = cArr.length - <span class="number">2</span>; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j&lt;cArr.length; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(check[i][j])&#123;</span><br><span class="line">                    dp[i] = Math.min(dp[i], <span class="number">1</span> + dp[j+<span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ms?</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minCut</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] chars = s.toCharArray();</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="keyword">int</span>[] f = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        Arrays.fill(f, n - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            expand(n, i, i, chars, f);</span><br><span class="line">            expand(n, i, i + <span class="number">1</span>, chars, f);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">expand</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">char</span>[] chars, <span class="keyword">int</span>[] f)</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (l &gt;= <span class="number">0</span> &amp;&amp; r &lt; n &amp;&amp; chars[l] == chars[r])&#123;</span><br><span class="line">            <span class="keyword">if</span> (l == <span class="number">0</span>)&#123;</span><br><span class="line">                f[r] = <span class="number">0</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                f[r] = Math.min(f[r], f[l - <span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            l--;</span><br><span class="line">            r++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="单词演变（虚拟节点，双向BFS进一步优化）"><a href="#单词演变（虚拟节点，双向BFS进一步优化）" class="headerlink" title="单词演变（虚拟节点，双向BFS进一步优化）"></a>单词演变（虚拟节点，双向BFS进一步优化）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">ladderLength</span><span class="params">(String beginWord, String endWord, List&lt;String&gt; wordList)</span> </span>&#123;</span><br><span class="line">        wordList.add(beginWord);</span><br><span class="line">        Map&lt;String, ArrayList&lt;String&gt;&gt; graph = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        ArrayList&lt;String&gt; added = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;String&gt; newList;</span><br><span class="line">        <span class="keyword">for</span>(String s: wordList)&#123;</span><br><span class="line">            newList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span>(String bef: added)&#123;</span><br><span class="line">                <span class="keyword">if</span>(check(s, bef))&#123;</span><br><span class="line">                    newList.add(bef);</span><br><span class="line">                    graph.get(bef).add(s);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            graph.put(s, newList);</span><br><span class="line">            added.add(s);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        bfs(beginWord, endWord, graph);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(String s1, String s2)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;s1.length(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s1.charAt(i) != s2.charAt(i))&#123;</span><br><span class="line">                num++;</span><br><span class="line">                <span class="keyword">if</span>(num &gt; <span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num == <span class="number">1</span>? <span class="keyword">true</span>: <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(String beginWord, String endWord, Map&lt;String, ArrayList&lt;String&gt;&gt; graph)</span></span>&#123;</span><br><span class="line">        LinkedList&lt;String&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        queue.offer(beginWord);</span><br><span class="line">        </span><br><span class="line">        String poll;</span><br><span class="line">        <span class="keyword">int</span> size;</span><br><span class="line">        ArrayList&lt;String&gt; next;</span><br><span class="line"></span><br><span class="line">        HashMap&lt;String, Boolean&gt; visited = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        visited.put(beginWord, <span class="keyword">true</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">            ret++;</span><br><span class="line">            <span class="keyword">if</span>(visited.containsKey(endWord))&#123;</span><br><span class="line">                ans = ret;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            size = queue.size();</span><br><span class="line">            <span class="keyword">while</span>(size-- &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                poll = queue.poll();</span><br><span class="line">                next = graph.get(poll);</span><br><span class="line">                <span class="keyword">if</span>(next == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span>(String s: next)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(!visited.containsKey(s))&#123;</span><br><span class="line">                        queue.offer(s);</span><br><span class="line">                        visited.put(s, <span class="keyword">true</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//虚拟节点</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">ladderLength</span><span class="params">(String beginWord, String endWord, List&lt;String&gt; wordList)</span> </span>&#123;</span><br><span class="line">        wordList.add(beginWord);</span><br><span class="line">        </span><br><span class="line">        Map&lt;String, ArrayList&lt;String&gt;&gt; graph = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">char</span>[] vitualNode;</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;String&gt; l1;</span><br><span class="line">        ArrayList&lt;String&gt; l2;</span><br><span class="line">        <span class="keyword">char</span> tmp;</span><br><span class="line">        String vitual;</span><br><span class="line">        <span class="keyword">for</span>(String s: wordList)&#123;</span><br><span class="line">            vitualNode = s.toCharArray();</span><br><span class="line">            l1 = graph.getOrDefault(s, <span class="keyword">new</span> ArrayList&lt;&gt;());</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;s.length(); i++)&#123;</span><br><span class="line">                tmp = vitualNode[i];</span><br><span class="line">                vitualNode[i] = <span class="string">&#x27;*&#x27;</span>;</span><br><span class="line">                </span><br><span class="line">                vitual = <span class="keyword">new</span> String(vitualNode);</span><br><span class="line">                l1.add(vitual);</span><br><span class="line">                l2 = graph.getOrDefault(vitual, <span class="keyword">new</span> ArrayList&lt;&gt;());</span><br><span class="line">                l2.add(s);</span><br><span class="line"></span><br><span class="line">                graph.put(vitual, l2);</span><br><span class="line">                </span><br><span class="line">                vitualNode[i] = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">            graph.put(s, l1);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        bfs(beginWord, endWord, graph);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(String beginWord, String endWord, Map&lt;String, ArrayList&lt;String&gt;&gt; graph)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        LinkedList&lt;String&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        queue.offer(beginWord);</span><br><span class="line"></span><br><span class="line">        String poll;</span><br><span class="line">        <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">        Map&lt;String, Boolean&gt; visited = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        visited.put(beginWord, <span class="keyword">true</span>);</span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">            ret++;</span><br><span class="line">            <span class="keyword">if</span>(visited.containsKey(endWord))&#123;</span><br><span class="line">                ans = (ret + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            size = queue.size();</span><br><span class="line">            <span class="keyword">while</span>(size-- &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                poll = queue.poll();</span><br><span class="line">                <span class="keyword">for</span>(String s: graph.get(poll))&#123;</span><br><span class="line">                    <span class="keyword">if</span>(!visited.containsKey(s))&#123;</span><br><span class="line">                        queue.offer(s);</span><br><span class="line"></span><br><span class="line">                        visited.put(s, <span class="keyword">true</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//双向BFS</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="使数组连续的最小操作数"><a href="#使数组连续的最小操作数" class="headerlink" title="使数组连续的最小操作数"></a>使数组连续的最小操作数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minOperations</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//要剪枝</span></span><br><span class="line">        <span class="keyword">int</span>[] bucket = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> i, j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> begin, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i&lt;nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] &gt;= end)&#123;</span><br><span class="line">                begin = nums[i];</span><br><span class="line">                end = nums[i] + nums.length;</span><br><span class="line">                <span class="keyword">for</span>(j = i; j &lt; nums.length &amp;&amp; nums[j] &lt; end; j++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(j - <span class="number">1</span> &gt;= i &amp;&amp; nums[j-<span class="number">1</span>] == nums[j])&#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    bucket[i]++;</span><br><span class="line">                    <span class="keyword">if</span>(bucket[i] &gt; max)&#123;</span><br><span class="line">                        max = bucket[i];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[i] == nums[i-<span class="number">1</span>])&#123;</span><br><span class="line">                    bucket[i] = bucket[i-<span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    bucket[i] = bucket[i-<span class="number">1</span>] - <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                end = nums[i] + nums.length;</span><br><span class="line">                <span class="keyword">for</span>(; j&lt;nums.length &amp;&amp; nums[j] &lt; end; j++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(j - <span class="number">1</span> &gt;= i &amp;&amp; nums[j-<span class="number">1</span>] == nums[j])&#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    bucket[i]++;</span><br><span class="line">                    <span class="keyword">if</span>(bucket[i] &gt; max)&#123;</span><br><span class="line">                        max = bucket[i];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> nums.length - max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//排序配合双指针统计你不会吗操</span></span><br></pre></td></tr></table></figure><h1 id="过去的垃圾代码"><a href="#过去的垃圾代码" class="headerlink" title="过去的垃圾代码"></a>过去的垃圾代码</h1><h2 id="10-正则表达式匹配"><a href="#10-正则表达式匹配" class="headerlink" title="10.正则表达式匹配"></a><a href="https://leetcode-cn.com/problems/regular-expression-matching/">10.正则表达式匹配</a></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isMatch</span><span class="params">(String s, String p)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//不能这样写代码，越写越复杂</span></span><br><span class="line">        <span class="keyword">int</span> m = s.length();</span><br><span class="line">        <span class="keyword">int</span> n = p.length();</span><br><span class="line">        <span class="keyword">if</span> (m == <span class="number">0</span> &amp;&amp; n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;LinkedList&lt;Integer&gt;&gt; pMatched = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            List&lt;Integer&gt; list = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">            pMatched.add((LinkedList&lt;Integer&gt;) list);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; p.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i + <span class="number">1</span> == p.length() || (i + <span class="number">1</span> &lt; p.length() &amp;&amp; p.charAt(i + <span class="number">1</span>) != <span class="string">&#x27;*&#x27;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (m == <span class="number">0</span> || (p.charAt(i) != <span class="string">&#x27;.&#x27;</span> &amp;&amp; p.charAt(i) != s.charAt(<span class="number">0</span>))) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    pMatched.get(<span class="number">0</span>).add(<span class="number">0</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (m == <span class="number">0</span> || (p.charAt(i) != s.charAt(<span class="number">0</span>) &amp;&amp; p.charAt(i) != <span class="string">&#x27;.&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> isMatch(s, p.substring(<span class="number">2</span>, n));</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">int</span> sLeft = <span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">if</span> (p.charAt(i) != <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">                            <span class="keyword">while</span> (sLeft &lt; m &amp;&amp; s.charAt(sLeft++) == p.charAt(i)) &#123;</span><br><span class="line">                                pMatched.get(<span class="number">0</span>).add(sLeft);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="keyword">while</span> (sLeft &lt; m) &#123;</span><br><span class="line">                                pMatched.get(<span class="number">0</span>).add(sLeft++);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    i++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            LinkedList prev;</span><br><span class="line">            <span class="keyword">if</span> (p.charAt(i - <span class="number">1</span>) == <span class="string">&#x27;*&#x27;</span>) &#123;</span><br><span class="line">                prev = pMatched.get(i - <span class="number">2</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                prev = pMatched.get(i - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (prev.isEmpty()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            LinkedList&lt;Integer&gt; cur = pMatched.get(i);</span><br><span class="line">            Iterator&lt;Integer&gt; itr = prev.iterator();</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> == p.length() || (i + <span class="number">1</span> &lt; p.length() &amp;&amp; p.charAt(i + <span class="number">1</span>) != <span class="string">&#x27;*&#x27;</span>)) &#123;</span><br><span class="line">                <span class="keyword">while</span> (itr.hasNext()) &#123;</span><br><span class="line">                    Integer next = itr.next();</span><br><span class="line">                    <span class="keyword">if</span> (p.charAt(i) != <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (next &lt; m - <span class="number">1</span> &amp;&amp; s.charAt(next + <span class="number">1</span>) == p.charAt(i)) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (!cur.contains(next + <span class="number">1</span>)) &#123;</span><br><span class="line">                                cur.add(next + <span class="number">1</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (next &lt; m -<span class="number">1</span> &amp;&amp; !cur.contains(next + <span class="number">1</span>)) &#123;</span><br><span class="line">                            cur.add(next + <span class="number">1</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> &lt; p.length() &amp;&amp; p.charAt(i + <span class="number">1</span>) == <span class="string">&#x27;*&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (p.charAt(i) != <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">                    <span class="keyword">while</span> (itr.hasNext()) &#123;</span><br><span class="line">                        Integer next = itr.next();</span><br><span class="line">                        cur.add(next);</span><br><span class="line">                        <span class="keyword">while</span> (next &lt; m - <span class="number">1</span> &amp;&amp; s.charAt(next + <span class="number">1</span>) == p.charAt(i)) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (!cur.contains(next + <span class="number">1</span>)) &#123;</span><br><span class="line">                                cur.add(next + <span class="number">1</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                            next++;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">while</span> (itr.hasNext()) &#123;</span><br><span class="line">                        Integer next = itr.next();</span><br><span class="line">                        cur.add(next);</span><br><span class="line">                        <span class="keyword">while</span> (next &lt; m - <span class="number">1</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (!cur.contains(next + <span class="number">1</span>)) &#123;</span><br><span class="line">                                cur.add(next + <span class="number">1</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                            next++;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                i++;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (p.charAt(n - <span class="number">1</span>) != <span class="string">&#x27;*&#x27;</span> &amp;&amp; pMatched.get(n - <span class="number">1</span>).contains(m - <span class="number">1</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (p.charAt(n - <span class="number">1</span>) == <span class="string">&#x27;*&#x27;</span> &amp;&amp; pMatched.get(n - <span class="number">2</span>).contains(m - <span class="number">1</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>dp：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isMatch</span><span class="params">(String s, String p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sLen = s.length(), pLen = p.length();</span><br><span class="line">        <span class="keyword">char</span>[] sChar = <span class="keyword">new</span> <span class="keyword">char</span>[sLen + <span class="number">2</span>], pChar = <span class="keyword">new</span> <span class="keyword">char</span>[pLen + <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;sLen+<span class="number">1</span>; i++)&#123;</span><br><span class="line">            sChar[i] = s.charAt(i-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;pLen+<span class="number">1</span>; i++)&#123;</span><br><span class="line">            pChar[i] = p.charAt(i-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">boolean</span>[][] dp = <span class="keyword">new</span> <span class="keyword">boolean</span>[pLen + <span class="number">2</span>][sLen + <span class="number">2</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;pLen+<span class="number">2</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j&lt;sLen+<span class="number">2</span>; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(pChar[i] &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; pChar[i] &lt;= <span class="string">&#x27;z&#x27;</span> &amp;&amp; (i+<span class="number">1</span> &gt;= pLen + <span class="number">1</span> || (i+<span class="number">1</span>&lt;pLen+<span class="number">1</span> &amp;&amp; pChar[i+<span class="number">1</span>] != <span class="string">&#x27;*&#x27;</span>)))&#123;</span><br><span class="line">                    dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>] == <span class="keyword">true</span> &amp;&amp; pChar[i] == sChar[j] ? <span class="keyword">true</span>: <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(pChar[i] &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; pChar[i] &lt;= <span class="string">&#x27;z&#x27;</span> &amp;&amp; i+<span class="number">1</span>&lt;pLen+<span class="number">1</span> &amp;&amp; pChar[i+<span class="number">1</span>] == <span class="string">&#x27;*&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(dp[i-<span class="number">1</span>][j-<span class="number">1</span>] == <span class="keyword">true</span>)&#123;</span><br><span class="line">                        dp[i+<span class="number">1</span>][j-<span class="number">1</span>] = <span class="keyword">true</span>;</span><br><span class="line">                        <span class="keyword">int</span> k = j;</span><br><span class="line">                        <span class="keyword">while</span>(k &lt; sLen + <span class="number">1</span> &amp;&amp; pChar[i] == sChar[k])&#123;</span><br><span class="line">                            dp[i+<span class="number">1</span>][k] = <span class="keyword">true</span>;</span><br><span class="line">                            k++;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//边界考虑</span></span><br><span class="line">                    <span class="comment">// if(dp[i-1][j] == true)&#123;</span></span><br><span class="line">                        <span class="comment">// dp[i+1][j] = true;</span></span><br><span class="line">                    <span class="comment">// &#125;    </span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">//数组两边各扩大1个单位 去除边界考虑</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(pChar[i] == <span class="string">&#x27;.&#x27;</span> &amp;&amp; (i+<span class="number">1</span> &gt;= pLen + <span class="number">1</span> || (i+<span class="number">1</span>&lt;pLen+<span class="number">1</span> &amp;&amp; pChar[i+<span class="number">1</span>] != <span class="string">&#x27;*&#x27;</span>)))&#123;</span><br><span class="line">                    dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>] == <span class="keyword">true</span> ? <span class="keyword">true</span>: <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(pChar[i] == <span class="string">&#x27;.&#x27;</span> &amp;&amp; i+<span class="number">1</span>&lt;pLen+<span class="number">1</span> &amp;&amp; pChar[i+<span class="number">1</span>] == <span class="string">&#x27;*&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(dp[i-<span class="number">1</span>][j-<span class="number">1</span>] == <span class="keyword">true</span>)&#123;</span><br><span class="line">                        <span class="keyword">int</span> k = j - <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">while</span>(k &lt; sLen + <span class="number">1</span>)&#123;</span><br><span class="line">                            dp[i+<span class="number">1</span>][k] = <span class="keyword">true</span>;</span><br><span class="line">                            k++;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[pLen][sLen];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>题解：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isMatch</span><span class="params">(String s, String p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = s.length();</span><br><span class="line">        <span class="keyword">int</span> n = p.length();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span>[][] f = <span class="keyword">new</span> <span class="keyword">boolean</span>[m + <span class="number">1</span>][n + <span class="number">1</span>];</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (p.charAt(j - <span class="number">1</span>) == <span class="string">&#x27;*&#x27;</span>) &#123;</span><br><span class="line">                    f[i][j] = f[i][j - <span class="number">2</span>];</span><br><span class="line">                    <span class="keyword">if</span> (matches(s, p, i, j - <span class="number">1</span>)) &#123;</span><br><span class="line">                        f[i][j] = f[i][j] || f[i - <span class="number">1</span>][j];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (matches(s, p, i, j)) &#123;</span><br><span class="line">                        f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[m][n];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(String s, String p, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (p.charAt(j - <span class="number">1</span>) == <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.charAt(i - <span class="number">1</span>) == p.charAt(j - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">作者：LeetCode-Solution</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/regular-expression-matching/solution/zheng-ze-biao-da-shi-pi-pei-by-leetcode-solution/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure><h2 id="戳气球"><a href="#戳气球" class="headerlink" title="戳气球"></a><a href="https://leetcode-cn.com/problems/burst-balloons/">戳气球</a></h2><p>贪心：（没写出来）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxCoins</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//fail</span></span><br><span class="line">        <span class="comment">//贪心需要较强的数学证明</span></span><br><span class="line">        <span class="keyword">if</span>(nums.length == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        PriorityQueue&lt;ValToIndex&gt; greedy = <span class="keyword">new</span> PriorityQueue&lt;&gt;((o1, o2) -&gt; o1.val - o2.val);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;nums.length - <span class="number">1</span>; i++)&#123;</span><br><span class="line">            greedy.add(<span class="keyword">new</span> ValToIndex(nums[i], i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length][<span class="number">2</span>];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = Integer.MIN_VALUE;</span><br><span class="line">        dp[nums.length-<span class="number">1</span>][<span class="number">1</span>] = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;nums.length; i++)&#123;</span><br><span class="line">            dp[i][<span class="number">0</span>] = i-<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = nums.length - <span class="number">2</span>; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">            dp[i][<span class="number">1</span>] = i+<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(!greedy.isEmpty())&#123;</span><br><span class="line">            ValToIndex pair = greedy.poll();</span><br><span class="line">            <span class="keyword">int</span> index = pair.index;</span><br><span class="line">            <span class="keyword">int</span> left = dp[index][<span class="number">0</span>], right = dp[index][<span class="number">1</span>];</span><br><span class="line">            ret += pair.val * nums[left] * nums[right];</span><br><span class="line">            dp[left][<span class="number">1</span>] = dp[index][<span class="number">1</span>];</span><br><span class="line">            dp[right][<span class="number">0</span>] = dp[index][<span class="number">0</span>]; </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(nums[<span class="number">0</span>] &lt;= nums[nums.length-<span class="number">1</span>])&#123;</span><br><span class="line">            ret += nums[<span class="number">0</span>] * nums[dp[<span class="number">0</span>][<span class="number">1</span>]];</span><br><span class="line">            ret += nums[nums.length-<span class="number">1</span>];</span><br><span class="line">        &#125;        </span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            ret += nums[nums.length-<span class="number">1</span>] * nums[dp[nums.length-<span class="number">1</span>][<span class="number">0</span>]];</span><br><span class="line">            ret += nums[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ValToIndex</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> val;</span><br><span class="line">        <span class="keyword">int</span> index;</span><br><span class="line">        </span><br><span class="line">        ValToIndex()&#123;&#125;</span><br><span class="line">        ValToIndex(<span class="keyword">int</span> val, <span class="keyword">int</span> index)&#123;</span><br><span class="line">            <span class="keyword">this</span>.val = val;</span><br><span class="line">            <span class="keyword">this</span>.index = index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>记忆化搜索（自顶向下）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[][] dp;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxCoins</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//分治 &amp;&amp; dp</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//记忆化搜索</span></span><br><span class="line">        dp = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length + <span class="number">2</span>][nums.length + <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;nums.length+<span class="number">2</span>; i++)&#123;</span><br><span class="line">            Arrays.fill(dp[i], -<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] expandNums = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length + <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;nums.length + <span class="number">1</span>; i++)&#123;</span><br><span class="line">            expandNums[i] = nums[i-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        expandNums[<span class="number">0</span>] = expandNums[nums.length + <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> subMaxCoins(expandNums, <span class="number">0</span>, expandNums.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Divide and Conquer</span></span><br><span class="line">    <span class="comment">//开区间(i, j)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subMaxCoins</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="comment">//如果不记忆化搜索，栈会溢出，我觉得，没试</span></span><br><span class="line">        <span class="keyword">if</span>(dp[l][r] != -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> dp[l][r];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = l + <span class="number">1</span>; i &lt; r; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> subMax = subMaxCoins(nums, l, i) + nums[l] * nums[i] * nums[r] + subMaxCoins(nums, i, r);</span><br><span class="line">            <span class="keyword">if</span>(subMax &gt; max)&#123;</span><br><span class="line">                max = subMax;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        dp[l][r] = max;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>dp（自底向上）（效率高不少）：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxCoins</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//分治 &amp;&amp; dp</span></span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">2</span>][n + <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n+<span class="number">2</span>; i++)&#123;</span><br><span class="line">            Arrays.fill(dp[i], <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] expandNums = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;n + <span class="number">1</span>; i++)&#123;</span><br><span class="line">            expandNums[i] = nums[i-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        expandNums[<span class="number">0</span>] = expandNums[n + <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i&lt;n+<span class="number">2</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i - <span class="number">2</span>; j&gt;=<span class="number">0</span>; j--)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = j + <span class="number">1</span>; k&lt;i ; k++)&#123;</span><br><span class="line">                    dp[j][i] = Math.max(dp[j][i], expandNums[k] * expandNums[i] * expandNums[j] + dp[j][k] + dp[k][i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][n+<span class="number">1</span>]; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="预测赢家"><a href="#预测赢家" class="headerlink" title="预测赢家"></a><a href="https://leetcode-cn.com/problems/predict-the-winner/">预测赢家</a></h2><p>记忆化搜索：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[][][] dp;</span><br><span class="line">    <span class="keyword">int</span>[][] sumDp;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">PredictTheWinner</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//记忆化搜索</span></span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        dp = <span class="keyword">new</span> <span class="keyword">int</span>[n][n][<span class="number">2</span>];</span><br><span class="line">        sumDp = <span class="keyword">new</span> <span class="keyword">int</span>[n][n];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//剩余总分</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> pre = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j&lt;n; j++)&#123;</span><br><span class="line">                pre += nums[j];</span><br><span class="line">                sumDp[i][j] = pre;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;n; j++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k&lt;<span class="number">2</span>; k++)&#123;</span><br><span class="line">                    dp[i][j][k] = -<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> subProSolve(nums, <span class="number">0</span>, n-<span class="number">1</span>, <span class="number">0</span>) &gt;= sumDp[<span class="number">0</span>][n-<span class="number">1</span>] - subProSolve(nums, <span class="number">0</span>, n-<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subProSolve</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> who)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">            <span class="keyword">return</span> nums[l];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(dp[l][r][who] != -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> dp[l][r][who];</span><br><span class="line">        &#125;        </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[l][r][who] = Math.max(nums[l] + sumDp[l+<span class="number">1</span>][r] - subProSolve(nums, l+<span class="number">1</span>, r, <span class="number">1</span>-who), nums[r] + sumDp[l][r-<span class="number">1</span>] - subProSolve(nums, l, r-<span class="number">1</span>, <span class="number">1</span>-who));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>dp(自底向上，同样快不少)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">PredictTheWinner</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//dp        </span></span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">int</span>[][] sumDp = <span class="keyword">new</span> <span class="keyword">int</span>[n][n];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> pre = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j&lt;n; j++)&#123;</span><br><span class="line">                pre += nums[j];</span><br><span class="line">                sumDp[i][j] = pre;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//dp 逆过程</span></span><br><span class="line">        <span class="keyword">int</span>[][][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[n][n][<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">int</span> whoLast = <span class="number">1</span> - n % <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            dp[i][i][whoLast] = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        whoLast = <span class="number">1</span> - whoLast;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i&lt;= n; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>, k; (k = j + i - <span class="number">1</span>)&lt;n; j++)&#123;</span><br><span class="line">                dp[j][k][whoLast] = Math.max(nums[j] + sumDp[j+<span class="number">1</span>][k] - dp[j+<span class="number">1</span>][k][<span class="number">1</span>-whoLast], nums[k] + sumDp[j][k-<span class="number">1</span>] - dp[j][k-<span class="number">1</span>][<span class="number">1</span>-whoLast]);</span><br><span class="line">            &#125;</span><br><span class="line">            whoLast = <span class="number">1</span>-whoLast;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][n-<span class="number">1</span>][<span class="number">0</span>] &gt;= sumDp[<span class="number">0</span>][n-<span class="number">1</span>] - dp[<span class="number">0</span>][n-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>递归（与轮次无关概念）：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">PredictTheWinner</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> play(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>) &gt;= <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">play</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (lo &gt; hi) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> planA = nums[lo] - play(nums, lo + <span class="number">1</span>, hi);</span><br><span class="line">        <span class="keyword">int</span> planB = nums[hi] - play(nums, lo, hi - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> Math.max(planA, planB);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>dp（得分收益，与谁先手无关，空间优化）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">PredictTheWinner</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> length = nums.length;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[length][length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            dp[i][i] = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = length - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; length; j++) &#123;</span><br><span class="line">                dp[i][j] = Math.max(nums[i] - dp[i + <span class="number">1</span>][j], nums[j] - dp[i][j - <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][length - <span class="number">1</span>] &gt;= <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="547：省份数量"><a href="#547：省份数量" class="headerlink" title="547：省份数量"></a>547：<a href="https://leetcode-cn.com/problems/number-of-provinces/">省份数量</a></h2><p>这种2020年10月写的垃圾代码真的看不下去：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findCircleNum</span><span class="params">(vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt;&amp; M)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> s=M.<span class="built_in">size</span>();</span><br><span class="line">            <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">visited</span><span class="params">(s,<span class="number">0</span>)</span></span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s;++i)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;s;++j)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(M[i][j]!=<span class="number">0</span>&amp;&amp;i!=j&amp;&amp;visited[j]==<span class="number">0</span>)&#123;                    </span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;s;++k)&#123;                        </span><br><span class="line">                            M[i][k]+=M[j][k];</span><br><span class="line">                            M[j][k]=<span class="number">0</span>;</span><br><span class="line">                            visited[j]=<span class="number">1</span>;</span><br><span class="line">                        &#125;                </span><br><span class="line">                        j=<span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;        </span><br><span class="line">            <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s;++i)&#123;</span><br><span class="line">                <span class="keyword">int</span> count=<span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;s;++j)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(M[i][j]!=<span class="number">0</span>)</span><br><span class="line">                        count++;</span><br><span class="line">                &#125;            </span><br><span class="line">                <span class="keyword">if</span>(count!=<span class="number">0</span>)</span><br><span class="line">                    ans++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>并查集：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] parent;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findCircleNum</span><span class="params">(<span class="keyword">int</span>[][] isConnected)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = isConnected.length;</span><br><span class="line">        parent = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        <span class="comment">//initial</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            parent[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j&lt;n; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(isConnected[i][j] == <span class="number">1</span>)&#123;</span><br><span class="line">                    join(i, j);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(parent[i] == i)&#123;</span><br><span class="line">                ret++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> e)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> parent[e] = e == parent[e] ? e: find(parent[e]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">join</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> p1 = find(i);</span><br><span class="line">        <span class="keyword">int</span> p2 = find(j);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(p1 != p2)&#123;</span><br><span class="line">            parent[p1] = p2;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>dfs：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span>[] visited;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findCircleNum</span><span class="params">(<span class="keyword">int</span>[][] isConnected)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = isConnected.length;</span><br><span class="line">        visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[n];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(visited[i] == <span class="keyword">false</span>)&#123;</span><br><span class="line">                dfs(isConnected, i);</span><br><span class="line">                ret++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;        </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span>[][] isConnected, <span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">        visited[v] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;isConnected.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(visited[i] == <span class="keyword">false</span> &amp;&amp; isConnected[v][i] == <span class="number">1</span>)&#123;</span><br><span class="line">                dfs(isConnected, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>bfs(bfs为什么用来递归啊)概念不够清晰：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span>[] visited;</span><br><span class="line">    Queue&lt;Integer&gt; q = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findCircleNum</span><span class="params">(<span class="keyword">int</span>[][] isConnected)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = isConnected.length;</span><br><span class="line">        visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[n];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(visited[i] == <span class="keyword">false</span>)&#123;</span><br><span class="line">                bfs(isConnected, i);</span><br><span class="line">                ret++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;        </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span>[][] isConnected, <span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">        visited[v] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;isConnected.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(visited[i] == <span class="keyword">false</span> &amp;&amp; isConnected[v][i] == <span class="number">1</span>)&#123;</span><br><span class="line">                visited[i] = <span class="keyword">true</span>;</span><br><span class="line">                q.offer(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(q.peek() != <span class="keyword">null</span>)&#123;</span><br><span class="line">            bfs(isConnected, q.poll());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>bfs：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findCircleNum</span><span class="params">(<span class="keyword">int</span>[][] isConnected)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = isConnected.length;</span><br><span class="line">        <span class="keyword">boolean</span>[] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[n];</span><br><span class="line">        Queue&lt;Integer&gt; q = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(visited[i] == <span class="keyword">false</span>)&#123;</span><br><span class="line">                q.offer(i);</span><br><span class="line">                ret++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span>(q.peek()!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">int</span> v = q.poll();</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;n; j++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(visited[j] == <span class="keyword">false</span> &amp;&amp; isConnected[v][j] == <span class="number">1</span>)&#123;</span><br><span class="line">                        visited[j] = <span class="keyword">true</span>;</span><br><span class="line">                        q.offer(j);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;        </span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="有效的括号"><a href="#有效的括号" class="headerlink" title="有效的括号"></a><a href="https://leetcode-cn.com/problems/valid-parentheses/">有效的括号</a></h2><p>逻辑爆炸写法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index = -<span class="number">1</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> ret = <span class="keyword">true</span>;</span><br><span class="line">        ret = match(s, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">match</span><span class="params">(String s, <span class="keyword">char</span> symbolR)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(index + <span class="number">1</span> &gt;= s.length())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">boolean</span> ret = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">while</span>(index + <span class="number">1</span> &lt; s.length() &amp;&amp; (s.charAt(index+<span class="number">1</span>) == <span class="string">&#x27;(&#x27;</span> || s.charAt(index+<span class="number">1</span>) == <span class="string">&#x27;[&#x27;</span> || s.charAt(index+<span class="number">1</span>) == <span class="string">&#x27;&#123;&#x27;</span>))&#123;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(index+<span class="number">1</span>) == <span class="string">&#x27;(&#x27;</span>)&#123;</span><br><span class="line">                ++index;</span><br><span class="line">                ret &amp;= match(s, <span class="string">&#x27;)&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s.charAt(index+<span class="number">1</span>) == <span class="string">&#x27;[&#x27;</span>)&#123;</span><br><span class="line">                ++index;</span><br><span class="line">                ret &amp;= match(s, <span class="string">&#x27;]&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s.charAt(index+<span class="number">1</span>) == <span class="string">&#x27;&#123;&#x27;</span>)&#123;</span><br><span class="line">                ++index;</span><br><span class="line">                ret &amp;= match(s, <span class="string">&#x27;&#125;&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(index + <span class="number">1</span> &gt;= s.length())&#123;</span><br><span class="line">            <span class="keyword">if</span>(symbolR == <span class="string">&#x27;*&#x27;</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> ret &amp; <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;            </span><br><span class="line">        <span class="keyword">if</span>(s.charAt(index+<span class="number">1</span>) != symbolR)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ++index;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>栈（复用性很差的代码）：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        Deque&lt;Character&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span>[] cArr = s.toCharArray();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;cArr.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(cArr[i] == <span class="string">&#x27;(&#x27;</span> || cArr[i] == <span class="string">&#x27;[&#x27;</span> || cArr[i] == <span class="string">&#x27;&#123;&#x27;</span>)&#123;</span><br><span class="line">                stack.push(cArr[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(cArr[i] == <span class="string">&#x27;)&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(!stack.isEmpty() &amp;&amp; stack.peek() == <span class="string">&#x27;(&#x27;</span>)&#123;</span><br><span class="line">                        stack.pop();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(cArr[i] == <span class="string">&#x27;]&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(!stack.isEmpty() &amp;&amp; stack.peek() == <span class="string">&#x27;[&#x27;</span>)&#123;</span><br><span class="line">                        stack.pop();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(cArr[i] == <span class="string">&#x27;&#125;&#x27;</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(!stack.isEmpty() &amp;&amp; stack.peek() == <span class="string">&#x27;&#123;&#x27;</span>)&#123;</span><br><span class="line">                        stack.pop();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(stack.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>栈（优化）（自己创建数据结构效率更高）：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="keyword">if</span>(n % <span class="number">2</span> != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Map&lt;Character, Character&gt; pairs = <span class="keyword">new</span> HashMap&lt;&gt;()&#123;&#123;</span><br><span class="line">            put(<span class="string">&#x27;)&#x27;</span>,<span class="string">&#x27;(&#x27;</span>);</span><br><span class="line">            put(<span class="string">&#x27;]&#x27;</span>,<span class="string">&#x27;[&#x27;</span>);</span><br><span class="line">            put(<span class="string">&#x27;&#125;&#x27;</span>,<span class="string">&#x27;&#123;&#x27;</span>);</span><br><span class="line">        &#125;&#125;;</span><br><span class="line"></span><br><span class="line">        Deque&lt;Character&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">char</span> c = s.charAt(i);</span><br><span class="line">            <span class="keyword">if</span>(pairs.containsKey(c))&#123;</span><br><span class="line">                <span class="keyword">if</span>(stack.isEmpty() || stack.peek() != pairs.get(c))&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                stack.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                stack.push(c);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="网络延时时间"><a href="#网络延时时间" class="headerlink" title="网络延时时间"></a><a href="https://leetcode-cn.com/problems/network-delay-time/">网络延时时间</a></h2><p><strong>dijkstra：</strong></p><p>优先队列的问题导致最后一个样例过不去：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">//单源最短路径算法 冲冲冲！</span></span><br><span class="line">    <span class="keyword">int</span>[][] matrix;</span><br><span class="line">    <span class="keyword">int</span>[] dist;</span><br><span class="line">    <span class="keyword">boolean</span>[] visited;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">networkDelayTime</span><span class="params">(<span class="keyword">int</span>[][] times, <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        initialMatrix(times, n);</span><br><span class="line">        dijkstra(times, n, k);</span><br><span class="line">        <span class="keyword">return</span> getAns();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//初始化邻接矩阵</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialMatrix</span><span class="params">(<span class="keyword">int</span>[][] times, <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">        matrix = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>][n+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;=n; i++)&#123;</span><br><span class="line">            Arrays.fill(matrix[i], Integer.MAX_VALUE);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;times.length; i++)&#123;</span><br><span class="line">            matrix[times[i][<span class="number">0</span>]][times[i][<span class="number">1</span>]] = times[i][<span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//迪杰斯特拉算法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span>[][] times, <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">        dist = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>];</span><br><span class="line">        visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[n+<span class="number">1</span>];</span><br><span class="line">        Arrays.fill(dist, Integer.MAX_VALUE);</span><br><span class="line">        dist[k] = <span class="number">0</span>;</span><br><span class="line">        Queue&lt;Integer&gt; minEdge = <span class="keyword">new</span> PriorityQueue&lt;&gt;((o1, o2) -&gt; dist[o1] - dist[o2]);            </span><br><span class="line">        minEdge.offer(k);</span><br><span class="line">        <span class="keyword">while</span>(!minEdge.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">int</span> v = minEdge.poll();</span><br><span class="line">            visited[v] = <span class="keyword">true</span>;</span><br><span class="line">            <span class="comment">//邻接矩阵-&gt;所以要遍历n个</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;=n; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(visited[i] == <span class="keyword">false</span> &amp;&amp; matrix[v][i] != Integer.MAX_VALUE &amp;&amp; dist[v] + matrix[v][i] &lt; dist[i])&#123;</span><br><span class="line">                    dist[i] = dist[v] + matrix[v][i];</span><br><span class="line">                    minEdge.offer(i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAns</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> max = Integer.MIN_VALUE;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;dist.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(dist[i] &gt; max)&#123;</span><br><span class="line">                max = dist[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max == Integer.MAX_VALUE ? -<span class="number">1</span>: max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改后：</p><figure class="highlight plaintext"><figcaption><span>ava</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    //单源最短路径算法 冲冲冲！</span><br><span class="line">    int[][] matrix;</span><br><span class="line">    int[] dist;</span><br><span class="line">    boolean[] visited;</span><br><span class="line">    public int networkDelayTime(int[][] times, int n, int k) &#123;</span><br><span class="line">        initialMatrix(times, n);</span><br><span class="line">        dijkstra(n, k);</span><br><span class="line">        return getAns();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //初始化邻接矩阵</span><br><span class="line">    public void initialMatrix(int[][] times, int n)&#123;</span><br><span class="line">        matrix = new int[n+1][n+1];</span><br><span class="line">        for(int i = 0; i&lt;=n; i++)&#123;</span><br><span class="line">            Arrays.fill(matrix[i], Integer.MAX_VALUE);</span><br><span class="line">        &#125;</span><br><span class="line">        for(int i = 0; i&lt;times.length; i++)&#123;</span><br><span class="line">            matrix[times[i][0]][times[i][1]] = times[i][2];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //迪杰斯特拉算法</span><br><span class="line">    public void dijkstra(int n, int k)&#123;</span><br><span class="line">        dist = new int[n+1];</span><br><span class="line">        visited = new boolean[n+1];</span><br><span class="line">        Arrays.fill(dist, Integer.MAX_VALUE);</span><br><span class="line">        dist[k] = 0;</span><br><span class="line">        Queue&lt;Node&gt; minEdge = new PriorityQueue&lt;&gt;((o1, o2) -&gt; o1.dist - o2.dist);            </span><br><span class="line">        minEdge.offer(new Node(k, 0));</span><br><span class="line">        while(!minEdge.isEmpty())&#123;</span><br><span class="line">            int v = minEdge.poll().v;</span><br><span class="line">            if(visited[v])&#123;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line">            visited[v] = true;</span><br><span class="line">            //邻接矩阵-&gt;所以要遍历n个</span><br><span class="line">            for(int i = 1; i&lt;=n; i++)&#123;</span><br><span class="line">                //visited[i] == false 哪里有问题啦啊 可能在松弛的时候会加很多次相同的点</span><br><span class="line">                //优先队列的问题 别说了</span><br><span class="line">                if(visited[i] == false &amp;&amp; matrix[v][i] != Integer.MAX_VALUE &amp;&amp; dist[v] + matrix[v][i] &lt; dist[i])&#123;</span><br><span class="line">                    dist[i] = dist[v] + matrix[v][i];</span><br><span class="line">                    minEdge.offer(new Node(i, dist[i]));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAns()&#123;</span><br><span class="line">        int max = Integer.MIN_VALUE;</span><br><span class="line">        for(int i = 1; i&lt;dist.length; i++)&#123;</span><br><span class="line">            if(dist[i] &gt; max)&#123;</span><br><span class="line">                max = dist[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return max == Integer.MAX_VALUE ? -1: max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private class Node&#123;</span><br><span class="line">        int v;</span><br><span class="line">        int dist;</span><br><span class="line"></span><br><span class="line">        Node(int v, int dist)&#123;</span><br><span class="line">            this.v = v;</span><br><span class="line">            this.dist = dist;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>bellman_fold：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">networkDelayTime</span><span class="params">(<span class="keyword">int</span>[][] times, <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dist = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>];</span><br><span class="line">        Arrays.fill(dist, Integer.MAX_VALUE / <span class="number">2</span>);</span><br><span class="line">        dist[k] = <span class="number">0</span>;</span><br><span class="line">        dist[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        bellmanFold(dist, times);</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;=n; i++)&#123;</span><br><span class="line">            ret = Math.max(ret, dist[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret == Integer.MAX_VALUE / <span class="number">2</span> ? -<span class="number">1</span>: ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//Bellman_ford(解决负权最短路径)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bellmanFold</span><span class="params">(<span class="keyword">int</span>[] dist, <span class="keyword">int</span>[][] times)</span></span>&#123;</span><br><span class="line">        <span class="comment">//迭代n-1轮 每轮松弛所有的边 O((n-1)*E)</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;dist.length; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;times.length; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(dist[times[j][<span class="number">0</span>]] + times[j][<span class="number">2</span>] &lt; dist[times[j][<span class="number">1</span>]])&#123;</span><br><span class="line">                    dist[times[j][<span class="number">1</span>]] = dist[times[j][<span class="number">0</span>]] + times[j][<span class="number">2</span>];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//判断是否存在负环</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>认真刷困难</title>
      <link href="/2022/01/04/%E8%AE%A4%E7%9C%9F%E5%88%B7%E5%9B%B0%E9%9A%BE/"/>
      <url>/2022/01/04/%E8%AE%A4%E7%9C%9F%E5%88%B7%E5%9B%B0%E9%9A%BE/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="还原原数组"><a href="#还原原数组" class="headerlink" title="还原原数组"></a><a href="https://leetcode-cn.com/problems/recover-the-original-array/">还原原数组</a></h1><ul><li>找到可能的K值，然后枚举《==》缩小范围，然后枚举</li><li>感觉时间耗在算HashCode还是new对象+垃圾回收上了？，真的离谱子</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] recoverArray(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        <span class="comment">//find possible K</span></span><br><span class="line">        Set&lt;Integer&gt; survive = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        Set&lt;Integer&gt; alive;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> len = nums.length;</span><br><span class="line">        <span class="keyword">int</span> sub;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> i, j;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i&lt;len; i++)&#123;</span><br><span class="line">            sub = Math.abs(nums[<span class="number">0</span>] - nums[i]);</span><br><span class="line">            <span class="keyword">if</span>(sub % <span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                survive.add(sub / <span class="number">2</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i&lt;len; i++)&#123;</span><br><span class="line">            alive = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>; j&lt;len; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i == j)&#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                sub = Math.abs(nums[i] - nums[j]);</span><br><span class="line">                <span class="keyword">if</span>(sub % <span class="number">2</span> == <span class="number">0</span> &amp;&amp; survive.contains(sub / <span class="number">2</span>))&#123;</span><br><span class="line">                    alive.add(sub / <span class="number">2</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            survive = alive;</span><br><span class="line">            <span class="keyword">if</span>(survive.size() &lt; <span class="number">3</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//survive has all possible K</span></span><br><span class="line">        <span class="comment">//now test K</span></span><br><span class="line"></span><br><span class="line">        List&lt;Pair&lt;Integer, Integer&gt;&gt; nPairs;</span><br><span class="line">        Map&lt;Integer, Integer&gt; waitMatch;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> matched, val;</span><br><span class="line">        <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[len / <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="keyword">for</span>(Integer k: survive)&#123;</span><br><span class="line">            <span class="keyword">if</span>(k == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            matched = <span class="number">0</span>;</span><br><span class="line">            nPairs = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            waitMatch = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(i = <span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(waitMatch.containsKey(nums[i]) &amp;&amp; waitMatch.get(nums[i]) != <span class="number">0</span>)&#123;</span><br><span class="line">                    val = waitMatch.get(nums[i]);</span><br><span class="line">                    <span class="keyword">if</span>(val &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                        waitMatch.put(nums[i], val - <span class="number">1</span>);</span><br><span class="line">                        nPairs.add(<span class="keyword">new</span> Pair&lt;&gt;(nums[i] - <span class="number">2</span> * k, nums[i]));</span><br><span class="line">                        matched++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(waitMatch.containsKey(nums[i] + <span class="number">2</span> * k))&#123;</span><br><span class="line">                        val = waitMatch.get(nums[i] + <span class="number">2</span> * k);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span>&#123;</span><br><span class="line">                        val = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    waitMatch.put(nums[i] + <span class="number">2</span> * k, val + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(matched == len / <span class="number">2</span>)&#123;</span><br><span class="line">                <span class="comment">//得到n个配对-&gt;可行方案</span></span><br><span class="line">                <span class="keyword">for</span>(i = <span class="number">0</span>; i&lt;len / <span class="number">2</span>; i++)&#123;</span><br><span class="line">                    res[i] = (nPairs.get(i).getKey() + nPairs.get(i).getValue()) / <span class="number">2</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="标程"><a href="#标程" class="headerlink" title="标程"></a>标程</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] recoverArray(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">int</span> p = n / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span>[] a = <span class="keyword">new</span> <span class="keyword">int</span>[p];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (valid(nums, i, a)) &#123;</span><br><span class="line">                <span class="keyword">return</span> a;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">valid</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> hi, <span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> d = nums[hi] - nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> (d == <span class="number">0</span> || d % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">boolean</span>[] mark = <span class="keyword">new</span> <span class="keyword">boolean</span>[n];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> lo = <span class="number">0</span>, i = <span class="number">0</span>; lo &lt; n; lo++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mark[lo]) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (hi &lt; n &amp;&amp; nums[hi] - nums[lo] &lt; d) &#123;</span><br><span class="line">                hi++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (hi == n || nums[hi] - nums[lo] &gt; d) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                a[i++] = nums[lo] + d / <span class="number">2</span>;</span><br><span class="line">                mark[hi++] = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="一个区间内所有数乘积的缩写"><a href="#一个区间内所有数乘积的缩写" class="headerlink" title="一个区间内所有数乘积的缩写"></a><a href="https://leetcode-cn.com/problems/abbreviating-the-product-of-a-range/">一个区间内所有数乘积的缩写</a></h1><ul><li>这道题比想象中难，关乎于极端情况和一般情况下的误差分析，数学分析较强</li></ul><h1 id="使数组K递增的最少操作次数"><a href="#使数组K递增的最少操作次数" class="headerlink" title="使数组K递增的最少操作次数"></a><a href="https://leetcode-cn.com/problems/minimum-operations-to-make-the-array-k-increasing/">使数组K递增的最少操作次数</a></h1><ul><li>太简单了，根本不给错误的机会</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">kIncreasing</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;k; i++)&#123;</span><br><span class="line">            res += kLIS(arr, k, i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">kLIS</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> k, <span class="keyword">int</span> start)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = arr.length % k  == <span class="number">0</span>? arr.length / k: arr.length / k + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span>[] LIS = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> r = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = start; i&lt;arr.length; i += k, count++)&#123;</span><br><span class="line">            <span class="keyword">int</span> pos = find(LIS, r, arr[i]);</span><br><span class="line">            LIS[pos] = arr[i];</span><br><span class="line">            <span class="keyword">if</span>(pos &gt; r)&#123;</span><br><span class="line">                r = pos;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> count - (r + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span>[] LIS, <span class="keyword">int</span> bound, <span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>, r = bound, mid;</span><br><span class="line">        <span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">            mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(LIS[mid] == val)&#123;</span><br><span class="line">                l++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(LIS[mid] &gt; val)&#123;</span><br><span class="line">                r = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                l = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="用邮票贴满网格图"><a href="#用邮票贴满网格图" class="headerlink" title="用邮票贴满网格图"></a><a href="https://leetcode-cn.com/problems/stamping-the-grid/">用邮票贴满网格图</a></h1><ul><li>其实是蛮简单的，就是全靠dp的代码有点晦涩。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">//[[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1]]</span></span><br><span class="line">    <span class="comment">//9</span></span><br><span class="line">    <span class="comment">//4</span></span><br><span class="line">    <span class="comment">//我还以为邮票可以翻折，吓死我了</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">possibleToStamp</span><span class="params">(<span class="keyword">int</span>[][] grid, <span class="keyword">int</span> stampHeight, <span class="keyword">int</span> stampWidth)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = grid.length, n = grid[<span class="number">0</span>].length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (stampHeight &gt; m || stampWidth &gt; n) &#123;</span><br><span class="line">            <span class="comment">//一开始没注意到全部被占据的情况</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;m; i++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;n; j++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(grid[i][j] == <span class="number">0</span>)&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//dp是否以i，j坐标为邮票左上角放置邮票</span></span><br><span class="line">        <span class="keyword">boolean</span>[][] canLocate = <span class="keyword">new</span> <span class="keyword">boolean</span>[m - stampHeight + <span class="number">1</span>][n - stampWidth + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span>[][] helplerStrip = <span class="keyword">new</span> <span class="keyword">int</span>[m - stampHeight + <span class="number">1</span>][n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m - stampHeight + <span class="number">1</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; stampHeight; k++) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (grid[i + k][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                            helplerStrip[<span class="number">0</span>][j]++;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    helplerStrip[i][j] = helplerStrip[i - <span class="number">1</span>][j];</span><br><span class="line">                    <span class="keyword">if</span> (grid[i - <span class="number">1</span>][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                        helplerStrip[i][j]--;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (grid[i + stampHeight - <span class="number">1</span>][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                        helplerStrip[i][j]++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> occupiedCount;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m - stampHeight + <span class="number">1</span>; i++) &#123;</span><br><span class="line">            occupiedCount = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n - stampWidth + <span class="number">1</span>; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (j == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; stampWidth; k++) &#123;</span><br><span class="line">                        occupiedCount += helplerStrip[i][k];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    occupiedCount = occupiedCount - helplerStrip[i][j - <span class="number">1</span>] + helplerStrip[i][j + stampWidth - <span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (occupiedCount == <span class="number">0</span>) &#123;</span><br><span class="line">                    canLocate[i][j] = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//dp是否i，j可覆盖到</span></span><br><span class="line">        <span class="keyword">boolean</span>[][] canCover = <span class="keyword">new</span> <span class="keyword">boolean</span>[m][n];</span><br><span class="line">        <span class="keyword">int</span>[][] helplerCover = <span class="keyword">new</span> <span class="keyword">int</span>[m + m - stampHeight + <span class="number">1</span>][n - stampWidth + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n - stampWidth + <span class="number">1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m + m - stampHeight + <span class="number">1</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i + stampHeight - m &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    helplerCover[i][j] = helplerCover[i - <span class="number">1</span>][j];</span><br><span class="line">                    <span class="keyword">if</span> (i - m - <span class="number">1</span> &gt;= <span class="number">0</span> &amp;&amp; canLocate[i - m - <span class="number">1</span>][j]) &#123;</span><br><span class="line">                        helplerCover[i][j]--;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (i - m + stampHeight - <span class="number">1</span> &lt; m - stampHeight + <span class="number">1</span> &amp;&amp; canLocate[i - m + stampHeight - <span class="number">1</span>][j]) &#123;</span><br><span class="line">                        helplerCover[i][j]++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> coveredCount;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            coveredCount = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (j == <span class="number">0</span>) &#123;</span><br><span class="line">                    coveredCount += helplerCover[i + m - stampHeight + <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (j &gt;= stampWidth) &#123;</span><br><span class="line">                        coveredCount -= helplerCover[i + m - stampHeight + <span class="number">1</span>][j - stampWidth];</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (j &lt; n - stampWidth + <span class="number">1</span>) &#123;</span><br><span class="line">                        coveredCount += helplerCover[i + m - stampHeight + <span class="number">1</span>][j];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (coveredCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    canCover[i][j] = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] == <span class="number">0</span> &amp;&amp; !canCover[i][j]) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="标程-二维数组前缀和-二位差分数组"><a href="#标程-二维数组前缀和-二位差分数组" class="headerlink" title="标程(二维数组前缀和+二位差分数组)"></a>标程(二维数组前缀和+二位差分数组)</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">possibleToStamp</span><span class="params">(vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; &amp;grid, <span class="keyword">int</span> stampHeight, <span class="keyword">int</span> stampWidth)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = grid.<span class="built_in">size</span>(), n = grid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; <span class="built_in">sum</span>(m + <span class="number">1</span>, vector&lt;<span class="keyword">int</span>&gt;(n + <span class="number">1</span>)), <span class="built_in">diff</span>(m + <span class="number">1</span>, vector&lt;<span class="keyword">int</span>&gt;(n + <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123; <span class="comment">// grid 的二维前缀和</span></span><br><span class="line">                sum[i + <span class="number">1</span>][j + <span class="number">1</span>] = sum[i + <span class="number">1</span>][j] + sum[i][j + <span class="number">1</span>] - sum[i][j] + grid[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">                <span class="keyword">int</span> x = i + stampHeight, y = j + stampWidth; <span class="comment">// 注意这是矩形右下角横纵坐标都 +1 后的位置</span></span><br><span class="line">                <span class="keyword">if</span> (x &lt;= m &amp;&amp; y &lt;= n &amp;&amp; sum[x][y] - sum[x][j] - sum[i][y] + sum[i][j] == <span class="number">0</span>) &#123;</span><br><span class="line">                    ++diff[i][j];</span><br><span class="line">                    --diff[i][y];</span><br><span class="line">                    --diff[x][j];</span><br><span class="line">                    ++diff[x][y]; <span class="comment">// 更新二维差分</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 还原二维差分矩阵对应的计数矩阵，这里用滚动数组实现</span></span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">cnt</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">pre</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">                cnt[j + <span class="number">1</span>] = cnt[j] + pre[j + <span class="number">1</span>] - pre[j] + diff[i][j];</span><br><span class="line">                <span class="keyword">if</span> (cnt[j + <span class="number">1</span>] == <span class="number">0</span> &amp;&amp; grid[i][j] == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">swap</span>(cnt, pre);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">作者：endlesscheng</span><br><span class="line">链接：https:<span class="comment">//leetcode-cn.com/problems/stamping-the-grid/solution/wu-nao-zuo-fa-er-wei-qian-zhui-he-er-wei-zwiu/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure><h1 id="摘水果"><a href="#摘水果" class="headerlink" title="摘水果"></a><a href="https://leetcode-cn.com/problems/maximum-fruits-harvested-after-at-most-k-steps/">摘水果</a></h1><h1 id="可见的山峰对数量"><a href="#可见的山峰对数量" class="headerlink" title="可见的山峰对数量"></a><a href="https://www.nowcoder.com/questionTerminal/16d1047e9fa54cea8b5170b156d89e38?orderByHotValue=1&mutiTagIds=3446&page=1&onlyReference=false">可见的山峰对数量</a></h1><h2 id="RT代码-哪里问题占比最大呢？"><a href="#RT代码-哪里问题占比最大呢？" class="headerlink" title="RT代码(哪里问题占比最大呢？)"></a>RT代码(哪里问题占比最大呢？)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String... args)</span></span>&#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> n = sc.nextInt();</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            arr[i] = sc.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(solve(arr));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">long</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = arr.length;</span><br><span class="line">        LinkedList&lt;Integer&gt; monotonicStack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> r = <span class="number">2</span> * len, l = <span class="number">1</span>;</span><br><span class="line">        HashSet&lt;Pair&gt; results = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        monotonicStack.push(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">            Pair pair = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">int</span> poll;</span><br><span class="line">            LinkedList&lt;Integer&gt; reservedIndex = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">            <span class="keyword">while</span> (!monotonicStack.isEmpty() &amp;&amp; arr[monotonicStack.getFirst()] &lt;= arr[l % len]) &#123;</span><br><span class="line">                poll = monotonicStack.poll();</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> (arr[poll] == arr[l % len]) &#123;</span><br><span class="line">                    reservedIndex.push(poll);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (poll &lt; l % len) &#123;</span><br><span class="line">                    pair = <span class="keyword">new</span> Pair(poll, l % len);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (poll &gt; l % len) &#123;</span><br><span class="line">                    pair = <span class="keyword">new</span> Pair(l % len, poll);</span><br><span class="line">                &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">                    pair = <span class="keyword">null</span>;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                results.add(pair);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!monotonicStack.isEmpty()) &#123;</span><br><span class="line">                poll = monotonicStack.getFirst();</span><br><span class="line">                <span class="keyword">if</span> (poll &lt; l % len) &#123;</span><br><span class="line">                    results.add(<span class="keyword">new</span> Pair(poll, l % len));</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (poll &gt; l % len) &#123;</span><br><span class="line">                    results.add(<span class="keyword">new</span> Pair(l % len, poll));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (!reservedIndex.isEmpty()) &#123;</span><br><span class="line">                monotonicStack.push(reservedIndex.poll());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            monotonicStack.push(l % len);</span><br><span class="line">            l++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; len - <span class="number">1</span>) &#123;</span><br><span class="line">                results.add(<span class="keyword">new</span> Pair(i, i + <span class="number">1</span>));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                results.add(<span class="keyword">new</span> Pair(<span class="number">0</span>, i));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//results.stream().forEach((pair) -&gt; &#123;</span></span><br><span class="line">        <span class="comment">//    System.out.println(pair.small + &quot; &quot; + pair.large);</span></span><br><span class="line">        <span class="comment">//&#125;);</span></span><br><span class="line">        <span class="keyword">return</span> results.size();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> small;</span><br><span class="line">        <span class="keyword">int</span> large;</span><br><span class="line">        </span><br><span class="line">        Pair(<span class="keyword">int</span> s, <span class="keyword">int</span> l)&#123;</span><br><span class="line">            <span class="keyword">this</span>.small = s;</span><br><span class="line">            <span class="keyword">this</span>.large = l;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.small * <span class="number">1001</span> + large;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object object)</span> </span>&#123;</span><br><span class="line">            Pair pair = (Pair) object;</span><br><span class="line">            <span class="keyword">if</span> (small == pair.small &amp;&amp; large == pair.large) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="数学方法-看完解析才会"><a href="#数学方法-看完解析才会" class="headerlink" title="数学方法(看完解析才会)"></a>数学方法(看完解析才会)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String... args)</span></span>&#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> n = sc.nextInt();</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">            arr[i] = sc.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(solve(arr));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">long</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//找到最大的,&quot;小找大&quot;</span></span><br><span class="line">        <span class="keyword">int</span> indexMax = findMax(arr);</span><br><span class="line">        <span class="keyword">int</span> len = arr.length;</span><br><span class="line">        LinkedList&lt;Node&gt; monotonicStack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        monotonicStack.push(<span class="keyword">new</span> Node(arr[indexMax], <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (arr[(indexMax + i) % len] &gt; monotonicStack.getFirst().value) &#123;</span><br><span class="line">                ans += <span class="number">2</span> * monotonicStack.poll().count;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (arr[(indexMax + i) % len] == monotonicStack.getFirst().value) &#123;</span><br><span class="line">                ans += monotonicStack.getFirst().count++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                monotonicStack.push(<span class="keyword">new</span> Node(arr[(indexMax + i) % len], <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (monotonicStack.size() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (monotonicStack.size() &gt; <span class="number">2</span>) &#123;</span><br><span class="line">                ans += <span class="number">2</span> * monotonicStack.poll().count;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (monotonicStack.size() == <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> count = monotonicStack.poll().count;</span><br><span class="line">                <span class="keyword">if</span> (monotonicStack.getFirst().count == <span class="number">1</span>) &#123;</span><br><span class="line">                    ans += count;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    ans += <span class="number">2</span> * count;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">findMax</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;arr.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[max] &lt; arr[i])&#123;</span><br><span class="line">                max = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> value;</span><br><span class="line">        <span class="keyword">int</span> count;</span><br><span class="line">        </span><br><span class="line">        Node(<span class="keyword">int</span> v, <span class="keyword">int</span> c)&#123;</span><br><span class="line">            <span class="keyword">this</span>.value = v;</span><br><span class="line">            <span class="keyword">this</span>.count = c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>好久没写过这么丑的代码了</title>
      <link href="/2022/01/02/%E5%A5%BD%E4%B9%85%E6%B2%A1%E5%86%99%E8%BF%87%E8%BF%99%E4%B9%88%E4%B8%91%E7%9A%84%E4%BB%A3%E7%A0%81%E4%BA%86/"/>
      <url>/2022/01/02/%E5%A5%BD%E4%B9%85%E6%B2%A1%E5%86%99%E8%BF%87%E8%BF%99%E4%B9%88%E4%B8%91%E7%9A%84%E4%BB%A3%E7%A0%81%E4%BA%86/</url>
      
        <content type="html"><![CDATA[<h1 id="LeetCode-5970-参加会议的最多员工数"><a href="#LeetCode-5970-参加会议的最多员工数" class="headerlink" title="LeetCode 5970 参加会议的最多员工数"></a><a href="https://leetcode-cn.com/problems/maximum-employees-to-be-invited-to-a-meeting/">LeetCode 5970 参加会议的最多员工数</a></h1><ul><li>这就是个数学问题，站在不同的维度看这个问题应该可以有不同的解法，但是不管什么角度，状态的完整与边界区分都太重要了</li><li>除此之外，就是如何利用记忆化来优化你需要的数据而已</li><li>因此，重点就是读题——&gt;分解问题——&gt;拆解与组合状态——&gt;数据结构优化——&gt;落键</li><li>walk()方法写的不够好的原因就是类型边界不清楚，bug多是因为组合状态没考虑周全，所以前期慢中期才稳后期才不担心</li></ul><h2 id="润色版"><a href="#润色版" class="headerlink" title="润色版"></a>润色版</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maximumInvitations</span><span class="params">(<span class="keyword">int</span>[] favorite)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = favorite.length;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//links[x][4]   &lt;==&gt;  链起点   终点    类型    长度</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//      类型 0            类型 1         </span></span><br><span class="line">        <span class="comment">//    起点1 终点1       起点1 终点3    </span></span><br><span class="line">        <span class="comment">//   1-&gt;2-&gt;3-&gt;4-&gt;1     1-&gt;2-&gt;3-&gt;2      </span></span><br><span class="line">        <span class="comment">//      长度 4            长度 3          </span></span><br><span class="line">        <span class="comment">//    存在依赖环       可summary叠加</span></span><br><span class="line">        <span class="keyword">int</span>[][] links = <span class="keyword">new</span> <span class="keyword">int</span>[len][<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//按入度+链长顺序遍历用</span></span><br><span class="line">        <span class="keyword">int</span>[][] enterCount = <span class="keyword">new</span> <span class="keyword">int</span>[len][<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//入度+链长排序</span></span><br><span class="line">        sortBy(favorite, enterCount);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//剪枝</span></span><br><span class="line">        <span class="keyword">boolean</span>[] accessed = <span class="keyword">new</span> <span class="keyword">boolean</span>[len];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(accessed[enterCount[i][<span class="number">0</span>]])&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            walk(enterCount[i][<span class="number">0</span>], favorite, links, accessed);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//符合类型1且终点不同的链可叠加</span></span><br><span class="line">        <span class="keyword">int</span> max = summary(links);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//类型组合</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            max = Math.max(max, links[i][<span class="number">3</span>]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">walk</span><span class="params">(<span class="keyword">int</span> startPoint, <span class="keyword">int</span>[] favorite, <span class="keyword">int</span>[][] links, <span class="keyword">boolean</span>[] accessed)</span> </span>&#123;</span><br><span class="line">        HashMap&lt;Integer, Integer&gt; path = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>, cur = startPoint, next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            accessed[cur] = <span class="keyword">true</span>;</span><br><span class="line">            <span class="comment">//点 -&gt; index</span></span><br><span class="line">            path.put(cur, index);</span><br><span class="line"></span><br><span class="line">            next = favorite[cur];</span><br><span class="line">            <span class="keyword">if</span> (accessed[next] == <span class="keyword">true</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (path.containsKey(next)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (path.get(next) == index - <span class="number">1</span>) &#123;</span><br><span class="line">                        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">int</span> tmp = startPoint;</span><br><span class="line">                        <span class="keyword">while</span> (tmp != cur) &#123;</span><br><span class="line">                            links[tmp] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;tmp, cur, <span class="number">1</span>, index + <span class="number">1</span> - k&#125;;</span><br><span class="line">                            tmp = favorite[tmp];</span><br><span class="line">                            k++;</span><br><span class="line">                        &#125;</span><br><span class="line">                        links[tmp] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;startPoint, cur, <span class="number">1</span>, index + <span class="number">1</span>&#125;;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        links[startPoint] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;startPoint, cur, <span class="number">0</span>, index - path.get(next) + <span class="number">1</span>&#125;;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (links[next][<span class="number">2</span>] == <span class="number">0</span>) &#123;</span><br><span class="line">                        links[startPoint] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;startPoint, links[next][<span class="number">1</span>], <span class="number">0</span>, links[next][<span class="number">3</span>]&#125;;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (links[next][<span class="number">2</span>] == <span class="number">1</span>) &#123;</span><br><span class="line">                        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">int</span> tmp = startPoint;</span><br><span class="line">                        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                            links[tmp] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;tmp, links[next][<span class="number">1</span>], <span class="number">1</span>, index + <span class="number">1</span> + links[next][<span class="number">3</span>] - k&#125;;</span><br><span class="line">                            <span class="keyword">if</span> (tmp == cur) &#123;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            tmp = favorite[tmp];</span><br><span class="line">                            k++;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            cur = next;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sortBy</span><span class="params">(<span class="keyword">int</span>[] favorite, <span class="keyword">int</span>[][] enterCount)</span></span>&#123;</span><br><span class="line">        <span class="comment">//计算入度</span></span><br><span class="line">        <span class="keyword">int</span> len = favorite.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            enterCount[i][<span class="number">0</span>] = i;</span><br><span class="line">            enterCount[favorite[i]][<span class="number">1</span>] += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//入度为0-&gt;计算链长</span></span><br><span class="line">        HashMap&lt;Integer, Integer&gt; reserveLen = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(enterCount[i][<span class="number">1</span>] == <span class="number">0</span>) &#123;</span><br><span class="line">                Set&lt;Integer&gt; nodes = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">                <span class="keyword">int</span> cur = i, next = favorite[cur], linkLen = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (!nodes.contains(next)) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(reserveLen.containsKey(next))&#123;</span><br><span class="line">                        linkLen = reserveLen.get(next) + linkLen + <span class="number">1</span>;</span><br><span class="line">                        reserveLen.put(cur, linkLen);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    linkLen++;</span><br><span class="line">                    nodes.add(cur);</span><br><span class="line">                    cur = next;</span><br><span class="line">                    next = favorite[cur];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//分环外和环内赋值</span></span><br><span class="line">                <span class="keyword">int</span> tmp = i, flag = <span class="number">0</span>, k = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                    reserveLen.put(tmp, linkLen - k);</span><br><span class="line">                    <span class="keyword">if</span>(flag == <span class="number">0</span>)&#123;</span><br><span class="line">                        k++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span>&#123;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span>(tmp == next)&#123;</span><br><span class="line">                        flag = <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span>(tmp == cur)&#123;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    tmp = favorite[tmp];</span><br><span class="line">                &#125;</span><br><span class="line">                enterCount[i][<span class="number">2</span>] = linkLen;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Arrays.sort(enterCount, (o1, o2) -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span>(o1[<span class="number">1</span>] == o2[<span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">return</span> o2[<span class="number">2</span>] - o1[<span class="number">2</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> o1[<span class="number">1</span>] - o2[<span class="number">1</span>];</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">summary</span><span class="params">(<span class="keyword">int</span>[][] links)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = links.length;</span><br><span class="line">        <span class="keyword">int</span>[] dispose = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">            dispose[links[i][<span class="number">1</span>]] = Math.max(dispose[links[i][<span class="number">1</span>]], links[i][<span class="number">3</span>]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(links[i][<span class="number">2</span>] == <span class="number">1</span>)&#123;</span><br><span class="line">                res += dispose[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="随手版"><a href="#随手版" class="headerlink" title="随手版"></a>随手版</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maximumInvitations</span><span class="params">(<span class="keyword">int</span>[] favorite)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = favorite.length;</span><br><span class="line">        <span class="keyword">boolean</span>[] accessed = <span class="keyword">new</span> <span class="keyword">boolean</span>[len];</span><br><span class="line">        <span class="comment">//链起点 终点 类型 长度</span></span><br><span class="line">        <span class="comment">//      类型 0            类型 1            类型2</span></span><br><span class="line">        <span class="comment">//    起点1 终点1       起点1 终点3       起点2 终点4  </span></span><br><span class="line">        <span class="comment">//    1-&gt;2-&gt;3-&gt;4-&gt;1     1-&gt;2-&gt;3-&gt;2      1-&gt;2-&gt;3-&gt;4-&gt;2</span></span><br><span class="line">        <span class="comment">//     长度4              长度3             长度3</span></span><br><span class="line">        <span class="comment">//                      可延长</span></span><br><span class="line">        <span class="keyword">int</span>[][] links = <span class="keyword">new</span> <span class="keyword">int</span>[len][<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//bug1，需要从入度0开始或者增加类型</span></span><br><span class="line">        <span class="comment">//bug2, 要长链先， 短链后</span></span><br><span class="line">        <span class="keyword">int</span>[][] enterCount = <span class="keyword">new</span> <span class="keyword">int</span>[len][<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//计算入度</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            enterCount[i][<span class="number">0</span>] = i;</span><br><span class="line">            enterCount[favorite[i]][<span class="number">1</span>] += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//入度为0的 计算链长</span></span><br><span class="line">        HashMap&lt;Integer, Integer&gt; reserveLen = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(enterCount[i][<span class="number">1</span>] == <span class="number">0</span>) &#123;</span><br><span class="line">                Set&lt;Integer&gt; nodes = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">                <span class="keyword">int</span> cur = i, next = favorite[cur], linkLen = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (!nodes.contains(next)) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(reserveLen.containsKey(next))&#123;</span><br><span class="line">                        linkLen = reserveLen.get(next) + linkLen + <span class="number">1</span>;</span><br><span class="line">                        reserveLen.put(cur, linkLen);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    linkLen++;</span><br><span class="line">                    nodes.add(cur);</span><br><span class="line">                    cur = next;</span><br><span class="line">                    next = favorite[cur];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//分环外和环内赋值</span></span><br><span class="line">                <span class="keyword">int</span> tmp = i, flag = <span class="number">0</span>, k = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                    reserveLen.put(tmp, linkLen - k);</span><br><span class="line">                    <span class="keyword">if</span>(flag == <span class="number">0</span>)&#123;</span><br><span class="line">                        k++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span>&#123;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span>(tmp == next)&#123;</span><br><span class="line">                        flag = <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span>(tmp == cur)&#123;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    tmp = favorite[tmp];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                enterCount[i][<span class="number">2</span>] = linkLen;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Arrays.sort(enterCount, <span class="keyword">new</span> Comparator&lt;<span class="keyword">int</span>[]&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">int</span>[] o1, <span class="keyword">int</span>[] o2)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(o1[<span class="number">1</span>] == o2[<span class="number">1</span>])&#123;</span><br><span class="line">                    <span class="keyword">return</span> o2[<span class="number">2</span>] - o1[<span class="number">2</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> o1[<span class="number">1</span>] - o2[<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//end bug1, bug2</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (accessed[enterCount[i][<span class="number">0</span>]]) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            walk(enterCount[i][<span class="number">0</span>], favorite, links, accessed);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//bug 额外处理</span></span><br><span class="line">        <span class="comment">//start</span></span><br><span class="line">        <span class="keyword">int</span>[] dispose = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">            dispose[links[i][<span class="number">1</span>]] = Math.max(dispose[links[i][<span class="number">1</span>]], links[i][<span class="number">3</span>]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(links[i][<span class="number">2</span>] == <span class="number">1</span>)&#123;</span><br><span class="line">                res += dispose[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        int res = 0;</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            res = Math.max(res, links[i][<span class="number">3</span>]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">walk</span><span class="params">(<span class="keyword">int</span> startPoint, <span class="keyword">int</span>[] favorite, <span class="keyword">int</span>[][] links, <span class="keyword">boolean</span>[] accessed)</span> </span>&#123;</span><br><span class="line">        HashMap&lt;Integer, Integer&gt; path = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>, cur = startPoint, next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            accessed[cur] = <span class="keyword">true</span>;</span><br><span class="line">            <span class="comment">//点 -&gt; index</span></span><br><span class="line">            path.put(cur, index);</span><br><span class="line"></span><br><span class="line">            next = favorite[cur];</span><br><span class="line">            <span class="keyword">if</span> (accessed[next] == <span class="keyword">true</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (path.containsKey(next)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (path.get(next) == index - <span class="number">1</span>) &#123;</span><br><span class="line">                        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">int</span> tmp = startPoint;</span><br><span class="line">                        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (tmp == cur) &#123;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            links[tmp] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;tmp, cur, <span class="number">1</span>, index + <span class="number">1</span> - k&#125;;</span><br><span class="line">                            tmp = favorite[tmp];</span><br><span class="line">                            k++;</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        links[tmp] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;startPoint, cur, <span class="number">1</span>, index + <span class="number">1</span>&#125;;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        links[startPoint] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;startPoint, cur, <span class="number">2</span>, index - path.get(next) + <span class="number">1</span>&#125;;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (links[next][<span class="number">2</span>] == <span class="number">0</span> || links[next][<span class="number">2</span>] == <span class="number">2</span>) &#123;</span><br><span class="line">                        links[startPoint] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;startPoint, links[next][<span class="number">1</span>], links[next][<span class="number">2</span>], links[next][<span class="number">3</span>]&#125;;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (links[next][<span class="number">2</span>] == <span class="number">1</span>) &#123;</span><br><span class="line">                        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">int</span> tmp = startPoint;</span><br><span class="line">                        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                            links[tmp] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;tmp, links[next][<span class="number">1</span>], <span class="number">1</span>, index + <span class="number">1</span> + links[next][<span class="number">3</span>] - k&#125;;</span><br><span class="line">                            <span class="keyword">if</span> (tmp == cur) &#123;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            tmp = favorite[tmp];</span><br><span class="line">                            k++;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            cur = next;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="一个很好的解答（拓扑排序-剪枝）"><a href="#一个很好的解答（拓扑排序-剪枝）" class="headerlink" title="一个很好的解答（拓扑排序+剪枝）"></a><a href="https://leetcode-cn.com/problems/maximum-employees-to-be-invited-to-a-meeting/solution/nei-xiang-ji-huan-shu-tuo-bu-pai-xu-fen-c1i1b/">一个很好的解答（拓扑排序+剪枝）</a></h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maximumInvitations</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt; &amp;g)</span> </span>&#123; <span class="comment">// favorite 就是内向基环森林 g</span></span><br><span class="line">        <span class="keyword">int</span> n = g.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">deg</span><span class="params">(n)</span></span>; <span class="comment">// g 上每个节点的入度</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> w: g) &#123;</span><br><span class="line">            ++deg[w];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">max_depth</span><span class="params">(n)</span></span>;</span><br><span class="line">        queue&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (deg[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                q.<span class="built_in">emplace</span>(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;  <span class="comment">// 拓扑排序，剪掉 g 上的所有树枝</span></span><br><span class="line">            <span class="keyword">int</span> v = q.<span class="built_in">front</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            ++max_depth[v];</span><br><span class="line">            <span class="keyword">int</span> w = g[v]; <span class="comment">// v 只有一条出边</span></span><br><span class="line">            max_depth[w] = <span class="built_in">max</span>(max_depth[w], max_depth[v]);</span><br><span class="line">            <span class="keyword">if</span> (--deg[w] == <span class="number">0</span>) &#123;</span><br><span class="line">                q.<span class="built_in">emplace</span>(w);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max_ring_size = <span class="number">0</span>, sum_chain_size = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (deg[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 遍历基环上的点（拓扑排序后入度大于 0）</span></span><br><span class="line">            deg[i] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> ring_size = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> v = g[i]; v != i; v = g[v]) &#123;</span><br><span class="line">                deg[v] = <span class="number">0</span>; <span class="comment">// 将基环上的点的入度标记为 0，避免重复访问</span></span><br><span class="line">                ++ring_size;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (ring_size == <span class="number">2</span>) &#123; <span class="comment">// 基环大小为 2</span></span><br><span class="line">                sum_chain_size += max_depth[i] + max_depth[g[i]] + <span class="number">2</span>; <span class="comment">// 累加两条最长链的长度</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                max_ring_size = <span class="built_in">max</span>(max_ring_size, ring_size); <span class="comment">// 取所有基环的最大值</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(max_ring_size, sum_chain_size);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>算法题coding风格变化</title>
      <link href="/2021/12/29/%E7%AE%97%E6%B3%95%E9%A2%98coding%E9%A3%8E%E6%A0%BC%E5%8F%98%E5%8C%96/"/>
      <url>/2021/12/29/%E7%AE%97%E6%B3%95%E9%A2%98coding%E9%A3%8E%E6%A0%BC%E5%8F%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h1 id="以题目为导向"><a href="#以题目为导向" class="headerlink" title="以题目为导向"></a>以题目为导向</h1><h2 id="K个一组翻转链表"><a href="#K个一组翻转链表" class="headerlink" title="K个一组翻转链表"></a>K个一组翻转链表</h2><h3 id="2021-9-10"><a href="#2021-9-10" class="headerlink" title="2021-9-10"></a>2021-9-10</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseKGroup</span><span class="params">(ListNode head, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(k == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode pre = <span class="keyword">null</span>, cur = head, dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>, head);</span><br><span class="line">        ListNode end = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span>(cur != <span class="keyword">null</span>)&#123;</span><br><span class="line">            ListNode curHead = cur;</span><br><span class="line">            end = cur;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;k; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(cur == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                cur = cur.next;</span><br><span class="line">            &#125;            </span><br><span class="line">            <span class="keyword">if</span>(cur == <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ListNode curNext = cur.next;</span><br><span class="line">            ListNode next = curHead.next;</span><br><span class="line">            <span class="keyword">while</span>(next != cur)&#123;</span><br><span class="line">                ListNode tmp = next.next;</span><br><span class="line">                next.next = curHead;</span><br><span class="line">                curHead = next;</span><br><span class="line">                next = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">            cur.next = curHead;</span><br><span class="line">            <span class="keyword">if</span>(dummy.next == head)&#123;</span><br><span class="line">                dummy.next = cur;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(pre == <span class="keyword">null</span>)&#123;</span><br><span class="line">                pre = end;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                pre.next = cur;</span><br><span class="line">                pre = end;</span><br><span class="line">            &#125;</span><br><span class="line">            cur = curNext;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(pre != end)&#123;</span><br><span class="line">            pre.next = end;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            pre.next = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2021-12-29"><a href="#2021-12-29" class="headerlink" title="2021-12-29"></a>2021-12-29</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseKGroup</span><span class="params">(ListNode head, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span> || k == <span class="number">0</span> || k == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> solve(head, k);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">solve</span><span class="params">(ListNode head, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">        ListNode dummyHead = <span class="keyword">new</span> ListNode(), curHead = <span class="keyword">null</span>, curTail = <span class="keyword">null</span>, lastTail = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(head != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i % k == <span class="number">0</span>)&#123;</span><br><span class="line">                curHead = head;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            ListNode nextHead = head.next;</span><br><span class="line">            <span class="keyword">if</span>(i % k == k - <span class="number">1</span>)&#123;</span><br><span class="line">                curTail = head;</span><br><span class="line"></span><br><span class="line">                reverseList(curHead, curTail);</span><br><span class="line">                <span class="keyword">if</span>(dummyHead.next == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    dummyHead.next = curTail;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(lastTail != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    lastTail.next = curTail;</span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                lastTail = curHead;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            i++;</span><br><span class="line"></span><br><span class="line">            head = nextHead;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(i % k != <span class="number">0</span>)&#123;</span><br><span class="line">            lastTail.next = curHead;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummyHead.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">reverseList</span><span class="params">(ListNode head, ListNode tail)</span></span>&#123;</span><br><span class="line">        ListNode prev = <span class="keyword">null</span>, next = head.next, cur = head;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(cur != tail)&#123;</span><br><span class="line">            next = cur.next;</span><br><span class="line">            cur.next = prev;</span><br><span class="line">            prev = cur;</span><br><span class="line"></span><br><span class="line">            cur = next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        cur.next = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="合并K个升序列表"><a href="#合并K个升序列表" class="headerlink" title="合并K个升序列表"></a>合并K个升序列表</h2><h3 id="2021-9-7"><a href="#2021-9-7" class="headerlink" title="2021-9-7"></a>2021-9-7</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeKLists</span><span class="params">(ListNode[] lists)</span> </span>&#123;</span><br><span class="line">        PriorityQueue&lt;ListNode&gt; q = <span class="keyword">new</span> PriorityQueue&lt;&gt;((o1, o2) -&gt; o1.val - o2.val);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;lists.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(lists[i] != <span class="keyword">null</span>)&#123;</span><br><span class="line">                q.add(lists[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode dummy = <span class="keyword">new</span> ListNode(), pre = dummy;</span><br><span class="line">        <span class="keyword">while</span>(!q.isEmpty())&#123;</span><br><span class="line">            ListNode poll = q.poll();</span><br><span class="line">            <span class="keyword">if</span>(poll.next != <span class="keyword">null</span>)&#123;</span><br><span class="line">                q.add(poll.next);</span><br><span class="line">            &#125;</span><br><span class="line">            pre.next = poll;</span><br><span class="line">            pre = poll;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2021-12-29-1"><a href="#2021-12-29-1" class="headerlink" title="2021-12-29"></a>2021-12-29</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeKLists</span><span class="params">(ListNode[] lists)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(lists.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> solve(lists);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ListNode <span class="title">solve</span><span class="params">(ListNode[] lists)</span></span>&#123;</span><br><span class="line">        ListNode dummy = <span class="keyword">new</span> ListNode(), cur = dummy;</span><br><span class="line">        PriorityQueue&lt;ListNode&gt; priorityQueue = <span class="keyword">new</span> PriorityQueue&lt;&gt;((o1, o2) -&gt; o1.val - o2.val);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(ListNode node: lists)&#123;</span><br><span class="line">            <span class="keyword">if</span>(node != <span class="keyword">null</span>)&#123;</span><br><span class="line">                priorityQueue.offer(node);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(!priorityQueue.isEmpty())&#123;</span><br><span class="line">            cur.next = priorityQueue.poll();</span><br><span class="line">            cur = cur.next;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(cur.next != <span class="keyword">null</span>)&#123;</span><br><span class="line">                priorityQueue.offer(cur.next);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JOS内存管理</title>
      <link href="/2021/12/24/JOS%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"/>
      <url>/2021/12/24/JOS%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="物理地址分配"><a href="#物理地址分配" class="headerlink" title="物理地址分配"></a>物理地址分配</h2><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211215215515285.png" alt="img](https://zivlnoff.github.io/graph/image-20211215215515285.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211215215515285.png)</p>            </figure></p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211216120728064.png" alt="img](https://zivlnoff.github.io/graph/image-20211216120728064.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211216120728064.png)</p>            </figure></p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211216120803901.png" alt="img](https://zivlnoff.github.io/graph/image-20211216120803901.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211216120803901.png)</p>            </figure></p><p>我做完了哈哈哈哈哈哈哈哈😄</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">C02C8343LVDL:lab2 alsc$ make qemu</span><br><span class="line">+ cc kern/pmap.c</span><br><span class="line">+ ld obj/kern/kernel</span><br><span class="line">/usr/local/bin/i386-elf-ld: warning: section `.bss<span class="number">&#x27;</span> type changed to PROGBITS</span><br><span class="line">+ mk obj/kern/kernel.img</span><br><span class="line">../../qemu/bin/qemu-system-i386 -drive file=obj/kern/kernel.img,index=<span class="number">0</span>,media=disk,format=raw -serial mon:stdio -gdb tcp::<span class="number">25601</span> -D qemu.<span class="built_in">log</span> </span><br><span class="line"></span><br><span class="line">lab1 start------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="number">6828</span> decimal is <span class="number">15254</span> octal!</span><br><span class="line">He110 World!</span><br><span class="line">entering test_backtrace <span class="number">5</span></span><br><span class="line">entering test_backtrace <span class="number">4</span></span><br><span class="line">entering test_backtrace <span class="number">3</span></span><br><span class="line">entering test_backtrace <span class="number">2</span></span><br><span class="line">entering test_backtrace <span class="number">1</span></span><br><span class="line">entering test_backtrace <span class="number">0</span></span><br><span class="line">  ebp f0116f08  eip f010008f  args <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> f0116f18</span><br><span class="line">              kern/init.c:<span class="number">16</span>:  test_backtrace+<span class="number">79</span></span><br><span class="line">  ebp f0116f28  eip f0100068  args <span class="number">00000000</span> <span class="number">00000001</span> f0116f68 <span class="number">00000000</span> f0116f18</span><br><span class="line">              kern/init.c:<span class="number">16</span>:  test_backtrace+<span class="number">40</span></span><br><span class="line">  ebp f0116f48  eip f0100068  args <span class="number">00000001</span> <span class="number">00000002</span> f0116f88 <span class="number">00000000</span> f0116f18</span><br><span class="line">              kern/init.c:<span class="number">16</span>:  test_backtrace+<span class="number">40</span></span><br><span class="line">  ebp f0116f68  eip f0100068  args <span class="number">00000002</span> <span class="number">00000003</span> f0116fa8 <span class="number">00000000</span> f0116f18</span><br><span class="line">              kern/init.c:<span class="number">16</span>:  test_backtrace+<span class="number">40</span></span><br><span class="line">  ebp f0116f88  eip f0100068  args <span class="number">00000003</span> <span class="number">00000004</span> <span class="number">00000000</span> <span class="number">00000000</span> f0116f18</span><br><span class="line">              kern/init.c:<span class="number">16</span>:  test_backtrace+<span class="number">40</span></span><br><span class="line">  ebp f0116fa8  eip f0100068  args <span class="number">00000004</span> <span class="number">00000005</span> <span class="number">00000000</span> <span class="number">00010074</span> f0116f18</span><br><span class="line">              kern/init.c:<span class="number">16</span>:  test_backtrace+<span class="number">40</span></span><br><span class="line">  ebp f0116fc8  eip f01000fd  args <span class="number">00000005</span> <span class="number">0000e110</span> f0116fec <span class="number">00000000</span> f0116f18</span><br><span class="line">              kern/init.c:<span class="number">58</span>:  i386_init+<span class="number">105</span></span><br><span class="line">  ebp f0116ff8  eip f010003e  args <span class="number">00118021</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> f0116f18</span><br><span class="line">              &#123;standard input&#125;:<span class="number">0</span>:  &lt;unknown&gt;+<span class="number">0</span></span><br><span class="line">leaving test_backtrace <span class="number">0</span></span><br><span class="line">leaving test_backtrace <span class="number">1</span></span><br><span class="line">leaving test_backtrace <span class="number">2</span></span><br><span class="line">leaving test_backtrace <span class="number">3</span></span><br><span class="line">leaving test_backtrace <span class="number">4</span></span><br><span class="line">leaving test_backtrace <span class="number">5</span></span><br><span class="line">lab1 end--------------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">lab2 start------------------------------------------------------------------------------------------------</span><br><span class="line">Physical memory: <span class="number">0x20000</span>K available          base = <span class="number">0x280</span>K           extended = <span class="number">0x1fd80</span>K</span><br><span class="line"><span class="keyword">sizeof</span>(<span class="keyword">uint16_t</span>):<span class="number">0x2</span></span><br><span class="line">npages:<span class="number">0x8000</span>        <span class="keyword">sizeof</span>(Struct PageInfo):<span class="number">0x8</span></span><br><span class="line">名称:kern_pgdir      虚拟地址:<span class="number">0xf011a000</span>             页目录项:<span class="number">0x3c0</span>          物理地址:<span class="number">0x11a000</span>       物理页:<span class="number">0x11a</span></span><br><span class="line">名称:UVPT            虚拟地址:<span class="number">0xef400000</span>             页目录项:<span class="number">0x3bd</span>          物理地址:<span class="number">0x11a000</span>       物理页:<span class="number">0x11a</span></span><br><span class="line">pages占用空间:<span class="number">256</span>K</span><br><span class="line">名称:pages           虚拟地址:<span class="number">0xf011b000</span>             页目录项:<span class="number">0x3c0</span>          物理地址:<span class="number">0x11b000</span>       物理页:<span class="number">0x11b</span></span><br><span class="line">qemu空闲物理内存:[<span class="number">0x1000</span>, <span class="number">0xa0000</span>]           [<span class="number">0x15b000</span>, <span class="number">0x8000000</span>)</span><br><span class="line">初始page_free_list:<span class="number">0x0</span></span><br><span class="line">名称:page_free_list          虚拟地址:<span class="number">0xf015aff8</span>             页目录项:<span class="number">0x3c0</span>          物理地址:<span class="number">0x15aff8</span>       物理页:<span class="number">0x15a</span></span><br><span class="line"></span><br><span class="line">************* Now Check that the pages on the page_free_list are reasonable ************</span><br><span class="line">pp:<span class="number">0x0</span>       pp1:<span class="number">0xf011cff8</span>          pp2:<span class="number">0xf015aff8</span>          *tp[<span class="number">1</span>]:<span class="number">0xf011cff8</span>       *tp[<span class="number">0</span>]:<span class="number">0x0</span>      tp[<span class="number">0</span>]:<span class="number">0xf011b008</span>        tp[<span class="number">1</span>]:<span class="number">0xf011d000</span></span><br><span class="line">first_free_page:<span class="number">0xf015b000</span></span><br><span class="line">nfree_basemem:<span class="number">0x9f</span>           nfree_extmem:<span class="number">0x7ea5</span></span><br><span class="line">物理内存占用中页数:<span class="number">0xbc</span></span><br><span class="line">check_page_free_list() succeeded!</span><br><span class="line"></span><br><span class="line">************* Now check the real physical page allocator (page_alloc(), page_free(), <span class="keyword">and</span> page_init())************</span><br><span class="line">check_page_alloc() succeeded!</span><br><span class="line"></span><br><span class="line">************* Now check page_insert, page_remove, &amp;c **************</span><br><span class="line">PTE_ADDR(kern_pgdir[PDX(va)]):<span class="number">0x3ff000</span>       kern_pgdir[PDX(va)]:<span class="number">0x3ff003</span>            ptep:<span class="number">0xf03ff004</span>         ptep1:<span class="number">0xf03ff000</span>        PTX(va):<span class="number">0x1</span></span><br><span class="line">check_page() succeeded!</span><br><span class="line"></span><br><span class="line">************* Now we <span class="built_in">set</span> up <span class="keyword">virtual</span> memory **************</span><br><span class="line">名称:UVPT            虚拟地址:<span class="number">0xef400000</span>             页目录项:<span class="number">0x3bd</span>          物理地址:<span class="number">0x11a000</span>       物理页:<span class="number">0x11a</span></span><br><span class="line">名称:pages           虚拟地址:<span class="number">0xf011b000</span>             页目录项:<span class="number">0x3c0</span>          物理地址:<span class="number">0x11b000</span>       物理页:<span class="number">0x11b</span></span><br><span class="line"></span><br><span class="line">************* Now we <span class="built_in">map</span> <span class="string">&#x27;pages&#x27;</span> read-only by the user at linear address UPAGES **************</span><br><span class="line">page2pa(pages):<span class="number">0x0</span></span><br><span class="line"></span><br><span class="line">************* Now use the physical memory that <span class="string">&#x27;bootstack&#x27;</span> refers to as the kernel <span class="built_in">stack</span> **************</span><br><span class="line"></span><br><span class="line">************* Now <span class="built_in">map</span> all of physical memory at KERNBASE. **************</span><br><span class="line"></span><br><span class="line">************* Now check that the initial page directory has been <span class="built_in">set</span> up correctly **************</span><br><span class="line">check_va2pa(pgdir, UPAGES + <span class="number">0</span>):<span class="number">0x11b000</span>      PADDR(pages) + <span class="number">0</span>:<span class="number">0x11b000</span></span><br><span class="line">check_kern_pgdir() succeeded!</span><br><span class="line"></span><br><span class="line">************* Now check that the pages on the page_free_list are reasonable. **************</span><br><span class="line">first_free_page:<span class="number">0xf015b000</span></span><br><span class="line">nfree_basemem:<span class="number">0x9f</span>           nfree_extmem:<span class="number">0x7e63</span></span><br><span class="line">物理内存占用中页数:<span class="number">0xfe</span></span><br><span class="line">check_page_free_list() succeeded!</span><br><span class="line"></span><br><span class="line">************* Now check page_insert, page_remove, &amp;c, with an installed kern_pgdir **************</span><br><span class="line">check_page_installed_pgdir() succeeded!</span><br><span class="line">lab2 end--------------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Welcome to the JOS kernel monitor!</span><br><span class="line">Type <span class="string">&#x27;help&#x27;</span> <span class="keyword">for</span> a <span class="built_in">list</span> of commands.</span><br><span class="line">K&gt; QEMU <span class="number">2.3</span><span class="number">.0</span> monitor - type <span class="string">&#x27;help&#x27;</span> <span class="keyword">for</span> more information</span><br><span class="line">(qemu) info pg</span><br><span class="line">VPN range     Entry         Flags        Physical page</span><br><span class="line">[ef000-ef3ff]  PDE[<span class="number">3b</span>c]     --------WP</span><br><span class="line">  [ef000-ef03f]  PTE[<span class="number">000</span><span class="number">-03f</span>] -------U-P <span class="number">0011b</span><span class="number">-0015</span>a</span><br><span class="line">[ef400-ef7ff]  PDE[<span class="number">3b</span>d]     -------U-P</span><br><span class="line">  [ef7bc-ef7bc]  PTE[<span class="number">3b</span>c]     --------WP <span class="number">003f</span>d</span><br><span class="line">  [ef7bd-ef7bd]  PTE[<span class="number">3b</span>d]     -------U-P <span class="number">0011</span>a</span><br><span class="line">  [ef7bf-ef7bf]  PTE[<span class="number">3b</span>f]     --------WP <span class="number">003f</span>e</span><br><span class="line">  [ef7c0-ef7df]  PTE[<span class="number">3</span>c0<span class="number">-3</span>df] ----A---WP <span class="number">003f</span>f <span class="number">003f</span>c <span class="number">003f</span>b <span class="number">003f</span>a <span class="number">003f</span>9 <span class="number">003f</span>8 ..</span><br><span class="line">  [ef7e0-ef7ff]  PTE[<span class="number">3e0</span><span class="number">-3f</span>f] --------WP <span class="number">003</span>dd <span class="number">003</span>dc <span class="number">003</span>db <span class="number">003</span>da <span class="number">003</span>d9 <span class="number">003</span>d8 ..</span><br><span class="line">[efc00-effff]  PDE[<span class="number">3b</span>f]     --------WP</span><br><span class="line">  [efff8-effff]  PTE[<span class="number">3f</span>8<span class="number">-3f</span>f] ---------P <span class="number">0010f</span><span class="number">-00116</span></span><br><span class="line">[f0000-f03ff]  PDE[<span class="number">3</span>c0]     ----A---WP</span><br><span class="line">  [f0000-f0000]  PTE[<span class="number">000</span>]     --------WP <span class="number">00000</span></span><br><span class="line">  [f0001-f009f]  PTE[<span class="number">001</span><span class="number">-09f</span>] ---DA---WP <span class="number">00001</span><span class="number">-0009f</span></span><br><span class="line">  [f00a0-f00b7]  PTE[<span class="number">0</span>a0<span class="number">-0b</span>7] --------WP <span class="number">000</span>a0<span class="number">-000b</span>7</span><br><span class="line">  [f00b8-f00b8]  PTE[<span class="number">0b</span>8]     ---DA---WP <span class="number">000b</span>8</span><br><span class="line">  [f00b9-f00ff]  PTE[<span class="number">0b</span>9<span class="number">-0f</span>f] --------WP <span class="number">000b</span>9<span class="number">-000f</span>f</span><br><span class="line">  [f0100-f0105]  PTE[<span class="number">100</span><span class="number">-105</span>] ----A---WP <span class="number">00100</span><span class="number">-00105</span></span><br><span class="line">  [f0106-f0115]  PTE[<span class="number">106</span><span class="number">-115</span>] --------WP <span class="number">00106</span><span class="number">-00115</span></span><br><span class="line">  [f0116-f0116]  PTE[<span class="number">116</span>]     ---DA---WP <span class="number">00116</span></span><br><span class="line">  [f0117-f0118]  PTE[<span class="number">117</span><span class="number">-118</span>] --------WP <span class="number">00117</span><span class="number">-00118</span></span><br><span class="line">  [f0119-f011a]  PTE[<span class="number">119</span><span class="number">-11</span>a] ---DA---WP <span class="number">00119</span><span class="number">-0011</span>a</span><br><span class="line">  [f011b-f011b]  PTE[<span class="number">11b</span>]     ----A---WP <span class="number">0011b</span></span><br><span class="line">  [f011c-f011c]  PTE[<span class="number">11</span>c]     ---DA---WP <span class="number">0011</span>c</span><br><span class="line">  [f011d-f015a]  PTE[<span class="number">11</span>d<span class="number">-15</span>a] ----A---WP <span class="number">0011</span>d<span class="number">-0015</span>a</span><br><span class="line">  [f015b-f03bd]  PTE[<span class="number">15b</span><span class="number">-3b</span>d] ---DA---WP <span class="number">0015b</span><span class="number">-003b</span>d</span><br><span class="line">  [f03be-f03ff]  PTE[<span class="number">3b</span>e<span class="number">-3f</span>f] --------WP <span class="number">003b</span>e<span class="number">-003f</span>f</span><br><span class="line">[f0400-f7fff]  PDE[<span class="number">3</span>c1<span class="number">-3</span>df] ----A---WP</span><br><span class="line">  [f0400-f7fff]  PTE[<span class="number">000</span><span class="number">-3f</span>f] ---DA---WP <span class="number">00400</span><span class="number">-07f</span>ff</span><br><span class="line">[f8000-fffff]  PDE[<span class="number">3e0</span><span class="number">-3f</span>f] --------WP</span><br><span class="line">  [f8000-fffff]  PTE[<span class="number">000</span><span class="number">-3f</span>f] --------WP <span class="number">08000</span><span class="number">-0f</span>fff</span><br><span class="line">(qemu) </span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>再看cola</title>
      <link href="/2021/12/24/%E5%86%8D%E7%9C%8Bcola/"/>
      <url>/2021/12/24/%E5%86%8D%E7%9C%8Bcola/</url>
      
        <content type="html"><![CDATA[<h3 id="知识总是在不断膨胀，最终都会浓缩成精华"><a href="#知识总是在不断膨胀，最终都会浓缩成精华" class="headerlink" title="知识总是在不断膨胀，最终都会浓缩成精华"></a>知识总是在不断膨胀，最终都会浓缩成精华</h3><p> 在我们的应用中，如果处处都reasonable，那可能就是现实生活的“田园”了吧。尽管我们没法去把这一切一字排开，但其中的内涵，确实值得咀嚼。至少方法总比问题多，不是吗</p><ul><li>可扩展性差？-&gt;扩展点（一种嵌入框架或者称为注入的多维策略工厂）</li><li>面向过程？-&gt;SOLID原则、设计模式、UML图、领域建模(Eric Evans的《领域驱动设计》)。</li><li>分层不合理？ -&gt;分离<strong>必要</strong>关注点</li><li>随心所欲？ -&gt;规范+CR</li></ul><p> 我只能告诉你，当你够强，你施展的空间比天大</p><p> SOLID原则是基石，是你的武器，玩过DNF吗，武器是可以打磨的，单一职责原则(SRP)，开闭原则(OCP)，里氏替换原则(LSP)，接口隔离原则(ISP)和依赖倒置原则(DIP)，给你了，看你怎么使用。抽象能力，设计模式，架构模式，UML，以及阅读优秀框架源码是你很好的朋友。</p><p> 应该都比我很熟悉领域建模吧，我也就开发了没几个月，感觉也有味了</p><ul><li>思想和方法论（这是人生</li><li>贫血和充血模式（依赖团队水平</li></ul><p> 分层设计都有所耳闻，相信吧，设计模式和领域设计能很好的帮你去根据业务场景去设计。</p><p> 规范设计是真的很有诱惑，放对位置、贴好标签、类名约定、方法名约定、错误码约定（系统异常和业务异常）、测试约定，这依旧取决团队水平。</p><p> 来看看cola呗~</p><p> cola1.0相当炫酷，这个起步我jio得很不错</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220805478.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220805478.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220805478.png)</p>            </figure></p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214203203905.png" alt="img](https://zivlnoff.github.io/graph/image-20211214203203905.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214203203905.png)</p>            </figure></p><p> cola2.0，这个突破很大了，增加了更加明确的定义和重要的依赖倒置设计原则，结构清晰带来了很好的可理解性和可维护性</p><p><strong>新架构分层</strong>：Domain层不再直接依赖Infrastructure层。<br><strong>新组件划分</strong>：对组件进行了重新定义和划分，加了新组件，去除了一些老组件（Validator，Convertor等）。<br><strong>新扩展点设计</strong>：引入了新概念，让扩展更加灵活。<br><strong>新二方库定位</strong>：二方库不仅仅是DTO，也是Domain Model的轻量级表达和实现。</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220753934.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220753934.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220753934.png)</p>            </figure></p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220745457.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220745457.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220745457.png)</p>            </figure></p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220723498.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220723498.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220723498.png)</p>            </figure></p><ol><li>二方库里的组件<ul><li>api：存放的是应用对外的接口。</li><li>dto.domainmodel：用来做数据传输的轻量级领域对象。</li><li>dto.domainevent: 用来做数据传输的领域事件。</li></ul></li><li>Application里的组件<ul><li>service：接口实现的facade，没有业务逻辑，可以包含对不同终端的adapter。</li><li>eventhandler：处理领域事件，包括本域的和外域的。</li><li>executor：用来处理命令（Command）和查询（Query），对复杂业务，可以包含<a href="https://ata.alibaba-inc.com/articles/147540?spm=ata.25287382.0.0.6bee7536AJrV8H">Phase和Step</a>。</li><li>interceptor: COLA提供的对所有请求的AOP处理机制。</li></ul></li><li>Domain里的组件<ul><li>domain：领域实体，允许继承domainmodel。</li><li>domainservice: 领域服务，用来提供更粗粒度的领域能力。</li><li>gateway：对外依赖的网关接口，包括存储、RPC、Search等。</li></ul></li><li>Infrastructure里的组件<ul><li>config：配置信息相关。</li><li>message：消息处理相关。</li><li>repository：存储相关，是gateway的特化，主要用来做本域的数据CRUD操作。</li><li>gateway：对外依赖的网关接口（Domain里的gateway）的实现。</li></ul></li></ol><p> 依赖视图就是介个样子：</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220711990.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220711990.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220711990.png)</p>            </figure></p><p> 调用视图</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220702450.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220702450.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220702450.png)</p>            </figure></p><p> cola3.0它进化了！</p><h2 id="摘录："><a href="#摘录：" class="headerlink" title="摘录："></a>摘录：</h2><h5 id="设计中的弯弯绕"><a href="#设计中的弯弯绕" class="headerlink" title="设计中的弯弯绕"></a>设计中的弯弯绕</h5><p><strong>深入考察一下，我们系统中，类似于“地心说”这样的弯弯绕的设计，实在是不在少数</strong>。</p><p><strong>从系统架构的角度看</strong>，有些弯弯绕是因为系统边界划分不合理，导致职责不清，依赖混乱。</p><p><strong>从应用架构的角度看</strong>，有些弯弯绕是因为过度设计，为了追求所谓的灵活性和可扩展性，使用了不恰当的设计。导致本来可以直观呈现的代码逻辑，被各种包装，各种隐藏，各种转发…. 无形中极大的阻碍了代码的可读性和可理解性，增加了维护成本。</p><p>举个例子，<strong>我看过无数的业务系统，喜欢拿业务流程编排说事情。因此，在业务系统中，可以看到各种五花八门的“弯弯绕设计”。</strong></p><p>触发这次升级的动机，主要是因为，自己在实践COLA的过程中，的确发现有些华而不实的功能。在COLA作为阿里云的基础应用架构，其影响力越来越大的时候，我有责任给到大家一个正确的引导——<strong>去伪存真，简洁有效，而不是引入更多的复杂度</strong>。</p><p>实际上，COLA是有两部分组成的：</p><p><strong>一方面COLA是一种架构思想</strong>，是整合了洋葱圈架构、适配器架构、DDD、整洁架构、TMF等架构思想的一种应用架构。</p><p><strong>另一方面COLA也是框架组件</strong>，通过这次升级，我使用奥卡姆剃刀砍掉了绝大部分的组件能力，仅仅保留了扩展点功能。其用意是不希望COLA作为框架给到应用开发者太多的约束，这不符合简单有效的风格。</p><p><strong>奥卡姆精神</strong></p><p> cola4.0升华了</p><p> 什么是应用架构的本质，它这样定义架构，架构的本质，简单来说，就是<strong>要素结构</strong>。</p><p> 所谓的<strong>要素（Components）是指架构中的主要元素，结构是指要素之间的相互关系（Relationship）</strong>。<br>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220653468.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220653468.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220653468.png)</p>            </figure></p><ul><li>组织架构：其要素是什么？组成组织的要素当然是人，结构呢？结构是人与人之间的关系。因此，组织架构就是关于定义人的职责划分，以及人与人之间协作关系的一种设计方法。</li><li>应用架构：<strong>代码是其核心组成要素，结构就是这些代码该如何被组织</strong>，也就是要如何处理模块（Module）、组件（Component）、包（Package）和类（Class）之间的关系。简而言之，<strong>应用架构就是要解决代码要如何被组织的问题。</strong></li></ul><p> 一个没有架构的应用系统，就像一堆随意堆放、杂乱无章的玩具，只有熵值，没有熵减。而一个有良好架构的应用系统，有章法、有结构，一切都显得井井有条。<br>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220636733.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220636733.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220636733.png)</p>            </figure></p><ul><li>好的组织架构<ul><li>会遵循一定的架构模式，大部分的组织都会按职能和业务来设计自己的架构。如果你反其道而行之，硬要把销售、财务和技术人员放在一个部门，就会显得很奇怪。</li></ul></li><li>好的应用架构<ul><li>遵循一些共同模式，不管是六边形架构、洋葱圈架构、整洁架构、还是COLA架构，<strong>都提倡以业务为核心，解耦外部依赖，分离业务复杂度和技术复杂度</strong>。</li></ul></li></ul><p> 应用架构的本质，就是要从繁杂的业务系统中提炼出共性，找到解决业务问题的最佳共同模式，为开发人员提供统一的认知，治理混乱。帮助应用系统“从混乱到有序”，<strong>COLA架构就是为此而生，其核心职责就是定义良好的应用结构，提供最佳实践</strong>。</p><p> 例如，典型的业务系统都需要：</p><ul><li>接收request，响应response；</li><li>做业务逻辑处理，像校验参数，状态流转，业务计算等等；</li><li>和外部系统有联动，像数据库，微服务，搜索引擎等；</li></ul><p> 正是有这样的共性存在，才会有很多普适的架构思想出现，比如分层架构、六边形架构、洋葱圈架构、整洁架构（Clean Architecture）、DDD架构等等。</p><p> 对于一个典型的业务应用系统来说，COLA会做如下层次定义，每一层都有明确的职责定义：</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220617858.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220617858.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220617858.png)</p>            </figure></p><p>1）适配层（Adapter Layer）：负责对前端展示（web，wireless，wap）的路由和适配，对于传统B/S系统而言，adapter就相当于MVC中的controller；</p><p>2）应用层（Application Layer）：主要负责获取输入，组装上下文，参数校验，调用领域层做业务处理，如果需要的话，发送消息通知等。层次是开放的，应用层也可以绕过领域层，直接访问基础实施层；</p><p>3）领域层（Domain Layer）：主要是封装了核心业务逻辑，并通过领域服务（Domain Service）和领域对象（Domain Entity）的方法对App层提供业务实体和业务逻辑计算。领域是应用的核心，不依赖任何其他层次；</p><p>4）基础实施层（Infrastructure Layer）：主要负责技术细节问题的处理，比如数据库的CRUD、搜索引擎、文件系统、分布式服务的RPC等。此外，领域防腐的重任也落在这里，外部依赖需要通过gateway的转义处理，才能被上面的App层和Domain层使用。</p><p> 分层是属于大粒度的职责划分，太粗，我们有必要往下再down一层，细化到包结构的粒度，才能更好的指导我们的工作。</p><p> 还是拿一堆玩具举例子，分层类似于拿来了一个架子，分包类似于在每一层架子上又放置了多个收纳盒。<strong>所谓的内聚，就是把功能类似的玩具放在一个盒子里，这样可以让应用结构清晰，极大的降低系统的认知成本和维护成本</strong>。<br>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220609419.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220609419.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220609419.png)</p>            </figure></p><p> 那么，对于一个后端应用来说，应该需要哪些收纳盒呢？这一块的设计真可谓是费了老鼻子劲了，基本上每一次COLA的迭代都会涉及到包结构的调整，迭代到现在，才算基本稳定下来。<br>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220601108.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220601108.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220601108.png)</p>            </figure></p><p>各个包结构的简要功能描述，如下表所示：</p><table><thead><tr><th align="left">层次</th><th align="left">包名</th><th align="left">功能</th><th align="left">必选</th></tr></thead><tbody><tr><td align="left">Adapter层</td><td align="left">web</td><td align="left">处理页面请求的Controller</td><td align="left">否</td></tr><tr><td align="left">Adapter层</td><td align="left">wireless</td><td align="left">处理无线端的适配</td><td align="left">否</td></tr><tr><td align="left">Adapter层</td><td align="left">wap</td><td align="left">处理wap端的适配</td><td align="left">否</td></tr><tr><td align="left"></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left">App层</td><td align="left">executor</td><td align="left">处理request，包括command和query</td><td align="left">是</td></tr><tr><td align="left">App层</td><td align="left">consumer</td><td align="left">处理外部message</td><td align="left">否</td></tr><tr><td align="left">App层</td><td align="left">scheduler</td><td align="left">处理定时任务</td><td align="left">否</td></tr><tr><td align="left"></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left">Domain层</td><td align="left">model</td><td align="left">领域模型</td><td align="left">否</td></tr><tr><td align="left">Domain层</td><td align="left">ability</td><td align="left">领域能力，包括DomainService</td><td align="left">否</td></tr><tr><td align="left">Domain层</td><td align="left">gateway</td><td align="left">领域网关，解耦利器</td><td align="left">是</td></tr><tr><td align="left"></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left">Infra层</td><td align="left">gatewayimpl</td><td align="left">网关实现</td><td align="left">是</td></tr><tr><td align="left">Infra层</td><td align="left">mapper</td><td align="left">ibatis数据库映射</td><td align="left">否</td></tr><tr><td align="left">Infra层</td><td align="left">config</td><td align="left">配置信息</td><td align="left">否</td></tr><tr><td align="left"></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left">Client SDK</td><td align="left">api</td><td align="left">服务对外透出的API</td><td align="left">是</td></tr><tr><td align="left">Client SDK</td><td align="left">dto</td><td align="left">服务对外的DTO</td><td align="left">是</td></tr><tr><td align="left"></td><td align="left"></td><td align="left"></td><td align="left"></td></tr></tbody></table><p> 这点很重要，应该👂🏻进作者的良言：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">为什么Domain的model是可选的？因为COLA是应用架构，不是DDD架构。在工作中，很多同学问我领域模型要怎么设计，我的回答通常是：无有必要勿增实体。领域模型对设计能力要求很高，没把握用好，一个错误的抽象还不如不抽象，宁可不要用，也不要滥用，不要为了DDD而DDD。</span><br><span class="line"></span><br><span class="line">问题的关键是要看，新增的模型没有给你带来收益。比如有没有帮助系统解耦，有没有提升业务语义表达能力的提升，有没有提升系统的可维护性和可测性等等。</span><br><span class="line"></span><br><span class="line">模型虽然可选，但DDD的思想是一定要去学习和贯彻的，特别是统一语言、边界上下文、防腐层的思想，值得深入学习，仔细体会。实际上，COLA里面的很多设计思想都来自于DDD。其中就包括领域包的设计。</span><br></pre></td></tr></table></figure><p> 前面的包定义，都是功能维度的定义。为了兼顾领域维度的内聚性，我们有必要对包结构进行一下微调，即顶层包结构应该是按照领域划分，让领域内聚。</p><p> 也就是说，我们要综合考虑功能和领域两个维度包结构定义。按照领域和功能两个维度分包策略，最后呈现出来的，是如下图所示的顶层包节点是领域名称，领域之下，再按功能划分包结构。<br>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220549484.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220549484.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220549484.png)</p>            </figure></p><p>例如，在我们刚刚上线的一个云店铺（cloudstore）项目中，按照COLA的分包策略，我们在每一个module下面首先按照领域做一个顶层划分，然后在领域内，再按照功能进行分包。<br>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220540738.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220540738.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220540738.png)</p>            </figure></p><p> “高内聚，低耦合”这句话，你工作的越久，就越会觉得其有道理。</p><p> <strong>所谓耦合就是联系的紧密程度，只要有依赖就会有耦合，不管是进程内的依赖，还是跨进程的RPC依赖，都会产生耦合</strong>。依赖不可消除，同样，耦合也不可避免。我们所能做的不是消除耦合，而是把耦合降低到可以接受的程度。在软件设计中，有大量的设计模式，设计原则都是为了解耦这一目的。</p><p> 在DDD中有一个很棒的解耦设计思想——防腐层（Anti-Corruption），简单说，就是应用不要直接依赖外域的信息，要把外域的信息转换成自己领域上下文（Context）的实体再去使用，从而实现本域和外部依赖的解耦。</p><p> 在COLA中，我们把AC这个概念进行了泛化，将数据库、搜索引擎等数据存储都列为外部依赖的范畴。<strong>利用依赖倒置，统一使用gateway来实现业务领域和外部依赖的解耦</strong>。</p><p> 其实现方式如下图所示，主要是在Domain层定义Gateway接口，然后在Infrastructure提供Gateway接口的实现。<br>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220430164.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220430164.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220430164.png)</p>            </figure></p><p>举个例子，假如有一个电商系统，对于下单这个操作，它需要联动订单服务、商品服务、库存服务、营销服务等多个系统才能完成。</p><p>那么在订单域，该如何获取商品和库存信息呢？最直接的方式，无外乎就是RPC调用商品和库存服务，拿到DTO直接使用就完了。</p><p>然而，商品域吐出的是一个大而全的DTO（可能包含几十个字段），而在下单这个阶段，订单所需要的可能只是其中几个字段而已。更合适的做法，应该是在订单域中，使用gateway对商品域和库存域的依赖进行解耦。<br>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220305848.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220305848.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220305848.png)</p>            </figure></p><p> 这样做有两个好处，一个是降低了对外域信息依赖的耦合；另一个是通过上下文映射（Context mapping），确保本领域边界上下文（Bounded context）下领域知识的完整性，实现了统一语言（Ubiquitous language）。</p><p> 然后，cola全副武装的威力绽放了</p><ul><li>COLA架构：关注应用架构的定义和构建，提升应用质量。</li><li>COLA组件：提供应用开发所需要的可复用组件，提升研发效率。</li></ul><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214220118040.png" alt="img](https://zivlnoff.github.io/graph/image-20211214220118040.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214220118040.png)</p>            </figure></p><p> 我觉得能把以下理解好，就能理解计算机中很重要的一个概念，所以我把它毫无保留的摘抄了下来————任何难以直接实现的目的，都可以通过一层抽象去完成。</p><h1 id="摘录：-1"><a href="#摘录：-1" class="headerlink" title="摘录："></a>摘录：</h1><h4 id="新二方库定位"><a href="#新二方库定位" class="headerlink" title="新二方库定位"></a>新二方库定位</h4><p>关于二方库的定位表面上来看，是一个简单问题，<strong>因为服务的二方库无外乎就是用来暴露接口和传递数据的（DTO）。不过，往深层次思考，它并不是一个简单的问题，因为它涉及到不同界限上下文（Bounded Context）之间的协作问题。</strong> 它是分布式环境下，不同服务（SOA，RPC，微服务，叫法不同，本质一样）之间如何协作的重要架构设计问题。</p><h5 id="Bounded-Context之间的协作"><a href="#Bounded-Context之间的协作" class="headerlink" title="Bounded Context之间的协作"></a>Bounded Context之间的协作</h5><p>如何实现不同域之间的协作，同时又要保证各自领域的概念的完整性是有一套方法论的。总体来说，大概有两种方式：共享内核（Shared Kernel）和防腐层（ACL，Anti-Corruption Layer）。</p><p><strong>1. 共享内核（Shared Kernel）</strong></p><blockquote><p>It’s possible that only one of the teams will maintain the code, build, and test for what is shared. A Shared Kernel is often very difficult to conceive in the first place, and difficult to maintain, because you must have open communication between teams and constant agreement on what constitutes the model to be shared.</p></blockquote><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214223739272.png" alt="img](https://zivlnoff.github.io/graph/image-20211214223739272.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214223739272.png)</p>            </figure></p><p>上面是引用《DDD Distilled》（作者是Vaughn Vernon）关于Shared Kernel描述的原话，其优点是Share（减少重复建设），其缺点也是Share（团队之间紧耦合）。</p><p><strong>2. 防腐层（ACL，Anti-Corruption Layer）</strong></p><blockquote><p>An Anticorruption Layer is the most defensive Context Mapping relationship, where the downstream team creates a translation layer between its Ubiquitous Language (model) and the Ubiquitous Language (model) that is upstream to it.</p></blockquote><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211214223306039.png" alt="img](https://zivlnoff.github.io/graph/image-20211214223306039.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211214223306039.png)</p>            </figure></p><p>同样是来自于《DDD Distilled》, 防腐层是隔离最彻底的做法，其优点是没有Share（完全解耦，各自独立），其缺点也是没有Share（有一定的转换成本）。</p><p><strong>不过我和Vernon的观点差不多，都比较赞成防腐层的做法。因为增加的语义转换陈本，相较于系统的可维护性和可理解性而言，是完全值得的。</strong></p><blockquote><p>Whenever possible, you should try to create an Anticorruption Layer between your downstream model and an upstream integration model, so that you can produce model concepts on your side of the integration that specifically fit your business needs and that keep you completely isolated from foreign concepts.</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>我在阿里实习的57天</title>
      <link href="/2021/12/24/%E6%88%91%E5%9C%A8%E9%98%BF%E9%87%8C%E5%AE%9E%E4%B9%A0%E7%9A%8457%E5%A4%A9/"/>
      <url>/2021/12/24/%E6%88%91%E5%9C%A8%E9%98%BF%E9%87%8C%E5%AE%9E%E4%B9%A0%E7%9A%8457%E5%A4%A9/</url>
      
        <content type="html"><![CDATA[<h1 id="2021-10-21—成长的起点"><a href="#2021-10-21—成长的起点" class="headerlink" title="2021.10.21—成长的起点"></a>2021.10.21—成长的起点</h1><p> 至于我初入宫有多菜，我自己深知，但这些日子，只有一天出去玩了一整天剧本杀，所以也算是尽力了，我想朋友们。</p><p> 这篇文章是想总结一下这些天在各方各面学到的”财富“，虽然呆的时间不长，但收获不菲。</p><h2 id="技术汇总"><a href="#技术汇总" class="headerlink" title="技术汇总"></a>技术汇总</h2><ul><li>手写Spring IOC和AOP <strong>（IOC和AOP的思想）</strong></li><li>设计模式 <strong>（SOLID)</strong></li><li>maven</li><li>git <strong>（太好用了）</strong></li><li>json</li><li>mybatis</li><li>RPC <strong>（RPC之于微服务）</strong></li><li>环境（版本）隔离</li><li>配置中心</li><li>定时任务</li><li>流量削峰 <strong>(消息队列)</strong></li><li>DDD <strong>(充血模型和统一语言)</strong></li><li>日志、监控、核对（补偿）、兜底、降级、限流</li><li>全局唯一ID <strong>（雪花算法)</strong></li><li>热部署</li><li>分布式一致性 <strong>（Raft算法）</strong></li><li>cola框架 <strong>（🐂)</strong></li><li>Redis <strong>(缓存、分布式锁、发布订阅)</strong></li><li>CodeReview</li><li>JOS <strong>(这不是技术，是人生态度)</strong></li><li>技术方案设计</li></ul><p>实习前，除了JOS和git，其他最多也只是听说有这个东东。</p><h3 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h3><ul><li>简单工厂</li><li>抽象工厂</li><li>代理模式 <strong>（AOP)</strong></li><li>策略模式 <strong>(扩展点)</strong></li><li>建造者模式</li><li>状态模式 <strong>（电梯）</strong></li><li>facade <strong>（repository）</strong></li><li>原型设计模式</li><li>命令模式 <strong>（事件）</strong></li><li>责任链 <strong>（类等级制度）</strong></li><li>适配器 <strong>（防腐层</strong>）</li><li>桥梁模式 <strong>（中心）</strong></li></ul><h3 id="技术方案设计"><a href="#技术方案设计" class="headerlink" title="技术方案设计"></a>技术方案设计</h3><ul><li>基于缓存方案的库存扣减方案</li><li>反向索引</li><li>顺序消息</li><li>扩展点</li><li>流量削峰</li><li>令牌桶</li><li>传统数据库能否实现分布式场景下的一致性</li><li>单元化的业务场景取舍</li></ul><h2 id="哲学汇总"><a href="#哲学汇总" class="headerlink" title="哲学汇总"></a>哲学汇总</h2>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JOS技术方案</title>
      <link href="/2021/12/24/JOS%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88/"/>
      <url>/2021/12/24/JOS%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/jos.png" alt="jos](https://zivlnoff.github.io/graph/jos.png)" title="" class="">                <p>jos](https://zivlnoff.github.io/graph/jos.png)</p>            </figure></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>mac安装Jos qemu环境</title>
      <link href="/2021/12/24/mac%E5%AE%89%E8%A3%85Jos-qemu%E7%8E%AF%E5%A2%83/"/>
      <url>/2021/12/24/mac%E5%AE%89%E8%A3%85Jos-qemu%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<ol><li>安装xcode 输入命令 xcode-select –install</li><li>下载patched version of qemu： git clone <a href="https://github.com/mit-pdos/6.828-qemu.git">https://github.com/mit-pdos/6.828-qemu.git</a> qemu</li><li>配置源代码：./configure –disable-kvm –disable-werror –disable-sdl –prefix=/Users/alsc/Desktop/ –target-list=”i386-softmmu x86_64-softmmu”</li></ol><ul><li>ERROR: pkg-config binary ‘pkg-config’ not found</li><li>命令行安装pkg-config：brew install pkg-config</li><li>查看pkg-config环境配置路径：pkg-config –variable pc_path pkg-config<ul><li>输出 /usr/local/lib/pkgconfig:/usr/local/share/pkgconfig:/usr/lib/pkgconfig:/usr/local/Homebrew/Library/Homebrew/os/mac/pkgconfig/11.0</li></ul></li></ul><ol start="4"><li>安装完pkg-config后运行 ./configure –disable-kvm –disable-werror –disable-sdl –prefix=/Users/alsc/Desktop/ –target-list=”i386-softmmu x86_64-softmmu”</li></ol><ul><li><p>ERROR: glib-2.12 gthread-2.0 is required to compile QEMU</p><ul><li><p>命令行安装 pkg-config –libs glib-2.12</p><ul><li><p>Package glib-2.12 was not found in the pkg-config search path.</p><p>Perhaps you should add the directory containing `glib-2.12.pc’</p><p>to the PKG_CONFIG_PATH environment variable</p><p>No package ‘glib-2.12’ found</p></li></ul></li></ul></li><li><p>命令行安装 brew install glib</p></li></ul><ol start="5"><li>安装完glib后运行 ./configure –disable-kvm –disable-werror –disable-sdl –prefix=/Users/alsc/Desktop/ –target-list=”i386-softmmu x86_64-softmmu”</li></ol><ul><li><p>ERROR: pixman &gt;= 0.21.8 not present. Your options:</p><p> (1) Preferred: Install the pixman devel package (any recent</p><p> distro should have packages as Xorg needs pixman too).</p><p> (2) Fetch the pixman submodule, using:</p><p> git submodule update –init pixman</p><ul><li>命令行安装 brew install pixman</li></ul></li></ul><ol start="6"><li>安装完pixman后运行 ./configure –disable-kvm –disable-werror –disable-sdl –prefix=/Users/alsc/Desktop/ –target-list=”i386-softmmu x86_64-softmmu”</li></ol><ul><li><p>成功输出</p><ul><li><p>ld: unknown option: –verbose</p><p>Install prefix /Users/alsc/Desktop/</p><p>BIOS directory /Users/alsc/Desktop//share/qemu</p><p>…</p><p>CFLAGS -O2 -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=2 -I/usr/local/Cellar/glib/2.70.1/include -I/usr/local/Cellar/glib/2.70.1/include/glib-2.0 -I/usr/local/Cellar/glib/2.70.1/lib/glib-2.0/include -I/usr/local/opt/gettext/include -I/usr/local/Cellar/pcre/8.45/include -g</p><p>QEMU_CFLAGS -I/usr/local/Cellar/pixman/0.40.0/include/pixman-1 -m64 -DOS_OBJECT_USE_OBJC=0 -arch x86_64 -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -Wstrict-prototypes -Wredundant-decls -Wall -Wundef -Wwrite-strings -Wmissing-prototypes -fno-strict-aliasing -fno-common -Wno-string-plus-int -Wno-initializer-overrides -Wendif-labels -Wmissing-include-dirs -Wempty-body -Wnested-externs -Wformat-security -Wformat-y2k -Winit-self -Wignored-qualifiers -Wold-style-definition -Wtype-limits -fstack-protector-strong</p><p>LDFLAGS -m64 -framework CoreFoundation -framework IOKit -arch x86_64 -g</p><p>make make</p><p>install install</p><p>python python -B</p><p>smbd /usr/sbin/smbd</p><p>module support no</p><p>host CPU x86_64</p><p>…</p></li></ul></li></ul><ol start="7"><li><p>make &amp;&amp; make install</p></li><li><p>PATH=${PATH}:/usr/local/opt/gettext/bin make install</p></li><li><p>下载Clion</p></li><li><p>进入lab1目录 命令行输入 make</p></li></ol><ul><li><p>Error: Couldn’t find an i386-<em>-elf version of GCC/binutils.<br>*** Is the directory with i386-jos-elf-gcc in your PATH?<br>*** If your i386-</em>-elf toolchain is installed with a command<br>*** prefix other than ‘i386-jos-elf-‘, set your GCCPREFIX<br>*** environment variable to that prefix and run ‘make’ again.<br>*** To turn off this error, run ‘gmake GCCPREFIX= …’.</p><hr><hr><p>*** Error: Couldn’t find a working QEMU executable.<br>*** Is the directory containing the qemu binary in your PATH<br>*** or have you tried setting the QEMU variable in conf/env.mk?</p><hr><p>clang: error: unsupported option ‘-gstabs’<br>clang: error: unknown argument: ‘-fno-tree-ch’</p><ul><li>as kern/entry.S<br>clang: error: unsupported option ‘-gstabs’<br>clang: error: unsupported option ‘-gstabs’<br>clang: error: unknown argument: ‘-fno-tree-ch’<br>make: *** [obj/kern/entry.o] Error 1</li></ul></li></ul><ol start="11"><li><p>安装RISC-V toolchain 是否有必要？  没必要</p></li><li><p><a href="https://zhayujie.com/mit6828-env.html">https://zhayujie.com/mit6828-env.html</a></p></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>受了文档的痛</title>
      <link href="/2021/12/24/%E5%8F%97%E4%BA%86%E6%96%87%E6%A1%A3%E7%9A%84%E7%97%9B/"/>
      <url>/2021/12/24/%E5%8F%97%E4%BA%86%E6%96%87%E6%A1%A3%E7%9A%84%E7%97%9B/</url>
      
        <content type="html"><![CDATA[<p> 相比于技术的理解、学习、使用、进而转化为能力的提升这些自身能控制并能直接体会的到的“食粮”，学习业务逻辑未免过于痛苦了。不得不思考一个问题，写代码会把“这是写给人看的”贴在脑门上进而追求逻辑清晰、良好注释、高内聚、架构设计、领域设计等等，项目技术方案是不是也应该“让新人能看懂呢？”</p><p> 一个项目文档应该有什么，我自己也做得不好，虽然接触时间很短，但我知道这种难受不会是短暂的，不想每个人进来都被折磨一阵子才稍微顺手点，或者就是要去思考交流成本的问题了，因为交流的顺畅是这行业项目发展到一定高度最重要的东西了在我看来。</p><p> 我觉得但凡是学习，都得有个入口吧，应该是项目系统架构、业务架构、我们的项目注重什么、为什么要弄这个项目、也就是尽可能的“大”。这一点不难，每个团队都可以做到，当然，及时更新和简洁清晰也不是那么容易的。</p><p> 然后就是领域概念，这个我认为DDD提供的方法是合理的，这里应该允许有“新的”概念，但一定要充分解释并放在一块，其实也是把文档内聚了。</p><p> 进而区分业务和技术方案，从业务可以留个到技术方案的跳转链接，而且业务按时间顺序从新到旧，及时更新，并注明已经过期的业务，不要让别人浪费时间去看一个“已经成仁”的业务！</p><p> 技术方案就是画图画图！！加上简洁的解释！！让人知道你在干嘛，为什么这样干。</p><p> 我也不喜欢看鼠标滑不到底的技术方案，不是因为怕看的多，而是怕看完之后去想，我这是看了个啥？我串不通！我自己也写的非常繁琐（不要把除了技术之外的东西放到这个篮子里）至于测试之类的东西，也开个目录好的嘛。</p><p> 为了帮助新人更快成为项目中“守规矩”的一员，请大佬们把代码中、中间件的使用中、配置中用到的神技都拿出来，而且是符合一个宗旨的，比如关注性能和设计很重要，又比如统一用什么打日志，统一架构层，统一语法（虽然这很难）。</p><p> 请不要没想清楚就开一个目录，不要让人点进去了带着失望而归，嗯就这个箭头“&lt;-”~~。</p><p> 请把所有“有用”的东西留下，请按类别分类，合理跳转，细节用时间排序，让人带着这个是干嘛的想法进，带着好简单，原来是这样的想法舒适的走出你的领地。</p><p> 一个项目的完善是很不容易的，至少在开发人员、测试人员、业务方能力达到一致性就没那么简单，但只要勤勤恳恳的、字字斟酌的，写出来的文档那就是让人想多看几眼下面的署名！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Raft的理念就是放大直觉效益</title>
      <link href="/2021/12/24/Raft%E7%9A%84%E7%90%86%E5%BF%B5%E5%B0%B1%E6%98%AF%E6%94%BE%E5%A4%A7%E7%9B%B4%E8%A7%89%E6%95%88%E7%9B%8A/"/>
      <url>/2021/12/24/Raft%E7%9A%84%E7%90%86%E5%BF%B5%E5%B0%B1%E6%98%AF%E6%94%BE%E5%A4%A7%E7%9B%B4%E8%A7%89%E6%95%88%E7%9B%8A/</url>
      
        <content type="html"><![CDATA[<h1 id="为什么要学习Raft"><a href="#为什么要学习Raft" class="headerlink" title="为什么要学习Raft"></a>为什么要学习Raft</h1><p> 起初，就是好奇分布式关系数据库怎么去实现一致性的，觉得这是一件复杂的事，吃饭跑步也会想，去看了下paxos，但因事耽误了。后面看了《Redis设计与实现》，其中Election就提到了Raft算法，然后才去了解Raft。学习本身就是DFS的过程。至于为什么学Raft，我想有以下几点：</p><ol><li>更深的去理解一致性的概念。</li><li>将维度或者说是视角从单体到分布式，遇到的问题需要直视。</li><li>Raft有很多值得学习的看问题的角度，如哲学角度。</li></ol><p>只有热爱，知识才能发挥超越本身的价值。</p><h1 id="Raft—Wiki"><a href="#Raft—Wiki" class="headerlink" title="Raft—Wiki"></a>Raft—Wiki</h1><p> <strong>Raft</strong> is a <a href="https://en.wikipedia.org/wiki/Consensus_(computer_science)">consensus</a> algorithm designed as an alternative to the <a href="https://en.wikipedia.org/wiki/Paxos_(computer_science)">Paxos</a> family of algorithms. It was meant to be more understandable than Paxos by means of separation of logic, but it is also formally proven safe and offers some additional features.[<a href="https://en.wikipedia.org/wiki/Raft_(algorithm)#cite_note-paper-1">1]</a> Raft offers a generic way to distribute a <a href="https://en.wikipedia.org/wiki/Finite-state_machine">state machine</a> across a <a href="https://en.wikipedia.org/wiki/Computer_cluster">cluster</a> of computing systems, ensuring that each node in the cluster agrees upon the same series of state transitions. It has a number of open-source reference implementations, with full-specification implementations in <a href="https://en.wikipedia.org/wiki/Go_(programming_language)">Go</a>, <a href="https://en.wikipedia.org/wiki/C%2B%2B">C++</a>, <a href="https://en.wikipedia.org/wiki/Java_(programming_language)">Java</a>, and <a href="https://en.wikipedia.org/wiki/Scala_(programming_language)">Scala</a>.[<a href="https://en.wikipedia.org/wiki/Raft_(algorithm)#cite_note-website-2">2]</a> It is named after Reliable, Replicated, Redundant, And Fault-Tolerant.[<a href="https://en.wikipedia.org/wiki/Raft_(algorithm)#cite_note-3">3]</a></p><p>Raft is not a <a href="https://en.wikipedia.org/wiki/Byzantine_fault">Byzantine fault</a> tolerant algorithm: the nodes trust the elected leader.[<a href="https://en.wikipedia.org/wiki/Raft_(algorithm)#cite_note-paper-1">1]</a></p><p> Raft是一种共识（一致性）算法，设计用于替代Paxos算法家族。通过逻辑分离的方式，它被认为比Paxos更容易理解，但它也被正式证明是安全的，并提供了一些额外的features。Raft提供了一种在计算系统集群中分发状态机的通用方法，确保集群中的每个节点都满足相同的状态转换系列。Raft不是拜占庭容错算法。</p><h1 id="传统请求应答"><a href="#传统请求应答" class="headerlink" title="传统请求应答"></a>传统请求应答</h1><h2 id="主从同步复制"><a href="#主从同步复制" class="headerlink" title="主从同步复制"></a>主从同步复制</h2><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211202144006663.png" alt="img](https://zivlnoff.github.io/graph/image-20211202144006663.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211202144006663.png)</p>            </figure></p><p> 客户端发送写请求，只有当主副本的数据成功同步到所有的从副本，才向客户端返回请求成功，可用性差，强一致性。</p><h2 id="主从异步复制"><a href="#主从异步复制" class="headerlink" title="主从异步复制"></a>主从异步复制</h2><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211202144102607.png" alt="img](https://zivlnoff.github.io/graph/image-20211202144102607.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211202144102607.png)</p>            </figure></p><p> 客户端发送写请求，主副本成功即可返回请求成功，后台另起线程异步将数据同步到从副本，可用性好。一致性分析：</p><ul><li>如果主副本无故障，最终一致性</li><li>如果主副本在返回请求成功之后宕机，数据不一致，</li></ul><h1 id="Raft请求应答TimeLine"><a href="#Raft请求应答TimeLine" class="headerlink" title="Raft请求应答TimeLine"></a>Raft请求应答TimeLine</h1><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211202142531637.png" alt="img](https://zivlnoff.github.io/graph/image-20211202142531637.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211202142531637.png)</p>            </figure></p><p> Raft通过选举Leader，使其全权负责Client请求、管理Replicated log、决定何时满足安全的将log entries应用到状态机，来保证高可用性和最终一致性。</p><h1 id="Raft如何防止知识溢出"><a href="#Raft如何防止知识溢出" class="headerlink" title="Raft如何防止知识溢出"></a>Raft如何防止知识溢出</h1><p> Raft将一致性问题分解成3个各自独立的子问题：1. Election。 2. Log Replication。3. Safety。</p><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="Election"><a href="#Election" class="headerlink" title="Election"></a>Election</h1><h2 id="初态"><a href="#初态" class="headerlink" title="初态"></a>初态</h2><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211202150819811.png" alt="img](https://zivlnoff.github.io/graph/image-20211202150819811.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211202150819811.png)</p>            </figure></p><ul><li>term：任期，单调递增。</li><li>Follower：从副本。</li><li>Election Timeout：选举超时时间。</li></ul><p> 各服务器启动后，将自身状态设置为Follower，term = 0，设置Election Timeout（150ms — 300ms），Timeout时间最小的Follower会将term自增，并将自身状态置为Candidate，开始自荐。</p><h2 id="候选人自荐"><a href="#候选人自荐" class="headerlink" title="候选人自荐"></a>候选人自荐</h2><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211202152755353.png" alt="img](https://zivlnoff.github.io/graph/image-20211202152755353.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211202152755353.png)</p>            </figure></p><ul><li>Candidate：候选人。</li><li>Request RPC：候选人自荐RPC调用。</li><li>votedFor：当前任期的票投给了谁。（一个term，只能投给一个人）</li></ul><p> 自身votedFor投给自己，发送Request RPC调用，Follower收到Request RPC调用，，做以下检查：</p><ul><li>Candadate term &gt;= 自身term</li><li>自身votedFor为null</li><li>Candidate的log至少和自身一样新。</li></ul><p> 满足则将term更新并将票投出。当Candidate收到大多数（包括自身）票数，自荐成功，修改自身状态为Leader。</p><h2 id="做主"><a href="#做主" class="headerlink" title="做主"></a>做主</h2><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211202160638970.png" alt="img](https://zivlnoff.github.io/graph/image-20211202160638970.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211202160638970.png)</p>            </figure></p><ul><li>Leader：主。</li><li>AppendEntries RPC：<ul><li>如果没有需要replication的log，作为heartBeat延续Leader任期以防止不必要的新一轮选举。</li><li>如果有新的log entries，则同步复制。</li></ul></li><li>command：状态机的执行命令。</li><li>log[]：log entries；每个entry保存了状态机的command以及Leader自身term或者非Leader收到该命令时AppendEntries RPC的任期。</li><li>commitIndex：可以安全应用到状态机的highest index。log entries被视为commited态只要当前Leader的最新entry成功replicated到majority Servers。（下文细讲）</li><li>lastApplied：已应用到状态机的highest log index。</li></ul><p> Leader通过HeartBeat（不带log entry的AppendEntries RPC）来维护自己的地位。当收到client消息的时候，更新自身log[]，通过并行发送AppendEntries RPC同步log。</p><h1 id="Log-Replication"><a href="#Log-Replication" class="headerlink" title="Log Replication"></a>Log Replication</h1><p> 选举成功后，开始服务客户端请求。Leader接收请求，将command写入log[]，并行发送AppendEntries RPC给其他Servers，一旦收到大多数Success（这时该log entry就处于commited态），Leader设置新的commitIndex，apply到自身状态机，向client返回请求结果，随后的AppendEntries会告诉Follower安全的commit信息，同时apply到状态机。</p><h2 id="正常case"><a href="#正常case" class="headerlink" title="正常case"></a>正常case</h2><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211202171334445.png" alt="img](https://zivlnoff.github.io/graph/image-20211202171334445.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211202171334445.png)</p>            </figure></p><p> 此状态明确了一个概念：在大多数Server写入同一个log entry时，该log entry在上帝视角就是commited态。</p><h2 id="极端case"><a href="#极端case" class="headerlink" title="极端case"></a>极端case</h2><p> 当发生Leader宕机，可能出现log不一致：</p><ul><li>Follower可能miss在Leader上存在的Entries</li><li>Follower可能存在Leader上没有的entries。</li></ul><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211202173159955.png" alt="img](https://zivlnoff.github.io/graph/image-20211202173159955.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211202173159955.png)</p>            </figure></p><p> 当term=8时，Leader处于最上层状态时，a-f是可能出现的follower场景。一种可能的TimeLine：</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/1638439372443.gif" alt="img](https://zivlnoff.github.io/graph/1638439372443.gif)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/1638439372443.gif)</p>            </figure></p><h1 id="深入Committed"><a href="#深入Committed" class="headerlink" title="深入Committed"></a>深入Committed</h1><p> 假设当Entry存在于Majority服务器即可被commit，会出现下图所示情况，导致状态机执行序列不一致。</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211202193330353.png" alt="img](https://zivlnoff.github.io/graph/image-20211202193330353.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211202193330353.png)</p>            </figure></p><p> 当服务器达到（c）状态时，Leader为S1，接收到新的请求后通过AppendEntries RPC将index=2处的log entry同步复制到S3，此时index=2处的Entry已经存在于3个服务器&gt;5/2，如果此时commit并apply到状态机，且S1宕机，S5恢复后因为其log比S2、S3、S4新，所以可以选举成功且将Entries同步到其他服务器，这个时候只有S1、S2、S3执行了entry2的命令，且之后被overwrite，产生了数据不一致。</p><h2 id="Committing-entries-from-previous-terms"><a href="#Committing-entries-from-previous-terms" class="headerlink" title="Committing entries from previous terms"></a>Committing entries from previous terms</h2><p> 为了解决上面的情况，Raft不会通过计算replicas去commit任何之前的terms对应的日志。只有当log entries term等于当前Leader的term时才通过计算replicas来判断commit。只要新的entry被commit，旧log都会被间接提交。</p><h1 id="集群成员改变"><a href="#集群成员改变" class="headerlink" title="集群成员改变"></a>集群成员改变</h1><p> 到目前为止，我们所讨论的Cluster中的服务器个数是固定的。在实际工程中，如果我们在需要变更服务器台数的时候，重启重新配置的话，会有一段时间集群处于不可用状态，为了能够动态的增加、减少、置换机器，Raft采用了two-phase方案。如果不增加extra算法直接转换可能出现的case：</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211202202913057.png" alt="img](https://zivlnoff.github.io/graph/image-20211202202913057.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211202202913057.png)</p>            </figure></p><p> 直接从Cold转变为Cnew会导致同时出现两个Leader，因为对于Cold，2is majority，而对于Cnew，3is majority， 5可同时满足2和3的sum，所以两个Leader是完全有可能的！</p><p> 因此在Raft算法中，集群先转换为一种joint consensus态，一旦此状态commit，系统就会转变为新的配置。Join consensus结合了old和new两种配置，即Cold,new。</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211202204306533.png" alt="img](https://zivlnoff.github.io/graph/image-20211202204306533.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211202204306533.png)</p>            </figure></p><p>参考文献：</p><ol><li><a href="https://web.stanford.edu/~ouster/cgi-bin/papers/raft-atc14">In Serach of an Understandable Consensus Algorithm</a></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>分布式事务</title>
      <link href="/2021/12/24/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/"/>
      <url>/2021/12/24/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><p> 客官请移步到这 <a href="https://zivlnoff.github.io/">数据库事务</a></p><h1 id="分布式事务（使用场景？"><a href="#分布式事务（使用场景？" class="headerlink" title="分布式事务（使用场景？"></a>分布式事务（使用场景？</h1><p> 随着互联网的飞速发展，单节点瓶颈、无容灾、负载能力低、难以维护、无法灵活扩展的单体架构在规模庞大的工程里已无力回天，当然这也促成了分布式计算、分布式存储、分布式服务登上大荧幕。而在企业中，最令人头疼的就是怎么让分布式存储不出错性能又好，那就需要对分布式事务有极其敏锐的认识。</p><p> 在分布式场景下除了保证事务的ACID性质，还需要尽可能的满足CAP，即C(一致性)、A(可用性)、P(分区容忍性)的要求，一般情况下，我们简单的实现会是这样：有一个调停者(Mediator)去管理多个协同者（Colleague），以达到一致性的要求。调停者类似老师接收到学校的通知，下达到每一个同学，保证学生都能接收到学校的通知。</p><p> 基于此出现了调停者模式:</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211127154524244.png" alt="img](https://zivlnoff.github.io/graph/image-20211127154524244.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211127154524244.png)</p>            </figure></p><ul><li><p><strong>Mediator抽象中介者角色</strong><br>抽象中介者角色定义统一的接口，用于各同事角色之间的通信。</p></li><li><p><strong>ConcreteMediator具体中介者角色</strong><br>具体中介者角色通过协调各同事实现协作行为，因此它必须依赖于各个具体同事角色。</p></li><li><p><strong>Colleague同事角色</strong><br>每一个同事角色都知道中介者角色，而且与其他的同事角色通信的时候，一定要通过中介者角色协作。</p></li><li><p><strong>ConcreateColleague具体同事角色</strong></p><p>具体同事角色有自己operation，这个operation可以有两种：</p><ul><li><strong>第一种</strong>是同事本身的行为，比如改变对象本身的状态，处理自己的行为等，这种方法叫做自发行为（Self-Method),与其他的同事类或中介者没有任何的依赖</li><li><strong>第二种</strong>是必须依赖中介者才能完成的行为，叫做依赖方法（Dep-Method</li></ul><p>调停者模式可以去除个个协同者之间的依赖链，扩展以及替换都会更加灵活。分布式事务的DTP模型也是基于此被定义：</p></li></ul><h2 id="DTP模型"><a href="#DTP模型" class="headerlink" title="DTP模型"></a>DTP模型</h2><p> X/Open DTP(X/Open Distributed Transaction Processing Reference Model) 是X/Open 这个组织定义的一套分布式事务的标准，也就是了定义了规范和API接口，由厂商进行具体的实现。</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211127162937537.png" alt="img](https://zivlnoff.github.io/graph/image-20211127162937537.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211127162937537.png)</p>            </figure></p><p> X/Open DTP 定义了三个组件： AP，TM，RM</p><ul><li><p>AP(Application Program)：也就是应用程序，可以理解为使用DTP的程序</p></li><li><p>RM(Resource Manager)：资源管理器，这里可以理解为一个DBMS系统，或者消息服务器管理系统，应用程序通过资源管理器对资源进行控制。资源必须实现XA定义的接口</p></li><li><p>TM(Transaction Manager)：事务管理器，负责协调和管理事务，提供给AP应用程序编程接口（TX协议）以及管理资源管理器</p><p>其中，AP 可以和TM 以及 RM 通信，TM 和 RM 互相之间可以通信，DTP模型里面定义了XA接口，TM 和 RM 通过XA接口进行双向通信，例如:TM通知RM提交事务或者回滚事务，RM把提交结果通知给TM。AP和RM之间则通过RM提供的Native API 进行资源控制，这个没有进行约API和规范，各个厂商自己实现自己的资源控制，比如Oracle自己的数据库驱动程序。</p></li><li><p>TX协议：AP对不同TM的通用协议</p></li><li><p>XA 是X/Open DTP定义的资源管理器和事务管理器之间的接口规范，TM用它来通知和协调相关RM事务的开始、结束、提交或回滚。目前Oracle、Mysql、DB2都提供了对XA的支持。XA接口是双向的系统接口，在事务管理器(TM）以及多个资源管理器之间形成通信的桥梁（XA不能自动提交）</p></li></ul><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211127164436819.png" alt="img](https://zivlnoff.github.io/graph/image-20211127164436819.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211127164436819.png)</p>            </figure></p><p> 下面基于DTP模型，讨论2PC。</p><h2 id="2PC—二阶段提交"><a href="#2PC—二阶段提交" class="headerlink" title="2PC—二阶段提交"></a>2PC—二阶段提交</h2><p> 在XA协议的规范下，要求RM需提供prepare、commit、rollback能力，诞生第一个分布式事务解决方案——二阶段提交。</p><ul><li>第一阶段（使用XA协议的prepare）：<ul><li>TM询问所有RM是否同意提交，如果第一阶段所有RM同意提交，则进入第二阶段；否则放弃整体事务过程</li></ul></li><li>第二阶段（使用XA协议的commit/rollback）：<ul><li>TM通知所有RM进行提交，如RM提交错误则反馈TM，TM通知所有RM进行rollback</li></ul></li></ul><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211127165151237.png" alt="img](https://zivlnoff.github.io/graph/image-20211127165151237.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211127165151237.png)</p>            </figure></p><p> 2PC的ACID、CAP分析：</p><ul><li><p>A：原子性由RM自身提供的原子性保证，对于一般的关系数据库好说，但对于NoSql、RPC之类的就不太现实。</p></li><li><p>I：隔离性由对收到agree之后的第二阶段对资源的全局锁定来保证，但对性能有影响。</p></li><li><p>D：持久性由RM自身提供的持久性保证。</p></li><li><p>A：因为必须收到所有voter的投票，才能执行进行最终的commit/abort，就会出现RM中部分失效时，必须等到所有RM恢复才可以往前推，所以选择了强一致性，丢弃了可用性。（</p><p>单点故障</p><p>）</p><ul><li>而在第二阶段的执行中，如果有一个RM没法正常进行，整个资源就会无法释放（<strong>同步阻塞</strong>）。</li></ul></li><li><p>P：必须要满足，难不成RM只有一个部署？</p></li></ul><p> 2PC真的满足了强一致性吗？</p><table><thead><tr><th align="left">情况</th><th align="left">分析</th></tr></thead><tbody><tr><td align="left">第一阶段发送vote之后coordinator挂了，参与者没挂</td><td align="left">1. 参与者均agree，在coordinator恢复或重新选举新的coordinator后，重新commit，不会出现不一致。2. 参与者存在至少一个disagree，在coordinator恢复后，会收到disagree，前推abort，不会出现不一致；或者在重新选举后，检查到有disagree回答的存在，前推abort，不会出现不一致。</td></tr><tr><td align="left">第一阶段发送vote之后，coordinator没挂，参与者挂了</td><td align="left">1. 参与者无法恢复，相当于少了一个参与者，不会出现不一致。2. 参与者恢复，按原规则前推，不会出现不一致。</td></tr><tr><td align="left">第二阶段发送commit或abort之后，coordinator挂了，参与者没挂</td><td align="left">只要发送了commit或者abort，如果coordinator没法恢复，重新选举后，不会出现不一致；如果恢复了，正常前推。</td></tr><tr><td align="left">第二阶段发送commit或abort之后，coordinator没挂，参与者挂了</td><td align="left">1. 参与者无法恢复，相当于少了一个参与者，不会出现不一致。2. 参与者可恢复，恢复前一直阻塞，恢复后按原规则commit或abort，不会出现不一致。</td></tr><tr><td align="left"><strong>第二阶段发送comimt或abort之后，coordinator挂了，唯一接收到coordinator消息的参与者也挂了</strong></td><td align="left"><strong>这种情况下，如果要让剩下的参与者负起原来的责任，就必须按照上一个coordinator进行的操作继续下去，但我们无法知道上一个coordinator执行的是commit还是abort，也就不知道那个收到消息后挂了的参与者commit还是abort了。因此，无论我们对剩下的参与者执行commit或者abort，如果挂了的参与者恢复了，就可能造成这段时间的数据不一致！</strong></td></tr></tbody></table><p> 极端情况图示：</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211128154749943.png" alt="img](https://zivlnoff.github.io/graph/image-20211128154749943.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211128154749943.png)</p>            </figure></p><h2 id="3PC—三阶段提交"><a href="#3PC—三阶段提交" class="headerlink" title="3PC—三阶段提交"></a>3PC—三阶段提交</h2><p> 为了解决二阶段提交出现的极端情况导致的数据不一致，出现了3PC的解决方案。通过加入precomit阶段与超时机制来解决二阶段中的极端情况，如果在第二阶段结束coordinator发送commit或者abort之后和收到的参与者一起挂了，重新选举后可以通过precommit阶段的决策来判断是comit还是abort，因为一旦进入第二阶段，推进的决策已经产生并且一致(只能说大概率是这样)。</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211128160503866.png" alt="img](https://zivlnoff.github.io/graph/image-20211128160503866.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211128160503866.png)</p>            </figure></p><p> 但由于网络分区的存在，如果第二阶段coordinator发送了commit，voter2回答abort，voter3由于网络分区的缘故，超时自动commit，则只有voter1和voter2进行了abort，而voter3进行了commit，就产生了数据不一致的情况！</p><h3 id="通过聚会去理解2PC和3PC"><a href="#通过聚会去理解2PC和3PC" class="headerlink" title="通过聚会去理解2PC和3PC:"></a>通过聚会去理解2PC和3PC:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">计划举办整个聚会的人——主办人</span><br><span class="line">计划邀请来参加聚会的人——参与人</span><br><span class="line">2PC场景：</span><br><span class="line">主办人询问每一个参与人来不来参加聚会，如果都答应了，主办人就会通知每个人什么时候来，可能有人晚到，但一定会到！但如果有人没答应，而且聚会取消的消息只通知到了部分参与者（其中包括没答应的人），而且这些参与者和主办人都联系不到，那剩下同意来的参与者就不知道到底来不来了！来了，有人可以通知到了但是来不了，不一致！（数据不一致）</span><br><span class="line">3PC场景：</span><br><span class="line">主办人询问每一个参与人来不来参加聚会，如果都答应了，传递给所有参与人聚会一定会进行的消息（如果在这之前有人不来，大家都会等待，不会做出任何决定，就不会不一致）。但是如果有人突然来不了了，而且另外的人主办方之后没来的及通知临时取消(网络分区)，就依旧会出现有人来有人没来的情况（数据不一致）。但是通过第一阶段的恢复有理由相信大概率大家会来，因为机器不像人那么容易反悔！</span><br></pre></td></tr></table></figure><h3 id="3PC-gt-2PC"><a href="#3PC-gt-2PC" class="headerlink" title="3PC&gt;2PC?"></a>3PC&gt;2PC?</h3><p>相对于2PC，3PC主要解决了协调者宕机之后事务阻塞的问题，因为一旦参与者无法及时收到来自协调者的信息之后，他会默认执行commit。而不会一直持有事务资源并处于阻塞状态。但是这种机制也会导致数据一致性问题，因为，由于网络原因，协调者发送的abort响应没有及时被参与者接收到，那么参与者在等待超时之后执行了commit操作。这样就和其他接到abort命令并执行回滚的参与者之间存在数据不一致的情况。</p><p>我们可以看到，在分布式场景下，数据一致性是一个令人头疼的问题，有了网络分区（P），丢弃A保证不了C(二阶段提交)，有了A保证不了C(三阶段提交)，能否同时保证CAP吗，已经有人给出了答案。</p><h2 id="分布式场景下的CAP定理"><a href="#分布式场景下的CAP定理" class="headerlink" title="分布式场景下的CAP定理"></a>分布式场景下的CAP定理</h2><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211127122359135.png" alt="img](https://zivlnoff.github.io/graph/image-20211127122359135.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211127122359135.png)</p>            </figure></p><p> <strong>分布式场景下CAP最多只能满足其二</strong></p><p> 而在多数分布式场景下， P是是必不可少的，所以在CA中的权衡就成了关键。而在面向用户的应用中，用户的体验感也即系统响应时间至关重要，所以我们很难抛弃掉A，但一致性就无法保证。因此，弱化一致性的概念，定义一种新的衡量CA的维度，就有了BASE标准：</p><ul><li><strong>基本可用（Basically Available）</strong></li><li><strong>软状态（ Soft State）</strong></li><li><strong>最终一致性（ Eventual Consistency）</strong></li></ul><p>下图客官多多体会(此文不谈)：</p><p>[<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211127123322241.png" alt="img](https://zivlnoff.github.io/graph/image-20211127123322241.png)" title="" class="">                <p>img](https://zivlnoff.github.io/graph/image-20211127123322241.png)</p>            </figure></p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p><a href="https://zivlnoff.github.io/2021/12/24/Raft%E7%9A%84%E7%90%86%E5%BF%B5%E5%B0%B1%E6%98%AF%E6%94%BE%E5%A4%A7%E7%9B%B4%E8%A7%89%E6%95%88%E7%9B%8A/">Raft算法</a> </p><h2 id="参考文章："><a href="#参考文章：" class="headerlink" title="参考文章："></a>参考文章：</h2><p><a href="https://ata.alibaba-inc.com/articles/166757?spm=ata.25287382.0.0.25781e39DnAeog">https://ata.alibaba-inc.com/articles/166757?spm=ata.25287382.0.0.25781e39DnAeog</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>binary lifting is necessary?</title>
      <link href="/2021/12/24/binary-lifting-is-necessary/"/>
      <url>/2021/12/24/binary-lifting-is-necessary/</url>
      
        <content type="html"><![CDATA[<h1 id="树节点的第-K-个祖先"><a href="#树节点的第-K-个祖先" class="headerlink" title="树节点的第 K 个祖先"></a><a href="https://leetcode-cn.com/problems/kth-ancestor-of-a-tree-node/">树节点的第 K 个祖先</a></h1><h3 id="我是如何读题的？"><a href="#我是如何读题的？" class="headerlink" title="我是如何读题的？"></a>我是如何读题的？</h3><p>​    抓关键点：</p><ul><li>n个节点编号fixed 0-n-1</li><li>父节点数组表示整棵树，联想线段树等</li><li>树根编号0，如果不一定是0会有影响吗？</li><li>设计并实现，同时算法和业务代码设计</li><li>提示的范围限制如果不告诉你，能否考虑到算法的鲁棒性？</li></ul><p>​    思路产生：</p><ul><li>举个小例子，包含边界情况</li><li>每次o（树深）query    rt ， 产生思路 空间换时间</li><li>dfs记忆化，空间爆</li><li>没接触过binary lifting，但是很自然的想到了以2为底记忆化搜索，但也只能做到o（nlogn）</li><li>引发疑问，hash所有从根到所有节点的路径可以达到o（1）的查询，只是空间占用过多，能否减少空间</li><li>那就复用，理想测试用例可以达到时间复杂度o（1），空间o（n）</li><li>存在极端case，所有节点呈链状，而且从根开始往下查询，最终叶子节点为热点key，解决方案，类似并查集，只存在单个孩子可路径压缩（合并map）</li><li>时间性能和预计差不多<figure class="image-box">                <img src="https://zivlnoff.github.io/graph/image-20211224134311387.png" alt="" title="" class="">                <p></p>            </figure></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeAncestor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] parent;</span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;Integer, Integer&gt;[] map;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] hashKey;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TreeAncestor</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>[] parent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.n = n;</span><br><span class="line">        <span class="keyword">this</span>.parent = Arrays.copyOf(parent, parent.length);</span><br><span class="line">        <span class="keyword">this</span>.map = <span class="keyword">new</span> HashMap[n];</span><br><span class="line">        <span class="keyword">this</span>.hashKey = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getKthAncestor</span><span class="params">(<span class="keyword">int</span> node, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node == -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(map[node] == <span class="keyword">null</span>)&#123;</span><br><span class="line">            preDispose(node);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(map[node].size() - hashKey[node] &lt;= k)&#123;</span><br><span class="line">            <span class="keyword">return</span> getKthAncestor(parent[map[node].get(map[node].size() - <span class="number">1</span>)], k - (map[node].size() - hashKey[node]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> map[node].get(hashKey[node] + k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">preDispose</span><span class="params">(<span class="keyword">int</span> node)</span></span>&#123;</span><br><span class="line">        HashMap&lt;Integer, Integer&gt; indexMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(node != -<span class="number">1</span> &amp;&amp; map[node] == <span class="keyword">null</span>)&#123;</span><br><span class="line">            indexMap.put(i, node);</span><br><span class="line">            map[node] = indexMap;</span><br><span class="line">            hashKey[node] = i;</span><br><span class="line">            node = parent[node];</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//不能简单的复用，git分支是怎么实现的呢</span></span><br><span class="line"></span><br><span class="line">         <span class="comment">// if(node == -1)&#123;</span></span><br><span class="line">            <span class="comment">// return;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// int index0 = hashKey[node]; </span></span><br><span class="line">        <span class="comment">// HashMap&lt;Integer, Integer&gt; newIndexMap = map[node];</span></span><br><span class="line">        <span class="comment">// for(Map.Entry&lt;Integer, Integer&gt; entry: IndexMap.entrySet())&#123;</span></span><br><span class="line">        <span class="comment">//     int key = entry.getKey();</span></span><br><span class="line">        <span class="comment">//     int value = entry.getValue();</span></span><br><span class="line">        <span class="comment">//     newIndexMap.put(index0 - indexMap.size + key, value);</span></span><br><span class="line">        <span class="comment">//     map[value] = newIndexMap;</span></span><br><span class="line">        <span class="comment">//     hashKey[value] = index0 - indexMap.size + key;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your TreeAncestor object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * TreeAncestor obj = new TreeAncestor(n, parent);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj.getKthAncestor(node,k);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><p>至于binary lifting（dp+倍增）和dfs序加层次遍历结合二分的方法，都是模板，没啥好说的。</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
